/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the GitHub repository of this plugin
at https://github.com/curtgrimes/obsidian-metronome-plugin
*/

var wv=Object.create;var Es=Object.defineProperty,Sv=Object.defineProperties,Tv=Object.getOwnPropertyDescriptor,Ov=Object.getOwnPropertyDescriptors,Nv=Object.getOwnPropertyNames,Ii=Object.getOwnPropertySymbols,Ev=Object.getPrototypeOf,dc=Object.prototype.hasOwnProperty,hu=Object.prototype.propertyIsEnumerable;var mu=(o,e,t)=>e in o?Es(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,A=(o,e)=>{for(var t in e||(e={}))dc.call(e,t)&&mu(o,t,e[t]);if(Ii)for(var t of Ii(e))hu.call(e,t)&&mu(o,t,e[t]);return o},se=(o,e)=>Sv(o,Ov(e)),gu=o=>Es(o,"__esModule",{value:!0});var dn=(o,e)=>{var t={};for(var n in o)dc.call(o,n)&&e.indexOf(n)<0&&(t[n]=o[n]);if(o!=null&&Ii)for(var n of Ii(o))e.indexOf(n)<0&&hu.call(o,n)&&(t[n]=o[n]);return t};var Ue=(o,e)=>()=>(e||o((e={exports:{}}).exports,e),e.exports),Av=(o,e)=>{gu(o);for(var t in e)Es(o,t,{get:e[t],enumerable:!0})},Cv=(o,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Nv(e))!dc.call(o,n)&&n!=="default"&&Es(o,n,{get:()=>e[n],enumerable:!(t=Tv(e,n))||t.enumerable});return o},jn=o=>Cv(gu(Es(o!=null?wv(Ev(o)):{},"default",o&&o.__esModule&&"default"in o?{get:()=>o.default,enumerable:!0}:{value:o,enumerable:!0})),o);var ie=(o,e,t)=>new Promise((n,r)=>{var s=c=>{try{a(t.next(c))}catch(l){r(l)}},i=c=>{try{a(t.throw(c))}catch(l){r(l)}},a=c=>c.done?n(c.value):Promise.resolve(c.value).then(s,i);a((t=t.apply(o,e)).next())});var wf=Ue((CN,bf)=>{"use strict";bf.exports=function(o){if(typeof o!="number")throw new TypeError("Expected a number");var e=o>0?Math.floor:Math.ceil;return{days:e(o/864e5),hours:e(o/36e5)%24,minutes:e(o/6e4)%60,seconds:e(o/1e3)%60,milliseconds:e(o)%1e3}}});var Tf=Ue((Sf,Ea)=>{(function(o){"use strict";function e(t,n){n=n||2;var r=Number(t)<0,s=t.toString(),i=0;return r&&(s=s.slice(1)),i=n-s.length+1,s=new Array(i).join("0").concat(s),(r?"-":"")+s}typeof define=="function"&&define.amd?define(function(){return e}):typeof Ea!="undefined"&&Ea.exports?Ea.exports=e:o.addZero=e})(Sf)});var Nf=Ue((kN,Of)=>{var mb=wf(),jr=Tf();Of.exports=function(o,e){var t=e&&e.leading,n=o<0?-o:o,r=o<=-1e3?"-":"",s=mb(n),i=jr(s.seconds);return s.days?r+s.days+":"+jr(s.hours)+":"+jr(s.minutes)+":"+i:s.hours?r+(t?jr(s.hours):s.hours)+":"+jr(s.minutes)+":"+i:r+(t?jr(s.minutes):s.minutes)+":"+i}});var Rf=Ue((CE,ai)=>{function wb(o){if(Array.isArray(o))return o}ai.exports=wb,ai.exports.__esModule=!0,ai.exports.default=ai.exports});var Vf=Ue((kE,ci)=>{function Sb(o,e){var t=o==null?null:typeof Symbol!="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(t!=null){var n=[],r=!0,s=!1,i,a;try{for(t=t.call(o);!(r=(i=t.next()).done)&&(n.push(i.value),!(e&&n.length===e));r=!0);}catch(c){s=!0,a=c}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return n}}ci.exports=Sb,ci.exports.__esModule=!0,ci.exports.default=ci.exports});var qf=Ue((DE,li)=>{function Tb(o,e){(e==null||e>o.length)&&(e=o.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=o[t];return n}li.exports=Tb,li.exports.__esModule=!0,li.exports.default=li.exports});var Bf=Ue((ME,ui)=>{var Lf=qf();function Ob(o,e){if(!!o){if(typeof o=="string")return Lf(o,e);var t=Object.prototype.toString.call(o).slice(8,-1);if(t==="Object"&&o.constructor&&(t=o.constructor.name),t==="Map"||t==="Set")return Array.from(o);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Lf(o,e)}}ui.exports=Ob,ui.exports.__esModule=!0,ui.exports.default=ui.exports});var jf=Ue((PE,pi)=>{function Nb(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}pi.exports=Nb,pi.exports.__esModule=!0,pi.exports.default=pi.exports});var Wf=Ue((IE,fi)=>{var Eb=Rf(),Ab=Vf(),Cb=Bf(),kb=jf();function Db(o,e){return Eb(o)||Ab(o,e)||Cb(o,e)||kb()}fi.exports=Db,fi.exports.__esModule=!0,fi.exports.default=fi.exports});var zf=Ue((FE,di)=>{function Mb(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}di.exports=Mb,di.exports.__esModule=!0,di.exports.default=di.exports});var Uf=Ue((RE,hi)=>{function $f(o,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(o,n.key,n)}}function Pb(o,e,t){return e&&$f(o.prototype,e),t&&$f(o,t),Object.defineProperty(o,"prototype",{writable:!1}),o}hi.exports=Pb,hi.exports.__esModule=!0,hi.exports.default=hi.exports});var il=Ue((Aa,Gf)=>{(function(o,e){typeof Aa=="object"&&typeof Gf!="undefined"?e(Aa,Wf(),zf(),Uf()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/slicedToArray","@babel/runtime/helpers/classCallCheck","@babel/runtime/helpers/createClass"],e):(o=typeof globalThis!="undefined"?globalThis:o||self,e(o.automationEvents={},o._slicedToArray,o._classCallCheck,o._createClass))})(Aa,function(o,e,t,n){"use strict";function r(B){return B&&typeof B=="object"&&"default"in B?B:{default:B}}var s=r(e),i=r(t),a=r(n),c=function(M,U,V){return{endTime:U,insertTime:V,type:"exponentialRampToValue",value:M}},l=function(M,U,V){return{endTime:U,insertTime:V,type:"linearRampToValue",value:M}},u=function(M,U){return{startTime:U,type:"setValue",value:M}},p=function(M,U,V){return{duration:V,startTime:U,type:"setValueCurve",values:M}},f=function(M,U,V){var J=V.startTime,Z=V.target,de=V.timeConstant;return Z+(U-Z)*Math.exp((J-M)/de)},d=function(M){return M.type==="exponentialRampToValue"},h=function(M){return M.type==="linearRampToValue"},m=function(M){return d(M)||h(M)},g=function(M){return M.type==="setValue"},x=function(M){return M.type==="setValueCurve"},T=function B(M,U,V,J){var Z=M[U];return Z===void 0?J:m(Z)||g(Z)?Z.value:x(Z)?Z.values[Z.values.length-1]:f(V,B(M,U-1,Z.startTime,J),Z)},D=function(M,U,V,J,Z){return V===void 0?[J.insertTime,Z]:m(V)?[V.endTime,V.value]:g(V)?[V.startTime,V.value]:x(V)?[V.startTime+V.duration,V.values[V.values.length-1]]:[V.startTime,T(M,U-1,V.startTime,Z)]},C=function(M){return M.type==="cancelAndHold"},w=function(M){return M.type==="cancelScheduledValues"},N=function(M){return C(M)||w(M)?M.cancelTime:d(M)||h(M)?M.endTime:M.startTime},b=function(M,U,V,J){var Z=J.endTime,de=J.value;return V===de?de:0<V&&0<de||V<0&&de<0?V*Math.pow(de/V,(M-U)/(Z-U)):0},O=function(M,U,V,J){var Z=J.endTime,de=J.value;return V+(M-U)/(Z-U)*(de-V)},L=function(M,U){var V=Math.floor(U),J=Math.ceil(U);return V===J?M[V]:(1-(U-V))*M[V]+(1-(J-U))*M[J]},Y=function(M,U){var V=U.duration,J=U.startTime,Z=U.values,de=(M-J)/V*(Z.length-1);return L(Z,de)},R=function(M){return M.type==="setTarget"},E=function(B){function M(U){i.default(this,M),this._automationEvents=[],this._currenTime=0,this._defaultValue=U}return a.default(M,[{key:B,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(V){var J=N(V);if(C(V)||w(V)){var Z=this._automationEvents.findIndex(function(yt){return w(V)&&x(yt)?yt.startTime+yt.duration>=J:N(yt)>=J}),de=this._automationEvents[Z];if(Z!==-1&&(this._automationEvents=this._automationEvents.slice(0,Z)),C(V)){var ce=this._automationEvents[this._automationEvents.length-1];if(de!==void 0&&m(de)){if(R(ce))throw new Error("The internal list is malformed.");var Se=x(ce)?ce.startTime+ce.duration:N(ce),pe=x(ce)?ce.values[ce.values.length-1]:ce.value,nt=d(de)?b(J,Se,pe,de):O(J,Se,pe,de),Lt=d(de)?c(nt,J,this._currenTime):l(nt,J,this._currenTime);this._automationEvents.push(Lt)}ce!==void 0&&R(ce)&&this._automationEvents.push(u(this.getValue(J),J)),ce!==void 0&&x(ce)&&ce.startTime+ce.duration>J&&(this._automationEvents[this._automationEvents.length-1]=p(new Float32Array([6,7]),ce.startTime,J-ce.startTime))}}else{var oe=this._automationEvents.findIndex(function(yt){return N(yt)>J}),rt=oe===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[oe-1];if(rt!==void 0&&x(rt)&&N(rt)+rt.duration>J)return!1;var Dt=d(V)?c(V.value,V.endTime,this._currenTime):h(V)?l(V.value,J,this._currenTime):V;if(oe===-1)this._automationEvents.push(Dt);else{if(x(V)&&J+V.duration>N(this._automationEvents[oe]))return!1;this._automationEvents.splice(oe,0,Dt)}}return!0}},{key:"flush",value:function(V){var J=this._automationEvents.findIndex(function(ce){return N(ce)>V});if(J>1){var Z=this._automationEvents.slice(J-1),de=Z[0];R(de)&&Z.unshift(u(T(this._automationEvents,J-2,de.startTime,this._defaultValue),de.startTime)),this._automationEvents=Z}}},{key:"getValue",value:function(V){if(this._automationEvents.length===0)return this._defaultValue;var J=this._automationEvents.findIndex(function(v){return N(v)>V}),Z=this._automationEvents[J],de=(J===-1?this._automationEvents.length:J)-1,ce=this._automationEvents[de];if(ce!==void 0&&R(ce)&&(Z===void 0||!m(Z)||Z.insertTime>V))return f(V,T(this._automationEvents,de-1,ce.startTime,this._defaultValue),ce);if(ce!==void 0&&g(ce)&&(Z===void 0||!m(Z)))return ce.value;if(ce!==void 0&&x(ce)&&(Z===void 0||!m(Z)||ce.startTime+ce.duration>V))return V<ce.startTime+ce.duration?Y(V,ce):ce.values[ce.values.length-1];if(ce!==void 0&&m(ce)&&(Z===void 0||!m(Z)))return ce.value;if(Z!==void 0&&d(Z)){var Se=D(this._automationEvents,de,ce,Z,this._defaultValue),pe=s.default(Se,2),nt=pe[0],Lt=pe[1];return b(V,nt,Lt,Z)}if(Z!==void 0&&h(Z)){var oe=D(this._automationEvents,de,ce,Z,this._defaultValue),rt=s.default(oe,2),Dt=rt[0],yt=rt[1];return O(V,Dt,yt,Z)}return this._defaultValue}}]),M}(Symbol.iterator),H=function(M){return{cancelTime:M,type:"cancelAndHold"}},F=function(M){return{cancelTime:M,type:"cancelScheduledValues"}},ee=function(M,U){return{endTime:U,type:"exponentialRampToValue",value:M}},$=function(M,U){return{endTime:U,type:"linearRampToValue",value:M}},X=function(M,U,V){return{startTime:U,target:M,timeConstant:V,type:"setTarget"}};o.AutomationEventList=E,o.createCancelAndHoldAutomationEvent=H,o.createCancelScheduledValuesAutomationEvent=F,o.createExponentialRampToValueAutomationEvent=ee,o.createLinearRampToValueAutomationEvent=$,o.createSetTargetAutomationEvent=X,o.createSetValueAutomationEvent=u,o.createSetValueCurveAutomationEvent=p,Object.defineProperty(o,"__esModule",{value:!0})})});var p_=Ue((HX,Xa)=>{var Ug,Gg,Hg,Yg,Xg,Kg,Qg,Zg,Jg,Ha,Ll,e_,t_,o_,is,n_,r_,s_,i_,a_,c_,l_,u_,Ya;(function(o){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){o(t(e,t(n)))}):typeof Xa=="object"&&typeof Xa.exports=="object"?o(t(e,t(Xa.exports))):o(t(e));function t(n,r){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,i){return n[s]=r?r(s,i):i}}})(function(o){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])};Ug=function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(n,r);function s(){this.constructor=n}n.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)},Gg=Object.assign||function(n){for(var r,s=1,i=arguments.length;s<i;s++){r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])}return n},Hg=function(n,r){var s={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&r.indexOf(i)<0&&(s[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)r.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(s[i[a]]=n[i[a]]);return s},Yg=function(n,r,s,i){var a=arguments.length,c=a<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,s):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,r,s,i);else for(var u=n.length-1;u>=0;u--)(l=n[u])&&(c=(a<3?l(c):a>3?l(r,s,c):l(r,s))||c);return a>3&&c&&Object.defineProperty(r,s,c),c},Xg=function(n,r){return function(s,i){r(s,i,n)}},Kg=function(n,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,r)},Qg=function(n,r,s,i){function a(c){return c instanceof s?c:new s(function(l){l(c)})}return new(s||(s=Promise))(function(c,l){function u(d){try{f(i.next(d))}catch(h){l(h)}}function p(d){try{f(i.throw(d))}catch(h){l(h)}}function f(d){d.done?c(d.value):a(d.value).then(u,p)}f((i=i.apply(n,r||[])).next())})},Zg=function(n,r){var s={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(f){return function(d){return p([f,d])}}function p(f){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,a&&(c=f[0]&2?a.return:f[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,f[1])).done)return c;switch(a=0,c&&(f=[f[0]&2,c.value]),f[0]){case 0:case 1:c=f;break;case 4:return s.label++,{value:f[1],done:!1};case 5:s.label++,a=f[1],f=[0];continue;case 7:f=s.ops.pop(),s.trys.pop();continue;default:if(c=s.trys,!(c=c.length>0&&c[c.length-1])&&(f[0]===6||f[0]===2)){s=0;continue}if(f[0]===3&&(!c||f[1]>c[0]&&f[1]<c[3])){s.label=f[1];break}if(f[0]===6&&s.label<c[1]){s.label=c[1],c=f;break}if(c&&s.label<c[2]){s.label=c[2],s.ops.push(f);break}c[2]&&s.ops.pop(),s.trys.pop();continue}f=r.call(n,s)}catch(d){f=[6,d],a=0}finally{i=c=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Jg=function(n,r){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(r,s)&&Ya(r,n,s)},Ya=Object.create?function(n,r,s,i){i===void 0&&(i=s),Object.defineProperty(n,i,{enumerable:!0,get:function(){return r[s]}})}:function(n,r,s,i){i===void 0&&(i=s),n[i]=r[s]},Ha=function(n){var r=typeof Symbol=="function"&&Symbol.iterator,s=r&&n[r],i=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},Ll=function(n,r){var s=typeof Symbol=="function"&&n[Symbol.iterator];if(!s)return n;var i=s.call(n),a,c=[],l;try{for(;(r===void 0||r-- >0)&&!(a=i.next()).done;)c.push(a.value)}catch(u){l={error:u}}finally{try{a&&!a.done&&(s=i.return)&&s.call(i)}finally{if(l)throw l.error}}return c},e_=function(){for(var n=[],r=0;r<arguments.length;r++)n=n.concat(Ll(arguments[r]));return n},t_=function(){for(var n=0,r=0,s=arguments.length;r<s;r++)n+=arguments[r].length;for(var i=Array(n),a=0,r=0;r<s;r++)for(var c=arguments[r],l=0,u=c.length;l<u;l++,a++)i[a]=c[l];return i},o_=function(n,r,s){if(s||arguments.length===2)for(var i=0,a=r.length,c;i<a;i++)(c||!(i in r))&&(c||(c=Array.prototype.slice.call(r,0,i)),c[i]=r[i]);return n.concat(c||Array.prototype.slice.call(r))},is=function(n){return this instanceof is?(this.v=n,this):new is(n)},n_=function(n,r,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=s.apply(n,r||[]),a,c=[];return a={},l("next"),l("throw"),l("return"),a[Symbol.asyncIterator]=function(){return this},a;function l(m){i[m]&&(a[m]=function(g){return new Promise(function(x,T){c.push([m,g,x,T])>1||u(m,g)})})}function u(m,g){try{p(i[m](g))}catch(x){h(c[0][3],x)}}function p(m){m.value instanceof is?Promise.resolve(m.value.v).then(f,d):h(c[0][2],m)}function f(m){u("next",m)}function d(m){u("throw",m)}function h(m,g){m(g),c.shift(),c.length&&u(c[0][0],c[0][1])}},r_=function(n){var r,s;return r={},i("next"),i("throw",function(a){throw a}),i("return"),r[Symbol.iterator]=function(){return this},r;function i(a,c){r[a]=n[a]?function(l){return(s=!s)?{value:is(n[a](l)),done:a==="return"}:c?c(l):l}:c}},s_=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n[Symbol.asyncIterator],s;return r?r.call(n):(n=typeof Ha=="function"?Ha(n):n[Symbol.iterator](),s={},i("next"),i("throw"),i("return"),s[Symbol.asyncIterator]=function(){return this},s);function i(c){s[c]=n[c]&&function(l){return new Promise(function(u,p){l=n[c](l),a(u,p,l.done,l.value)})}}function a(c,l,u,p){Promise.resolve(p).then(function(f){c({value:f,done:u})},l)}},i_=function(n,r){return Object.defineProperty?Object.defineProperty(n,"raw",{value:r}):n.raw=r,n};var t=Object.create?function(n,r){Object.defineProperty(n,"default",{enumerable:!0,value:r})}:function(n,r){n.default=r};a_=function(n){if(n&&n.__esModule)return n;var r={};if(n!=null)for(var s in n)s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)&&Ya(r,n,s);return t(r,n),r},c_=function(n){return n&&n.__esModule?n:{default:n}},l_=function(n,r,s,i){if(s==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?n!==r||!i:!r.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?i:s==="a"?i.call(n):i?i.value:r.get(n)},u_=function(n,r,s,i,a){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?n!==r||!a:!r.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?a.call(n,s):a?a.value=s:r.set(n,s),s},o("__extends",Ug),o("__assign",Gg),o("__rest",Hg),o("__decorate",Yg),o("__param",Xg),o("__metadata",Kg),o("__awaiter",Qg),o("__generator",Zg),o("__exportStar",Jg),o("__createBinding",Ya),o("__values",Ha),o("__read",Ll),o("__spread",e_),o("__spreadArrays",t_),o("__spreadArray",o_),o("__await",is),o("__asyncGenerator",n_),o("__asyncDelegator",r_),o("__asyncValues",s_),o("__makeTemplateObject",i_),o("__importStar",a_),o("__importDefault",c_),o("__classPrivateFieldGet",l_),o("__classPrivateFieldSet",u_)})});var $_=Ue(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});ic.Validate=void 0;var ht={exclusiveBetween(o,e){return e>o.start&&e<o.end},inclusiveBetween(o,e){return e>=o.start&&e<=o.end},isDefined(o){return o!==void 0},isEqualOrGreaterThan(o,e){return e>=o},isEqualOrLessThan(o,e){return e<=o},isGreaterThan(o,e){return e>o},isLessThan(o,e){return e<o},isNull(o){return o===null},isNullish(o){return o==null},isTrue(o){return o}},Ln=o=>({isDefined:o.isDefined,isNull:o.isNull,isNullish:o.isNullish,isTrue:o.isTrue});ic.Validate={isDefined(o,e){if(!ht.isDefined(o))throw new Error(e);return Ln(this)},isNull(o,e){if(!ht.isNull(o))throw new Error(e);return Ln(this)},isNullish(o,e){if(!ht.isNullish(o))throw new Error(e);return Ln(this)},isTrue(o,e){if(!ht.isTrue(o))throw new Error(e);return Ln(this)},n(o){return{exclusiveBetween(e,t,n){if(!ht.exclusiveBetween({start:e,end:t},o))throw new RangeError(n);return this},inclusiveBetween(e,t,n){if(!ht.inclusiveBetween({start:e,end:t},o))throw new RangeError(n);return this},is(e,t){if(o!==e)throw new Error(t);return this},isEqualOrGreaterThan(e,t){if(!ht.isEqualOrGreaterThan(e,o))throw new RangeError(t);return this},isEqualOrLessThan(e,t){if(!ht.isEqualOrLessThan(e,o))throw new RangeError(t);return this},isGreaterThan(e,t){if(!ht.isGreaterThan(e,o))throw new RangeError(t);return this},isLessThan(e,t){if(!ht.isLessThan(e,o))throw new RangeError(t);return this}}},not(){return{isDefined(o,e){if(ht.isDefined(o))throw new Error(e);return Ln(this)},isNull(o,e){if(ht.isNull(o))throw new Error(e);return Ln(this)},isNullish(o,e){if(ht.isNullish(o))throw new Error(e);return Ln(this)},isTrue(o,e){if(ht.isTrue(o))throw new Error(e);return Ln(this)},n(o){return{exclusiveBetween(e,t,n){if(ht.exclusiveBetween({start:e,end:t},o))throw new RangeError(n);return this},inclusiveBetween(e,t,n){if(ht.inclusiveBetween({start:e,end:t},o))throw new RangeError(n);return this},is(e,t){if(o===e)throw new Error(t);return this},isEqualOrGreaterThan(e,t){if(ht.isEqualOrGreaterThan(e,o))throw new RangeError(t);return this},isEqualOrLessThan(e,t){if(ht.isEqualOrLessThan(e,o))throw new RangeError(t);return this},isGreaterThan(e,t){if(ht.isGreaterThan(e,o))throw new RangeError(t);return this},isLessThan(e,t){if(ht.isLessThan(e,o))throw new RangeError(t);return this}}}}}}});var U_=Ue(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});ac.Validate=void 0;var U0=$_();Object.defineProperty(ac,"Validate",{enumerable:!0,get:function(){return U0.Validate}})});var G_=Ue(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});cc.BPM=void 0;var G0=U_(),H0=function(){function o(e){G0.Validate.n(e).isGreaterThan(0,"bpm must be greater than 0. Instead received: "+e),this.value=e}return o.prototype.applyBeatNote=function(e,t){if(t==="thirtysecondth")return e*8;if(t==="sixteenth")return e*4;if(t==="eigth")return e*2;if(t==="quarter")return e;if(t==="half")return e/2;if(t==="whole")return e/4;throw new Error("'"+t+"' is not a recognized NoteDuration.")},o.prototype.normalizeToQuarter=function(e,t){if(t==="sixtyfourth")return e/16;if(t==="thirtysecondth")return e/8;if(t==="sixteenth")return e/4;if(t==="eigth")return e/2;if(t==="quarter")return e;if(t==="half")return e*2;if(t==="whole")return e*4;throw new Error("'"+t+"' is not a recognized NoteDuration.")},o.prototype.durationFor=function(e,t){return t===void 0&&(t="quarter"),60/this.numberOfBeatsFor(e,t)},o.prototype.numberOfBeatsFor=function(e,t){return t===void 0&&(t="quarter"),this.applyBeatNote(this.normalizeToQuarter(this.value,t),e)},o}();cc.BPM=H0});var Y_=Ue((Dve,H_)=>{var Y0=(o,e)=>o+e,X0=(o,e)=>o-e,K0=(o,e)=>o*e,Q0=(o,e)=>o**e;function Z0(o,e){if(e===0)throw new TypeError("can't divide by zero");return o/e}H_.exports={"+":Y0,"-":X0,"*":K0,"/":Z0,"^":Q0}});var K_=Ue((Mve,X_)=>{var lc=new Map([[0,1]]);function nu(o){if(o%1!=0||o<0)throw new TypeError("fact(x) only accepts non-negative integers");if(lc.has(o))return lc.get(o);let e=o*nu(o-1);return lc.set(o,e),e}lc.set(5,nu(5));X_.exports=nu});var tv=Ue((Pve,ev)=>{var Q_=new Map([[0,0],[30,.5],[45,Math.sqrt(2)/2],[60,Math.sqrt(3)/2],[90,1]]),Z_=new Map([[45,Math.sqrt(2)/2],[60,.5]]);function Ts(o){return o%=360,o<0?Ts(360-o):o>180?-Ts(o-180):o>90&&o<=180?Ts(180-o):Q_.has(o)?Q_.get(o):Math.sin(o*Math.PI/180)}function Mi(o){return o%=360,o<0?Mi(-o):o>90&&o<270?-Mi(180-o):o>=270?Mi(o-360):Z_.has(o)?Z_.get(o):Math.sqrt(1-Ts(o)**2)}function J_(o){return Ts(o)/Mi(o)}function J0(o){return 1/J_(o)}ev.exports={sin:Ts,cos:Mi,tan:J_,cot:J0}});var nv=Ue((Ive,ov)=>{var eS=K_(),tS=tv();ov.exports=se(A({},tS),{ln:Math.log,log:Math.log10,cbrt:Math.cbrt,sqrt:Math.sqrt,abs:Math.abs,fact:eS})});var uc=Ue((Fve,cv)=>{var rv=Y_(),oS=nv(),Yo=class{constructor(e,t=!1){this.type=Yo.TYPES.NUMBER,this.rawValue=e,this.isNegative=t}get value(){return(this.isNegative?-1:1)*Number.parseFloat(this.rawValue)}toString(){return this.value}static get TYPES(){return{NUMBER:1,OPERATOR:2,PARENTHESIS:3,FUNCTION:4}}},sv=class extends Yo{constructor(e){super(e);this.type=Yo.TYPES.OPERATOR,this.operatorType=this.rawValue,this.priority=e==="^"?3:[..."/*"].includes(e)?2:1}perform(e,t){let n=this.operatorType;if(rv[n])return rv[n](e,t);throw new TypeError(`"${n}" is not a valid operator`)}toString(){return this.operatorType}},iv=class extends Yo{constructor(e,t){super(e,t);this.type=Yo.TYPES.PARENTHESIS,this.innerValue=e.slice(1,-1)}toString(){return`${this.isNegative?"-":""}(${this.innerValue})`}},av=class extends Yo{constructor(e,t,n){super("",n);this.type=Yo.TYPES.FUNCTION,this.argumentParenthesis=t,this.functionType=e}calculate(e){let t=oS[this.functionType];if(!t)throw new Error(`unknown function: ${this.functionType}`);return(this.isNegative?-1:1)*t(e)}toString(){return`${this.isNegative?"-":""}${this.functionType}(${this.argumentParenthesis.innerValue})`}};cv.exports={Token:Yo,Operator:sv,Parenthesis:iv,MathFunction:av}});var au=Ue((Rve,pv)=>{var{Operator:ru,Token:Os,Parenthesis:su,MathFunction:lv}=uc(),pc=o=>o[o.length-1],nS=(o,e)=>(pc(o)||{}).functionType!==e,uv=o=>[Os.TYPES.PARENTHESIS,Os.TYPES.FUNCTION].includes((pc(o)||{}).type),iu=(o,e)=>e||uv(o);pv.exports=function(e){if(!e.trim())throw new Error("no expression");let t=[],n="",r=!1,s=!1,i="",a=0;for(let l=0;l<e.length;l++){let u=e[l];if(u===" "){if(l>0){let p=e[l-1],f=e.slice(l+1);if(/\d/.test(p)&&/^\s*\d/.test(f))throw new Error("unexpected whitespace")}continue}if(u==="("){if(s=!0,a++,a===1){iu(t,n)&&(n&&t.push(new Os(n,r)),t.push(new ru("*")),n="",r=!1);continue}}else if(u===")"&&(a--,a===0)){s=!1,i?(t.push(new lv(i,new su(`(${n})`),r)),i=""):t.push(new su(`(${n})`,r)),n="";continue}if(s){n+=u;continue}if(a===0&&/[a-z]/.test(u))i+=u;else if(u==="!"&&iu(t,n)&&nS(t,"fact")){let p;n||(p=pc(t),t.pop()),t.push(new lv("fact",new su(`(${n||p})`),r)),r=!1,n=""}else if(/[0-9.]/.test(u)){if(!s&&i)throw new Error(`unexpected "${e.substr(l-i.length,i.length)}"`);uv(t)&&t.push(new ru("*")),n+=u}else if([..."^-+*/"].includes(u)){if(iu(t,n))n&&t.push(new Os(n,r)),t.push(new ru(u)),n="",r=!1;else if(u==="-")r=!r;else if(u!=="+")throw new Error(`unexpected "${u}"`)}else throw new Error(`unexpected "${u}"`)}if(a!==0)throw new Error("parenthesis are not balanced");if(i)throw new Error(`unexpected "${i}"`);n&&t.push(new Os(n,r));let c=pc(t);if(c.type===Os.TYPES.OPERATOR)throw new Error(`expected an expression after operator ${c.operatorType} at index ${e.length-1}`);return t}});var mv=Ue((Vve,hv)=>{var{Token:Bn}=uc(),rS=au(),fv=o=>o.filter(Boolean);function sS(o){for(let e=0;e<o.length;e++){let t=o[e];if(t.type===Bn.TYPES.FUNCTION){let n=cu(t.argumentParenthesis.innerValue);o[e]=new Bn(t.calculate(n))}}}function iS(o){for(let e=0;e<o.length;e++){let t=o[e];if(t.type===Bn.TYPES.PARENTHESIS){let n=cu(t.innerValue);t.isNegative&&(n*=-1),o[e]=new Bn(n.toString())}}}function aS(o){let e=!1;for(let t=o.length-1;t>=0;t--){let n=o[t];if(n.type===Bn.TYPES.OPERATOR&&n.priority===3){let r=o[t-1],s=o[t+1],i=n.perform(r.value,s.value);o[t-1]=new Bn(i.toString(),s.value%2==0&&r.isNegative),o[t]=null,o[t+1]=null,e=!0}}return e}function cS(o){let e=!1;for(let t=0;t<o.length;t++){let n=o[t];if(n.type===Bn.TYPES.OPERATOR&&n.priority===2){let r=o[t-1],s=o[t+1],i=n.perform(r.value,s.value);e=!0,o[t+1]=new Bn(i.toString()),o[t]=null,o[t-1]=null,t++}}return e}function dv(o){if(!o.length)throw new Error("no tokens");sS(o),iS(o),aS(o)&&(o=fv(o)),cS(o)&&(o=fv(o));let e=o[0].value;for(let t=1;t<o.length;t+=2)e=o[t].perform(e,o[t+1].value);return e}function cu(o){return dv(rS(o))}hv.exports={evalExpression:cu,evalTokens:dv}});var _v=Ue((qve,gv)=>{var{evalExpression:lS,evalTokens:uS}=mv(),pS=au(),{Operator:fS,Parenthesis:dS,Token:hS}=uc();gv.exports={evalExpression:lS,evalTokens:uS,tokenize:pS,Token:hS,Operator:fS,Parenthesis:dS}});Av(exports,{default:()=>uu});var fc=jn(require("obsidian"));function Ar(o,e){let t=Object.create(null),n=o.split(",");for(let r=0;r<n.length;r++)t[n[r]]=!0;return e?r=>!!t[r.toLowerCase()]:r=>!!t[r]}var gS={[1]:"TEXT",[2]:"CLASS",[4]:"STYLE",[8]:"PROPS",[16]:"FULL_PROPS",[32]:"HYDRATE_EVENTS",[64]:"STABLE_FRAGMENT",[128]:"KEYED_FRAGMENT",[256]:"UNKEYED_FRAGMENT",[512]:"NEED_PATCH",[1024]:"DYNAMIC_SLOTS",[2048]:"DEV_ROOT_FRAGMENT",[-1]:"HOISTED",[-2]:"BAIL"},_S={[1]:"STABLE",[2]:"DYNAMIC",[3]:"FORWARDED"};var _u="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",vu=Ar(_u),vS=Ar(_u+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected");function hc(o){return!!o||o===""}function wt(o){if(me(o)){let e={};for(let t=0;t<o.length;t++){let n=o[t],r=pt(n)?Mv(n):wt(n);if(r)for(let s in r)e[s]=r[s]}return e}else{if(pt(o))return o;if(Xe(o))return o}}var kv=/;(?![^(]*\))/g,Dv=/:(.+)/;function Mv(o){let e={};return o.split(kv).forEach(t=>{if(t){let n=t.split(Dv);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function go(o){let e="";if(pt(o))e=o;else if(me(o))for(let t=0;t<o.length;t++){let n=go(o[t]);n&&(e+=n+" ")}else if(Xe(o))for(let t in o)o[t]&&(e+=t+" ");return e.trim()}var Wn=o=>o==null?"":me(o)||Xe(o)&&(o.toString===bu||!_e(o.toString))?JSON.stringify(o,yu,2):String(o),yu=(o,e)=>e&&e.__v_isRef?yu(o,e.value):hn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[n,r])=>(t[`${n} =>`]=r,t),{})}:Ri(e)?{[`Set(${e.size})`]:[...e.values()]}:Xe(e)&&!me(e)&&!_c(e)?String(e):e,Pe={},zn=[],Xt=()=>{},xu=()=>!1,Pv=/^on[^a-z]/,Cr=o=>Pv.test(o),As=o=>o.startsWith("onUpdate:"),ut=Object.assign,Fi=(o,e)=>{let t=o.indexOf(e);t>-1&&o.splice(t,1)},Iv=Object.prototype.hasOwnProperty,Ne=(o,e)=>Iv.call(o,e),me=Array.isArray,hn=o=>qi(o)==="[object Map]",Ri=o=>qi(o)==="[object Set]";var _e=o=>typeof o=="function",pt=o=>typeof o=="string",Vi=o=>typeof o=="symbol",Xe=o=>o!==null&&typeof o=="object",mc=o=>Xe(o)&&_e(o.then)&&_e(o.catch),bu=Object.prototype.toString,qi=o=>bu.call(o),gc=o=>qi(o).slice(8,-1),_c=o=>qi(o)==="[object Object]",Li=o=>pt(o)&&o!=="NaN"&&o[0]!=="-"&&""+parseInt(o,10)===o,Cs=Ar(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Bi=o=>{let e=Object.create(null);return t=>e[t]||(e[t]=o(t))},Fv=/-(\w)/g,Do=Bi(o=>o.replace(Fv,(e,t)=>t?t.toUpperCase():"")),Rv=/\B([A-Z])/g,mn=Bi(o=>o.replace(Rv,"-$1").toLowerCase()),ks=Bi(o=>o.charAt(0).toUpperCase()+o.slice(1)),Ds=Bi(o=>o?`on${ks(o)}`:""),$n=(o,e)=>!Object.is(o,e),Ms=(o,e)=>{for(let t=0;t<o.length;t++)o[t](e)},kr=(o,e,t)=>{Object.defineProperty(o,e,{configurable:!0,enumerable:!1,value:t})},ji=o=>{let e=parseFloat(o);return isNaN(e)?o:e},wu,Su=()=>wu||(wu=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});var Mo,Wi=[],zi=class{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&Mo&&(this.parent=Mo,this.index=(Mo.scopes||(Mo.scopes=[])).push(this)-1)}run(e){if(this.active)try{return this.on(),e()}finally{this.off()}}on(){this.active&&(Wi.push(this),Mo=this)}off(){this.active&&(Wi.pop(),Mo=Wi[Wi.length-1])}stop(e){if(this.active){if(this.effects.forEach(t=>t.stop()),this.cleanups.forEach(t=>t()),this.scopes&&this.scopes.forEach(t=>t.stop(!0)),this.parent&&!e){let t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.active=!1}}};function Vv(o,e){e=e||Mo,e&&e.active&&e.effects.push(o)}function $i(){return Mo}function vc(o){Mo&&Mo.cleanups.push(o)}var yc=o=>{let e=new Set(o);return e.w=0,e.n=0,e},Tu=o=>(o.w&gn)>0,Ou=o=>(o.n&gn)>0,qv=({deps:o})=>{if(o.length)for(let e=0;e<o.length;e++)o[e].w|=gn},Lv=o=>{let{deps:e}=o;if(e.length){let t=0;for(let n=0;n<e.length;n++){let r=e[n];Tu(r)&&!Ou(r)?r.delete(o):e[t++]=r,r.w&=~gn,r.n&=~gn}e.length=t}},xc=new WeakMap,Ps=0,gn=1,bc=30,Is=[],Un,Gn=Symbol(""),wc=Symbol(""),Dr=class{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],Vv(this,n)}run(){if(!this.active)return this.fn();if(!Is.includes(this))try{return Is.push(Un=this),Bv(),gn=1<<++Ps,Ps<=bc?qv(this):Nu(this),this.fn()}finally{Ps<=bc&&Lv(this),gn=1<<--Ps,Xo(),Is.pop();let e=Is.length;Un=e>0?Is[e-1]:void 0}}stop(){this.active&&(Nu(this),this.onStop&&this.onStop(),this.active=!1)}};function Nu(o){let{deps:e}=o;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(o);e.length=0}}var Mr=!0,Sc=[];function _n(){Sc.push(Mr),Mr=!1}function Bv(){Sc.push(Mr),Mr=!0}function Xo(){let o=Sc.pop();Mr=o===void 0?!0:o}function Bt(o,e,t){if(!Eu())return;let n=xc.get(o);n||xc.set(o,n=new Map);let r=n.get(t);r||n.set(t,r=yc()),Au(r,void 0)}function Eu(){return Mr&&Un!==void 0}function Au(o,e){let t=!1;Ps<=bc?Ou(o)||(o.n|=gn,t=!Tu(o)):t=!o.has(Un),t&&(o.add(Un),Un.deps.push(o))}function Po(o,e,t,n,r,s){let i=xc.get(o);if(!i)return;let a=[];if(e==="clear")a=[...i.values()];else if(t==="length"&&me(o))i.forEach((l,u)=>{(u==="length"||u>=n)&&a.push(l)});else switch(t!==void 0&&a.push(i.get(t)),e){case"add":me(o)?Li(t)&&a.push(i.get("length")):(a.push(i.get(Gn)),hn(o)&&a.push(i.get(wc)));break;case"delete":me(o)||(a.push(i.get(Gn)),hn(o)&&a.push(i.get(wc)));break;case"set":hn(o)&&a.push(i.get(Gn));break}let c=void 0;if(a.length===1)a[0]&&Tc(a[0]);else{let l=[];for(let u of a)u&&l.push(...u);Tc(yc(l))}}function Tc(o,e){for(let t of me(o)?o:[...o])(t!==Un||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}var jv=Ar("__proto__,__v_isRef,__isVue"),Cu=new Set(Object.getOwnPropertyNames(Symbol).map(o=>Symbol[o]).filter(Vi)),Wv=Oc(),zv=Oc(!1,!0),$v=Oc(!0);var ku=Uv();function Uv(){let o={};return["includes","indexOf","lastIndexOf"].forEach(e=>{o[e]=function(...t){let n=Te(this);for(let s=0,i=this.length;s<i;s++)Bt(n,"get",s+"");let r=n[e](...t);return r===-1||r===!1?n[e](...t.map(Te)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{o[e]=function(...t){_n();let n=Te(this)[e].apply(this,t);return Xo(),n}}),o}function Oc(o=!1,e=!1){return function(n,r,s){if(r==="__v_isReactive")return!o;if(r==="__v_isReadonly")return o;if(r==="__v_raw"&&s===(o?e?ay:Lu:e?qu:Vu).get(n))return n;let i=me(n);if(!o&&i&&Ne(ku,r))return Reflect.get(ku,r,s);let a=Reflect.get(n,r,s);return(Vi(r)?Cu.has(r):jv(r))||(o||Bt(n,"get",r),e)?a:st(a)?!i||!Li(r)?a.value:a:Xe(a)?o?Fs(a):Hn(a):a}}var Gv=Du(),Hv=Du(!0);function Du(o=!1){return function(t,n,r,s){let i=t[n];if(!o&&!Rs(r)&&(r=Te(r),i=Te(i),!me(t)&&st(i)&&!st(r)))return i.value=r,!0;let a=me(t)&&Li(n)?Number(n)<t.length:Ne(t,n),c=Reflect.set(t,n,r,s);return t===Te(s)&&(a?$n(r,i)&&Po(t,"set",n,r,i):Po(t,"add",n,r)),c}}function Yv(o,e){let t=Ne(o,e),n=o[e],r=Reflect.deleteProperty(o,e);return r&&t&&Po(o,"delete",e,void 0,n),r}function Xv(o,e){let t=Reflect.has(o,e);return(!Vi(e)||!Cu.has(e))&&Bt(o,"has",e),t}function Kv(o){return Bt(o,"iterate",me(o)?"length":Gn),Reflect.ownKeys(o)}var Mu={get:Wv,set:Gv,deleteProperty:Yv,has:Xv,ownKeys:Kv},Qv={get:$v,set(o,e){return!0},deleteProperty(o,e){return!0}},Zv=ut({},Mu,{get:zv,set:Hv});var Nc=o=>o,Ui=o=>Reflect.getPrototypeOf(o);function Gi(o,e,t=!1,n=!1){o=o.__v_raw;let r=Te(o),s=Te(e);e!==s&&!t&&Bt(r,"get",e),!t&&Bt(r,"get",s);let{has:i}=Ui(r),a=n?Nc:t?kc:qs;if(i.call(r,e))return a(o.get(e));if(i.call(r,s))return a(o.get(s));o!==r&&o.get(e)}function Hi(o,e=!1){let t=this.__v_raw,n=Te(t),r=Te(o);return o!==r&&!e&&Bt(n,"has",o),!e&&Bt(n,"has",r),o===r?t.has(o):t.has(o)||t.has(r)}function Yi(o,e=!1){return o=o.__v_raw,!e&&Bt(Te(o),"iterate",Gn),Reflect.get(o,"size",o)}function Pu(o){o=Te(o);let e=Te(this);return Ui(e).has.call(e,o)||(e.add(o),Po(e,"add",o,o)),this}function Iu(o,e){e=Te(e);let t=Te(this),{has:n,get:r}=Ui(t),s=n.call(t,o);s||(o=Te(o),s=n.call(t,o));let i=r.call(t,o);return t.set(o,e),s?$n(e,i)&&Po(t,"set",o,e,i):Po(t,"add",o,e),this}function Fu(o){let e=Te(this),{has:t,get:n}=Ui(e),r=t.call(e,o);r||(o=Te(o),r=t.call(e,o));let s=n?n.call(e,o):void 0,i=e.delete(o);return r&&Po(e,"delete",o,void 0,s),i}function Ru(){let o=Te(this),e=o.size!==0,t=void 0,n=o.clear();return e&&Po(o,"clear",void 0,void 0,t),n}function Xi(o,e){return function(n,r){let s=this,i=s.__v_raw,a=Te(i),c=e?Nc:o?kc:qs;return!o&&Bt(a,"iterate",Gn),i.forEach((l,u)=>n.call(r,c(l),c(u),s))}}function Ki(o,e,t){return function(...n){let r=this.__v_raw,s=Te(r),i=hn(s),a=o==="entries"||o===Symbol.iterator&&i,c=o==="keys"&&i,l=r[o](...n),u=t?Nc:e?kc:qs;return!e&&Bt(s,"iterate",c?wc:Gn),{next(){let{value:p,done:f}=l.next();return f?{value:p,done:f}:{value:a?[u(p[0]),u(p[1])]:u(p),done:f}},[Symbol.iterator](){return this}}}}function vn(o){return function(...e){return o==="delete"?!1:this}}function Jv(){let o={get(s){return Gi(this,s)},get size(){return Yi(this)},has:Hi,add:Pu,set:Iu,delete:Fu,clear:Ru,forEach:Xi(!1,!1)},e={get(s){return Gi(this,s,!1,!0)},get size(){return Yi(this)},has:Hi,add:Pu,set:Iu,delete:Fu,clear:Ru,forEach:Xi(!1,!0)},t={get(s){return Gi(this,s,!0)},get size(){return Yi(this,!0)},has(s){return Hi.call(this,s,!0)},add:vn("add"),set:vn("set"),delete:vn("delete"),clear:vn("clear"),forEach:Xi(!0,!1)},n={get(s){return Gi(this,s,!0,!0)},get size(){return Yi(this,!0)},has(s){return Hi.call(this,s,!0)},add:vn("add"),set:vn("set"),delete:vn("delete"),clear:vn("clear"),forEach:Xi(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{o[s]=Ki(s,!1,!1),t[s]=Ki(s,!0,!1),e[s]=Ki(s,!1,!0),n[s]=Ki(s,!0,!0)}),[o,t,e,n]}var[ey,ty,oy,ny]=Jv();function Ec(o,e){let t=e?o?ny:oy:o?ty:ey;return(n,r,s)=>r==="__v_isReactive"?!o:r==="__v_isReadonly"?o:r==="__v_raw"?n:Reflect.get(Ne(t,r)&&r in n?t:n,r,s)}var ry={get:Ec(!1,!1)},sy={get:Ec(!1,!0)},iy={get:Ec(!0,!1)};var Vu=new WeakMap,qu=new WeakMap,Lu=new WeakMap,ay=new WeakMap;function cy(o){switch(o){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ly(o){return o.__v_skip||!Object.isExtensible(o)?0:cy(gc(o))}function Hn(o){return o&&o.__v_isReadonly?o:Cc(o,!1,Mu,ry,Vu)}function Ac(o){return Cc(o,!1,Zv,sy,qu)}function Fs(o){return Cc(o,!0,Qv,iy,Lu)}function Cc(o,e,t,n,r){if(!Xe(o)||o.__v_raw&&!(e&&o.__v_isReactive))return o;let s=r.get(o);if(s)return s;let i=ly(o);if(i===0)return o;let a=new Proxy(o,i===2?n:t);return r.set(o,a),a}function yn(o){return Rs(o)?yn(o.__v_raw):!!(o&&o.__v_isReactive)}function Rs(o){return!!(o&&o.__v_isReadonly)}function Qi(o){return yn(o)||Rs(o)}function Te(o){let e=o&&o.__v_raw;return e?Te(e):o}function Vs(o){return kr(o,"__v_skip",!0),o}var qs=o=>Xe(o)?Hn(o):o,kc=o=>Xe(o)?Fs(o):o;function Bu(o){Eu()&&(o=Te(o),o.dep||(o.dep=yc()),Au(o.dep))}function ju(o,e){o=Te(o),o.dep&&Tc(o.dep)}function st(o){return Boolean(o&&o.__v_isRef===!0)}function be(o){return uy(o,!1)}function uy(o,e){return st(o)?o:new Wu(o,e)}var Wu=class{constructor(e,t){this._shallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Te(e),this._value=t?e:qs(e)}get value(){return Bu(this),this._value}set value(e){e=this._shallow?e:Te(e),$n(e,this._rawValue)&&(this._rawValue=e,this._value=this._shallow?e:qs(e),ju(this,e))}};function Ls(o){return st(o)?o.value:o}var py={get:(o,e,t)=>Ls(Reflect.get(o,e,t)),set:(o,e,t,n)=>{let r=o[e];return st(r)&&!st(t)?(r.value=t,!0):Reflect.set(o,e,t,n)}};function Zi(o){return yn(o)?o:new Proxy(o,py)}function Ji(o){let e=me(o)?new Array(o.length):{};for(let t in o)e[t]=Dc(o,t);return e}var zu=class{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0}get value(){let e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}};function Dc(o,e,t){let n=o[e];return st(n)?n:new zu(o,e,t)}var $u=class{constructor(e,t,n){this._setter=t,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new Dr(e,()=>{this._dirty||(this._dirty=!0,ju(this))}),this.__v_isReadonly=n}get value(){let e=Te(this);return Bu(e),e._dirty&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}};function ft(o,e){let t,n,r=_e(o);return r?(t=o,n=Xt):(t=o.get,n=o.set),new $u(t,n,r||!n)}var fy,wS=Promise.resolve();fy="__v_isReadonly";var PS=new Set,IS=new Map;function hy(o,e,...t){let n=o.vnode.props||Pe,r=t,s=e.startsWith("update:"),i=s&&e.slice(7);if(i&&i in n){let u=`${i==="modelValue"?"model":i}Modifiers`,{number:p,trim:f}=n[u]||Pe;f?r=t.map(d=>d.trim()):p&&(r=t.map(ji))}let a,c=n[a=Ds(e)]||n[a=Ds(Do(e))];!c&&s&&(c=n[a=Ds(mn(e))]),c&&Jt(c,o,6,r);let l=n[a+"Once"];if(l){if(!o.emitted)o.emitted={};else if(o.emitted[a])return;o.emitted[a]=!0,Jt(l,o,6,r)}}function Hu(o,e,t=!1){let n=e.emitsCache,r=n.get(o);if(r!==void 0)return r;let s=o.emits,i={},a=!1;if(!_e(o)){let c=l=>{let u=Hu(l,e,!0);u&&(a=!0,ut(i,u))};!t&&e.mixins.length&&e.mixins.forEach(c),o.extends&&c(o.extends),o.mixins&&o.mixins.forEach(c)}return!s&&!a?(n.set(o,null),null):(me(s)?s.forEach(c=>i[c]=null):ut(i,s),n.set(o,i),i)}function Mc(o,e){return!o||!Cr(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ne(o,e[0].toLowerCase()+e.slice(1))||Ne(o,mn(e))||Ne(o,e))}var _o=null,ea=null;function ta(o){let e=_o;return _o=o,ea=o&&o.type.__scopeId||null,e}function Kt(o){ea=o}function Qt(){ea=null}function Bs(o,e=_o,t){if(!e||o._n)return o;let n=(...r)=>{n._d&&gp(-1);let s=ta(e),i=o(...r);return ta(s),n._d&&gp(1),i};return n._n=!0,n._c=!0,n._d=!0,n}function Pc(o){let{type:e,vnode:t,proxy:n,withProxy:r,props:s,propsOptions:[i],slots:a,attrs:c,emit:l,render:u,renderCache:p,data:f,setupState:d,ctx:h,inheritAttrs:m}=o,g,x,T=ta(o);try{if(t.shapeFlag&4){let w=r||n;g=Fo(u.call(w,w,p,s,d,f,h)),x=c}else{let w=e;g=Fo(w.length>1?w(s,{attrs:c,slots:a,emit:l}):w(s,null)),x=e.props?c:my(c)}}catch(w){Ws.length=0,va(w,o,1),g=Ie(yo)}let D=g,C;if(x&&m!==!1){let w=Object.keys(x),{shapeFlag:N}=D;w.length&&N&(1|6)&&(i&&w.some(As)&&(x=gy(x,i)),D=Pr(D,x))}return t.dirs&&(D.dirs=D.dirs?D.dirs.concat(t.dirs):t.dirs),t.transition&&(D.transition=t.transition),g=D,ta(T),g}var my=o=>{let e;for(let t in o)(t==="class"||t==="style"||Cr(t))&&((e||(e={}))[t]=o[t]);return e},gy=(o,e)=>{let t={};for(let n in o)(!As(n)||!(n.slice(9)in e))&&(t[n]=o[n]);return t};function _y(o,e,t){let{props:n,children:r,component:s}=o,{props:i,children:a,patchFlag:c}=e,l=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&c>=0){if(c&1024)return!0;if(c&16)return n?Yu(n,i,l):!!i;if(c&8){let u=e.dynamicProps;for(let p=0;p<u.length;p++){let f=u[p];if(i[f]!==n[f]&&!Mc(l,f))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:n===i?!1:n?i?Yu(n,i,l):!0:!!i;return!1}function Yu(o,e,t){let n=Object.keys(e);if(n.length!==Object.keys(o).length)return!0;for(let r=0;r<n.length;r++){let s=n[r];if(e[s]!==o[s]&&!Mc(t,s))return!0}return!1}function vy({vnode:o,parent:e},t){for(;e&&e.subTree===o;)(o=e.vnode).el=t,e=e.parent}var yy=o=>o.__isSuspense;function xy(o,e){e&&e.pendingBranch?me(o)?e.effects.push(...o):e.effects.push(o):_x(o)}function by(o,e){if(St){let t=St.provides,n=St.parent&&St.parent.provides;n===t&&(t=St.provides=Object.create(n)),t[o]=e}}function oa(o,e,t=!1){let n=St||_o;if(n){let r=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(r&&o in r)return r[o];if(arguments.length>1)return t&&_e(e)?e.call(n.proxy):e}}function Xu(){let o={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return js(()=>{o.isMounted=!0}),vo(()=>{o.isUnmounting=!0}),o}var no=[Function,Array],wy={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:no,onEnter:no,onAfterEnter:no,onEnterCancelled:no,onBeforeLeave:no,onLeave:no,onAfterLeave:no,onLeaveCancelled:no,onBeforeAppear:no,onAppear:no,onAfterAppear:no,onAppearCancelled:no},setup(o,{slots:e}){let t=ga(),n=Xu(),r;return()=>{let s=e.default&&Rc(e.default(),!0);if(!s||!s.length)return;let i=Te(o),{mode:a}=i,c=s[0];if(n.isLeaving)return Fc(c);let l=Qu(c);if(!l)return Fc(c);let u=na(l,i,n,t);ra(l,u);let p=t.subTree,f=p&&Qu(p),d=!1,{getTransitionKey:h}=l.type;if(h){let m=h();r===void 0?r=m:m!==r&&(r=m,d=!0)}if(f&&f.type!==yo&&(!Zn(l,f)||d)){let m=na(f,i,n,t);if(ra(f,m),a==="out-in")return n.isLeaving=!0,m.afterLeave=()=>{n.isLeaving=!1,t.update()},Fc(c);a==="in-out"&&l.type!==yo&&(m.delayLeave=(g,x,T)=>{let D=Ku(n,f);D[String(f.key)]=f,g._leaveCb=()=>{x(),g._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=T})}return c}}},Ic=wy;function Ku(o,e){let{leavingVNodes:t}=o,n=t.get(e.type);return n||(n=Object.create(null),t.set(e.type,n)),n}function na(o,e,t,n){let{appear:r,mode:s,persisted:i=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:l,onEnterCancelled:u,onBeforeLeave:p,onLeave:f,onAfterLeave:d,onLeaveCancelled:h,onBeforeAppear:m,onAppear:g,onAfterAppear:x,onAppearCancelled:T}=e,D=String(o.key),C=Ku(t,o),w=(b,O)=>{b&&Jt(b,n,9,O)},N={mode:s,persisted:i,beforeEnter(b){let O=a;if(!t.isMounted)if(r)O=m||a;else return;b._leaveCb&&b._leaveCb(!0);let L=C[D];L&&Zn(o,L)&&L.el._leaveCb&&L.el._leaveCb(),w(O,[b])},enter(b){let O=c,L=l,Y=u;if(!t.isMounted)if(r)O=g||c,L=x||l,Y=T||u;else return;let R=!1,E=b._enterCb=H=>{R||(R=!0,H?w(Y,[b]):w(L,[b]),N.delayedLeave&&N.delayedLeave(),b._enterCb=void 0)};O?(O(b,E),O.length<=1&&E()):E()},leave(b,O){let L=String(o.key);if(b._enterCb&&b._enterCb(!0),t.isUnmounting)return O();w(p,[b]);let Y=!1,R=b._leaveCb=E=>{Y||(Y=!0,O(),E?w(h,[b]):w(d,[b]),b._leaveCb=void 0,C[L]===o&&delete C[L])};C[L]=o,f?(f(b,R),f.length<=1&&R()):R()},clone(b){return na(b,e,t,n)}};return N}function Fc(o){if(sa(o))return o=Pr(o),o.children=null,o}function Qu(o){return sa(o)?o.children?o.children[0]:void 0:o}function ra(o,e){o.shapeFlag&6&&o.component?ra(o.component.subTree,e):o.shapeFlag&128?(o.ssContent.transition=e.clone(o.ssContent),o.ssFallback.transition=e.clone(o.ssFallback)):o.transition=e}function Rc(o,e=!1){let t=[],n=0;for(let r=0;r<o.length;r++){let s=o[r];s.type===Pt?(s.patchFlag&128&&n++,t=t.concat(Rc(s.children,e))):(e||s.type!==yo)&&t.push(s)}if(n>1)for(let r=0;r<t.length;r++)t[r].patchFlag=-2;return t}function We(o){return _e(o)?{setup:o,name:o.name}:o}var Vc=o=>!!o.type.__asyncLoader;var sa=o=>o.type.__isKeepAlive;function Sy(o,e){Zu(o,"a",e)}function Ty(o,e){Zu(o,"da",e)}function Zu(o,e,t=St){let n=o.__wdc||(o.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return o()});if(ia(e,n,t),t){let r=t.parent;for(;r&&r.parent;)sa(r.parent.vnode)&&Oy(n,e,t,r),r=r.parent}}function Oy(o,e,t,n){let r=ia(e,o,n,!0);aa(()=>{Fi(n[e],r)},t)}function ia(o,e,t=St,n=!1){if(t){let r=t[o]||(t[o]=[]),s=e.__weh||(e.__weh=(...i)=>{if(t.isUnmounted)return;_n(),Ir(t);let a=Jt(e,t,o,i);return er(),Xo(),a});return n?r.unshift(s):r.push(s),s}}var Ko=o=>(e,t=St)=>(!_a||o==="sp")&&ia(o,e,t),Ny=Ko("bm"),js=Ko("m"),Ju=Ko("bu"),qc=Ko("u"),vo=Ko("bum"),aa=Ko("um"),Ey=Ko("sp"),Ay=Ko("rtg"),Cy=Ko("rtc");function ky(o,e=St){ia("ec",o,e)}var Lc=!0;function Dy(o){let e=op(o),t=o.proxy,n=o.ctx;Lc=!1,e.beforeCreate&&ep(e.beforeCreate,o,"bc");let{data:r,computed:s,methods:i,watch:a,provide:c,inject:l,created:u,beforeMount:p,mounted:f,beforeUpdate:d,updated:h,activated:m,deactivated:g,beforeDestroy:x,beforeUnmount:T,destroyed:D,unmounted:C,render:w,renderTracked:N,renderTriggered:b,errorCaptured:O,serverPrefetch:L,expose:Y,inheritAttrs:R,components:E,directives:H,filters:F}=e;if(l&&My(l,n,null,o.appContext.config.unwrapInjectedRef),i)for(let X in i){let B=i[X];_e(B)&&(n[X]=B.bind(t))}if(r){let X=r.call(t,t);Xe(X)&&(o.data=Hn(X))}if(Lc=!0,s)for(let X in s){let B=s[X],M=_e(B)?B.bind(t,t):_e(B.get)?B.get.bind(t,t):Xt,U=!_e(B)&&_e(B.set)?B.set.bind(t):Xt,V=ft({get:M,set:U});Object.defineProperty(n,X,{enumerable:!0,configurable:!0,get:()=>V.value,set:J=>V.value=J})}if(a)for(let X in a)tp(a[X],n,t,X);if(c){let X=_e(c)?c.call(t):c;Reflect.ownKeys(X).forEach(B=>{by(B,X[B])})}u&&ep(u,o,"c");function $(X,B){me(B)?B.forEach(M=>X(M.bind(t))):B&&X(B.bind(t))}if($(Ny,p),$(js,f),$(Ju,d),$(qc,h),$(Sy,m),$(Ty,g),$(ky,O),$(Cy,N),$(Ay,b),$(vo,T),$(aa,C),$(Ey,L),me(Y))if(Y.length){let X=o.exposed||(o.exposed={});Y.forEach(B=>{Object.defineProperty(X,B,{get:()=>t[B],set:M=>t[B]=M})})}else o.exposed||(o.exposed={});w&&o.render===Xt&&(o.render=w),R!=null&&(o.inheritAttrs=R),E&&(o.components=E),H&&(o.directives=H)}function My(o,e,t=Xt,n=!1){me(o)&&(o=Bc(o));for(let r in o){let s=o[r],i;Xe(s)?"default"in s?i=oa(s.from||r,s.default,!0):i=oa(s.from||r):i=oa(s),st(i)&&n?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):e[r]=i}}function ep(o,e,t){Jt(me(o)?o.map(n=>n.bind(e.proxy)):o.bind(e.proxy),e,t)}function tp(o,e,t,n){let r=n.includes(".")?Vp(t,n):()=>t[n];if(pt(o)){let s=e[o];_e(s)&&Ge(r,s)}else if(_e(o))Ge(r,o.bind(t));else if(Xe(o))if(me(o))o.forEach(s=>tp(s,e,t,n));else{let s=_e(o.handler)?o.handler.bind(t):e[o.handler];_e(s)&&Ge(r,s,o)}}function op(o){let e=o.type,{mixins:t,extends:n}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:i}}=o.appContext,a=s.get(e),c;return a?c=a:!r.length&&!t&&!n?c=e:(c={},r.length&&r.forEach(l=>ca(c,l,i,!0)),ca(c,e,i)),s.set(e,c),c}function ca(o,e,t,n=!1){let{mixins:r,extends:s}=e;s&&ca(o,s,t,!0),r&&r.forEach(i=>ca(o,i,t,!0));for(let i in e)if(!(n&&i==="expose")){let a=Py[i]||t&&t[i];o[i]=a?a(o[i],e[i]):e[i]}return o}var Py={data:np,props:Yn,emits:Yn,methods:Yn,computed:Yn,beforeCreate:Mt,created:Mt,beforeMount:Mt,mounted:Mt,beforeUpdate:Mt,updated:Mt,beforeDestroy:Mt,beforeUnmount:Mt,destroyed:Mt,unmounted:Mt,activated:Mt,deactivated:Mt,errorCaptured:Mt,serverPrefetch:Mt,components:Yn,directives:Yn,watch:Fy,provide:np,inject:Iy};function np(o,e){return e?o?function(){return ut(_e(o)?o.call(this,this):o,_e(e)?e.call(this,this):e)}:e:o}function Iy(o,e){return Yn(Bc(o),Bc(e))}function Bc(o){if(me(o)){let e={};for(let t=0;t<o.length;t++)e[o[t]]=o[t];return e}return o}function Mt(o,e){return o?[...new Set([].concat(o,e))]:e}function Yn(o,e){return o?ut(ut(Object.create(null),o),e):e}function Fy(o,e){if(!o)return e;if(!e)return o;let t=ut(Object.create(null),o);for(let n in e)t[n]=Mt(o[n],e[n]);return t}function Ry(o,e,t,n=!1){let r={},s={};kr(s,fa,1),o.propsDefaults=Object.create(null),rp(o,e,r,s);for(let i in o.propsOptions[0])i in r||(r[i]=void 0);t?o.props=n?r:Ac(r):o.type.props?o.props=r:o.props=s,o.attrs=s}function Vy(o,e,t,n){let{props:r,attrs:s,vnode:{patchFlag:i}}=o,a=Te(r),[c]=o.propsOptions,l=!1;if((n||i>0)&&!(i&16)){if(i&8){let u=o.vnode.dynamicProps;for(let p=0;p<u.length;p++){let f=u[p],d=e[f];if(c)if(Ne(s,f))d!==s[f]&&(s[f]=d,l=!0);else{let h=Do(f);r[h]=jc(c,a,h,d,o,!1)}else d!==s[f]&&(s[f]=d,l=!0)}}}else{rp(o,e,r,s)&&(l=!0);let u;for(let p in a)(!e||!Ne(e,p)&&((u=mn(p))===p||!Ne(e,u)))&&(c?t&&(t[p]!==void 0||t[u]!==void 0)&&(r[p]=jc(c,a,p,void 0,o,!0)):delete r[p]);if(s!==a)for(let p in s)(!e||!Ne(e,p))&&(delete s[p],l=!0)}l&&Po(o,"set","$attrs")}function rp(o,e,t,n){let[r,s]=o.propsOptions,i=!1,a;if(e)for(let c in e){if(Cs(c))continue;let l=e[c],u;r&&Ne(r,u=Do(c))?!s||!s.includes(u)?t[u]=l:(a||(a={}))[u]=l:Mc(o.emitsOptions,c)||(!(c in n)||l!==n[c])&&(n[c]=l,i=!0)}if(s){let c=Te(t),l=a||Pe;for(let u=0;u<s.length;u++){let p=s[u];t[p]=jc(r,c,p,l[p],o,!Ne(l,p))}}return i}function jc(o,e,t,n,r,s){let i=o[t];if(i!=null){let a=Ne(i,"default");if(a&&n===void 0){let c=i.default;if(i.type!==Function&&_e(c)){let{propsDefaults:l}=r;t in l?n=l[t]:(Ir(r),n=l[t]=c.call(null,e),er())}else n=c}i[0]&&(s&&!a?n=!1:i[1]&&(n===""||n===mn(t))&&(n=!0))}return n}function sp(o,e,t=!1){let n=e.propsCache,r=n.get(o);if(r)return r;let s=o.props,i={},a=[],c=!1;if(!_e(o)){let u=p=>{c=!0;let[f,d]=sp(p,e,!0);ut(i,f),d&&a.push(...d)};!t&&e.mixins.length&&e.mixins.forEach(u),o.extends&&u(o.extends),o.mixins&&o.mixins.forEach(u)}if(!s&&!c)return n.set(o,zn),zn;if(me(s))for(let u=0;u<s.length;u++){let p=Do(s[u]);ip(p)&&(i[p]=Pe)}else if(s)for(let u in s){let p=Do(u);if(ip(p)){let f=s[u],d=i[p]=me(f)||_e(f)?{type:f}:f;if(d){let h=lp(Boolean,d.type),m=lp(String,d.type);d[0]=h>-1,d[1]=m<0||h<m,(h>-1||Ne(d,"default"))&&a.push(p)}}}let l=[i,a];return n.set(o,l),l}function ip(o){return o[0]!=="$"}function ap(o){let e=o&&o.toString().match(/^\s*function (\w+)/);return e?e[1]:o===null?"null":""}function cp(o,e){return ap(o)===ap(e)}function lp(o,e){return me(e)?e.findIndex(t=>cp(t,o)):_e(e)&&cp(e,o)?0:-1}var up=o=>o[0]==="_"||o==="$stable",Wc=o=>me(o)?o.map(Fo):[Fo(o)],qy=(o,e,t)=>{let n=Bs((...r)=>Wc(e(...r)),t);return n._c=!1,n},pp=(o,e,t)=>{let n=o._ctx;for(let r in o){if(up(r))continue;let s=o[r];if(_e(s))e[r]=qy(r,s,n);else if(s!=null){let i=Wc(s);e[r]=()=>i}}},fp=(o,e)=>{let t=Wc(e);o.slots.default=()=>t},Ly=(o,e)=>{if(o.vnode.shapeFlag&32){let t=e._;t?(o.slots=Te(e),kr(e,"_",t)):pp(e,o.slots={})}else o.slots={},e&&fp(o,e);kr(o.slots,fa,1)},By=(o,e,t)=>{let{vnode:n,slots:r}=o,s=!0,i=Pe;if(n.shapeFlag&32){let a=e._;a?t&&a===1?s=!1:(ut(r,e),!t&&a===1&&delete r._):(s=!e.$stable,pp(e,r)),i=e}else e&&(fp(o,e),i={default:1});if(s)for(let a in r)!up(a)&&!(a in i)&&delete r[a]};function Xn(o,e,t,n){let r=o.dirs,s=e&&e.dirs;for(let i=0;i<r.length;i++){let a=r[i];s&&(a.oldValue=s[i].value);let c=a.dir[n];c&&(_n(),Jt(c,t,8,[o.el,a,o,e]),Xo())}}function dp(){return{app:null,config:{isNativeTag:xu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}var jy=0;function Wy(o,e){return function(n,r=null){r!=null&&!Xe(r)&&(r=null);let s=dp(),i=new Set,a=!1,c=s.app={_uid:jy++,_component:n,_props:r,_container:null,_context:s,_instance:null,version:yx,get config(){return s.config},set config(l){},use(l,...u){return i.has(l)||(l&&_e(l.install)?(i.add(l),l.install(c,...u)):_e(l)&&(i.add(l),l(c,...u))),c},mixin(l){return s.mixins.includes(l)||s.mixins.push(l),c},component(l,u){return u?(s.components[l]=u,c):s.components[l]},directive(l,u){return u?(s.directives[l]=u,c):s.directives[l]},mount(l,u,p){if(!a){let f=Ie(n,r);return f.appContext=s,u&&e?e(f,l):o(f,l,p),a=!0,c._container=l,l.__vue_app__=c,Hc(f.component)||f.component.proxy}},unmount(){a&&(o(null,c._container),delete c._container.__vue_app__)},provide(l,u){return s.provides[l]=u,c}};return c}}function zc(o,e,t,n,r=!1){if(me(o)){o.forEach((f,d)=>zc(f,e&&(me(e)?e[d]:e),t,n,r));return}if(Vc(n)&&!r)return;let s=n.shapeFlag&4?Hc(n.component)||n.component.proxy:n.el,i=r?null:s,{i:a,r:c}=o,l=e&&e.r,u=a.refs===Pe?a.refs={}:a.refs,p=a.setupState;if(l!=null&&l!==c&&(pt(l)?(u[l]=null,Ne(p,l)&&(p[l]=null)):st(l)&&(l.value=null)),_e(c))Qo(c,a,12,[i,u]);else{let f=pt(c),d=st(c);if(f||d){let h=()=>{if(o.f){let m=f?u[c]:c.value;r?me(m)&&Fi(m,s):me(m)?m.includes(s)||m.push(s):f?u[c]=[s]:(c.value=[s],o.k&&(u[o.k]=c.value))}else f?(u[c]=i,Ne(p,c)&&(p[c]=i)):st(c)&&(c.value=i,o.k&&(u[o.k]=i))};i?(h.id=-1,jt(h,t)):h()}}}function zy(){let o=[]}var jt=xy;function hp(o){return $y(o)}function $y(o,e){zy();let t=Su();t.__VUE__=!0;let{insert:n,remove:r,patchProp:s,createElement:i,createText:a,createComment:c,setText:l,setElementText:u,parentNode:p,nextSibling:f,setScopeId:d=Xt,cloneNode:h,insertStaticContent:m}=o,g=(v,_,S,P=null,k=null,I=null,z=!1,W=null,G=!!_.dynamicChildren)=>{if(v===_)return;v&&!Zn(v,_)&&(P=Lt(v),de(v,k,I,!0),v=null),_.patchFlag===-2&&(G=!1,_.dynamicChildren=null);let{type:j,ref:ae,shapeFlag:re}=_;switch(j){case $c:x(v,_,S,P);break;case yo:T(v,_,S,P);break;case la:v==null&&D(_,S,P,z);break;case Pt:F(v,_,S,P,k,I,z,W,G);break;default:re&1?b(v,_,S,P,k,I,z,W,G):re&6?ee(v,_,S,P,k,I,z,W,G):(re&64||re&128)&&j.process(v,_,S,P,k,I,z,W,G,rt)}ae!=null&&k&&zc(ae,v&&v.ref,I,_||v,!_)},x=(v,_,S,P)=>{if(v==null)n(_.el=a(_.children),S,P);else{let k=_.el=v.el;_.children!==v.children&&l(k,_.children)}},T=(v,_,S,P)=>{v==null?n(_.el=c(_.children||""),S,P):_.el=v.el},D=(v,_,S,P)=>{[v.el,v.anchor]=m(v.children,_,S,P)},C=(v,_,S,P)=>{if(_.children!==v.children){let k=f(v.anchor);N(v),[_.el,_.anchor]=m(_.children,S,k,P)}else _.el=v.el,_.anchor=v.anchor},w=({el:v,anchor:_},S,P)=>{let k;for(;v&&v!==_;)k=f(v),n(v,S,P),v=k;n(_,S,P)},N=({el:v,anchor:_})=>{let S;for(;v&&v!==_;)S=f(v),r(v),v=S;r(_)},b=(v,_,S,P,k,I,z,W,G)=>{z=z||_.type==="svg",v==null?O(_,S,P,k,I,z,W,G):R(v,_,k,I,z,W,G)},O=(v,_,S,P,k,I,z,W)=>{let G,j,{type:ae,props:re,shapeFlag:le,transition:ge,patchFlag:Ee,dirs:$e}=v;if(v.el&&h!==void 0&&Ee===-1)G=v.el=h(v.el);else{if(G=v.el=i(v.type,I,re&&re.is,re),le&8?u(G,v.children):le&16&&Y(v.children,G,null,P,k,I&&ae!=="foreignObject",z,W),$e&&Xn(v,null,P,"created"),re){for(let je in re)je!=="value"&&!Cs(je)&&s(G,je,null,re[je],I,v.children,P,k,nt);"value"in re&&s(G,"value",null,re.value),(j=re.onVnodeBeforeMount)&&Ro(j,P,v)}L(G,v,v.scopeId,z,P)}$e&&Xn(v,null,P,"beforeMount");let Ve=(!k||k&&!k.pendingBranch)&&ge&&!ge.persisted;Ve&&ge.beforeEnter(G),n(G,_,S),((j=re&&re.onVnodeMounted)||Ve||$e)&&jt(()=>{j&&Ro(j,P,v),Ve&&ge.enter(G),$e&&Xn(v,null,P,"mounted")},k)},L=(v,_,S,P,k)=>{if(S&&d(v,S),P)for(let I=0;I<P.length;I++)d(v,P[I]);if(k){let I=k.subTree;if(_===I){let z=k.vnode;L(v,z,z.scopeId,z.slotScopeIds,k.parent)}}},Y=(v,_,S,P,k,I,z,W,G=0)=>{for(let j=G;j<v.length;j++){let ae=v[j]=W?bn(v[j]):Fo(v[j]);g(null,ae,_,S,P,k,I,z,W)}},R=(v,_,S,P,k,I,z)=>{let W=_.el=v.el,{patchFlag:G,dynamicChildren:j,dirs:ae}=_;G|=v.patchFlag&16;let re=v.props||Pe,le=_.props||Pe,ge;S&&Kn(S,!1),(ge=le.onVnodeBeforeUpdate)&&Ro(ge,S,_,v),ae&&Xn(_,v,S,"beforeUpdate"),S&&Kn(S,!0);let Ee=k&&_.type!=="foreignObject";if(j?E(v.dynamicChildren,j,W,S,P,Ee,I):z||U(v,_,W,null,S,P,Ee,I,!1),G>0){if(G&16)H(W,_,re,le,S,P,k);else if(G&2&&re.class!==le.class&&s(W,"class",null,le.class,k),G&4&&s(W,"style",re.style,le.style,k),G&8){let $e=_.dynamicProps;for(let Ve=0;Ve<$e.length;Ve++){let je=$e[Ve],mo=re[je],Er=le[je];(Er!==mo||je==="value")&&s(W,je,mo,Er,k,v.children,S,P,nt)}}G&1&&v.children!==_.children&&u(W,_.children)}else!z&&j==null&&H(W,_,re,le,S,P,k);((ge=le.onVnodeUpdated)||ae)&&jt(()=>{ge&&Ro(ge,S,_,v),ae&&Xn(_,v,S,"updated")},P)},E=(v,_,S,P,k,I,z)=>{for(let W=0;W<_.length;W++){let G=v[W],j=_[W],ae=G.el&&(G.type===Pt||!Zn(G,j)||G.shapeFlag&(6|64))?p(G.el):S;g(G,j,ae,null,P,k,I,z,!0)}},H=(v,_,S,P,k,I,z)=>{if(S!==P){for(let W in P){if(Cs(W))continue;let G=P[W],j=S[W];G!==j&&W!=="value"&&s(v,W,j,G,z,_.children,k,I,nt)}if(S!==Pe)for(let W in S)!Cs(W)&&!(W in P)&&s(v,W,S[W],null,z,_.children,k,I,nt);"value"in P&&s(v,"value",S.value,P.value)}},F=(v,_,S,P,k,I,z,W,G)=>{let j=_.el=v?v.el:a(""),ae=_.anchor=v?v.anchor:a(""),{patchFlag:re,dynamicChildren:le,slotScopeIds:ge}=_;ge&&(W=W?W.concat(ge):ge),v==null?(n(j,S,P),n(ae,S,P),Y(_.children,S,ae,k,I,z,W,G)):re>0&&re&64&&le&&v.dynamicChildren?(E(v.dynamicChildren,le,S,k,I,z,W),(_.key!=null||k&&_===k.subTree)&&mp(v,_,!0)):U(v,_,S,ae,k,I,z,W,G)},ee=(v,_,S,P,k,I,z,W,G)=>{_.slotScopeIds=W,v==null?_.shapeFlag&512?k.ctx.activate(_,S,P,z,G):$(_,S,P,k,I,z,G):X(v,_,G)},$=(v,_,S,P,k,I,z)=>{let W=v.component=ex(v,P,k);if(sa(v)&&(W.ctx.renderer=rt),tx(W),W.asyncDep){if(k&&k.registerDep(W,B),!v.el){let G=W.subTree=Ie(yo);T(null,G,_,S)}return}B(W,v,_,S,k,I,z)},X=(v,_,S)=>{let P=_.component=v.component;if(_y(v,_,S))if(P.asyncDep&&!P.asyncResolved){M(P,_,S);return}else P.next=_,mx(P.update),P.update();else _.component=v.component,_.el=v.el,P.vnode=_},B=(v,_,S,P,k,I,z)=>{let W=()=>{if(v.isMounted){let{next:ae,bu:re,u:le,parent:ge,vnode:Ee}=v,$e=ae,Ve;Kn(v,!1),ae?(ae.el=Ee.el,M(v,ae,z)):ae=Ee,re&&Ms(re),(Ve=ae.props&&ae.props.onVnodeBeforeUpdate)&&Ro(Ve,ge,ae,Ee),Kn(v,!0);let je=Pc(v),mo=v.subTree;v.subTree=je,g(mo,je,p(mo.el),Lt(mo),v,k,I),ae.el=je.el,$e===null&&vy(v,je.el),le&&jt(le,k),(Ve=ae.props&&ae.props.onVnodeUpdated)&&jt(()=>Ro(Ve,ge,ae,Ee),k)}else{let ae,{el:re,props:le}=_,{bm:ge,m:Ee,parent:$e}=v,Ve=Vc(_);if(Kn(v,!1),ge&&Ms(ge),!Ve&&(ae=le&&le.onVnodeBeforeMount)&&Ro(ae,$e,_),Kn(v,!0),re&&yt){let je=()=>{v.subTree=Pc(v),yt(re,v.subTree,v,k,null)};Ve?_.type.__asyncLoader().then(()=>!v.isUnmounted&&je()):je()}else{let je=v.subTree=Pc(v);g(null,je,S,P,v,k,I),_.el=je.el}if(Ee&&jt(Ee,k),!Ve&&(ae=le&&le.onVnodeMounted)){let je=_;jt(()=>Ro(ae,$e,je),k)}_.shapeFlag&256&&v.a&&jt(v.a,k),v.isMounted=!0,_=S=P=null}},G=v.effect=new Dr(W,()=>kp(v.update),v.scope),j=v.update=G.run.bind(G);j.id=v.uid,Kn(v,!0),j()},M=(v,_,S)=>{_.component=v;let P=v.vnode.props;v.vnode=_,v.next=null,Vy(v,_.props,P,S),By(v,_.children,S),_n(),Zc(void 0,v.update),Xo()},U=(v,_,S,P,k,I,z,W,G=!1)=>{let j=v&&v.children,ae=v?v.shapeFlag:0,re=_.children,{patchFlag:le,shapeFlag:ge}=_;if(le>0){if(le&128){J(j,re,S,P,k,I,z,W,G);return}else if(le&256){V(j,re,S,P,k,I,z,W,G);return}}ge&8?(ae&16&&nt(j,k,I),re!==j&&u(S,re)):ae&16?ge&16?J(j,re,S,P,k,I,z,W,G):nt(j,k,I,!0):(ae&8&&u(S,""),ge&16&&Y(re,S,P,k,I,z,W,G))},V=(v,_,S,P,k,I,z,W,G)=>{v=v||zn,_=_||zn;let j=v.length,ae=_.length,re=Math.min(j,ae),le;for(le=0;le<re;le++){let ge=_[le]=G?bn(_[le]):Fo(_[le]);g(v[le],ge,S,null,k,I,z,W,G)}j>ae?nt(v,k,I,!0,!1,re):Y(_,S,P,k,I,z,W,G,re)},J=(v,_,S,P,k,I,z,W,G)=>{let j=0,ae=_.length,re=v.length-1,le=ae-1;for(;j<=re&&j<=le;){let ge=v[j],Ee=_[j]=G?bn(_[j]):Fo(_[j]);if(Zn(ge,Ee))g(ge,Ee,S,null,k,I,z,W,G);else break;j++}for(;j<=re&&j<=le;){let ge=v[re],Ee=_[le]=G?bn(_[le]):Fo(_[le]);if(Zn(ge,Ee))g(ge,Ee,S,null,k,I,z,W,G);else break;re--,le--}if(j>re){if(j<=le){let ge=le+1,Ee=ge<ae?_[ge].el:P;for(;j<=le;)g(null,_[j]=G?bn(_[j]):Fo(_[j]),S,Ee,k,I,z,W,G),j++}}else if(j>le)for(;j<=re;)de(v[j],k,I,!0),j++;else{let ge=j,Ee=j,$e=new Map;for(j=Ee;j<=le;j++){let Yt=_[j]=G?bn(_[j]):Fo(_[j]);Yt.key!=null&&$e.set(Yt.key,j)}let Ve,je=0,mo=le-Ee+1,Er=!1,pu=0,Ns=new Array(mo);for(j=0;j<mo;j++)Ns[j]=0;for(j=ge;j<=re;j++){let Yt=v[j];if(je>=mo){de(Yt,k,I,!0);continue}let ko;if(Yt.key!=null)ko=$e.get(Yt.key);else for(Ve=Ee;Ve<=le;Ve++)if(Ns[Ve-Ee]===0&&Zn(Yt,_[Ve])){ko=Ve;break}ko===void 0?de(Yt,k,I,!0):(Ns[ko-Ee]=j+1,ko>=pu?pu=ko:Er=!0,g(Yt,_[ko],S,null,k,I,z,W,G),je++)}let fu=Er?Uy(Ns):zn;for(Ve=fu.length-1,j=mo-1;j>=0;j--){let Yt=Ee+j,ko=_[Yt],du=Yt+1<ae?_[Yt+1].el:P;Ns[j]===0?g(null,ko,S,du,k,I,z,W,G):Er&&(Ve<0||j!==fu[Ve]?Z(ko,S,du,2):Ve--)}}},Z=(v,_,S,P,k=null)=>{let{el:I,type:z,transition:W,children:G,shapeFlag:j}=v;if(j&6){Z(v.component.subTree,_,S,P);return}if(j&128){v.suspense.move(_,S,P);return}if(j&64){z.move(v,_,S,rt);return}if(z===Pt){n(I,_,S);for(let re=0;re<G.length;re++)Z(G[re],_,S,P);n(v.anchor,_,S);return}if(z===la){w(v,_,S);return}if(P!==2&&j&1&&W)if(P===0)W.beforeEnter(I),n(I,_,S),jt(()=>W.enter(I),k);else{let{leave:re,delayLeave:le,afterLeave:ge}=W,Ee=()=>n(I,_,S),$e=()=>{re(I,()=>{Ee(),ge&&ge()})};le?le(I,Ee,$e):$e()}else n(I,_,S)},de=(v,_,S,P=!1,k=!1)=>{let{type:I,props:z,ref:W,children:G,dynamicChildren:j,shapeFlag:ae,patchFlag:re,dirs:le}=v;if(W!=null&&zc(W,null,S,v,!0),ae&256){_.ctx.deactivate(v);return}let ge=ae&1&&le,Ee=!Vc(v),$e;if(Ee&&($e=z&&z.onVnodeBeforeUnmount)&&Ro($e,_,v),ae&6)pe(v.component,S,P);else{if(ae&128){v.suspense.unmount(S,P);return}ge&&Xn(v,null,_,"beforeUnmount"),ae&64?v.type.remove(v,_,S,k,rt,P):j&&(I!==Pt||re>0&&re&64)?nt(j,_,S,!1,!0):(I===Pt&&re&(128|256)||!k&&ae&16)&&nt(G,_,S),P&&ce(v)}(Ee&&($e=z&&z.onVnodeUnmounted)||ge)&&jt(()=>{$e&&Ro($e,_,v),ge&&Xn(v,null,_,"unmounted")},S)},ce=v=>{let{type:_,el:S,anchor:P,transition:k}=v;if(_===Pt){Se(S,P);return}if(_===la){N(v);return}let I=()=>{r(S),k&&!k.persisted&&k.afterLeave&&k.afterLeave()};if(v.shapeFlag&1&&k&&!k.persisted){let{leave:z,delayLeave:W}=k,G=()=>z(S,I);W?W(v.el,I,G):G()}else I()},Se=(v,_)=>{let S;for(;v!==_;)S=f(v),r(v),v=S;r(_)},pe=(v,_,S)=>{let{bum:P,scope:k,update:I,subTree:z,um:W}=v;P&&Ms(P),k.stop(),I&&(I.active=!1,de(z,v,_,S)),W&&jt(W,_),jt(()=>{v.isUnmounted=!0},_),_&&_.pendingBranch&&!_.isUnmounted&&v.asyncDep&&!v.asyncResolved&&v.suspenseId===_.pendingId&&(_.deps--,_.deps===0&&_.resolve())},nt=(v,_,S,P=!1,k=!1,I=0)=>{for(let z=I;z<v.length;z++)de(v[z],_,S,P,k)},Lt=v=>v.shapeFlag&6?Lt(v.component.subTree):v.shapeFlag&128?v.suspense.next():f(v.anchor||v.el),oe=(v,_,S)=>{v==null?_._vnode&&de(_._vnode,null,null,!0):g(_._vnode||null,v,_,null,null,null,S),Pp(),_._vnode=v},rt={p:g,um:de,m:Z,r:ce,mt:$,mc:Y,pc:U,pbc:E,n:Lt,o},Dt,yt;return e&&([Dt,yt]=e(rt)),{render:oe,hydrate:Dt,createApp:Wy(oe,Dt)}}function Kn({effect:o,update:e},t){o.allowRecurse=e.allowRecurse=t}function mp(o,e,t=!1){let n=o.children,r=e.children;if(me(n)&&me(r))for(let s=0;s<n.length;s++){let i=n[s],a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=bn(r[s]),a.el=i.el),t||mp(i,a))}}function Uy(o){let e=o.slice(),t=[0],n,r,s,i,a,c=o.length;for(n=0;n<c;n++){let l=o[n];if(l!==0){if(r=t[t.length-1],o[r]<l){e[n]=r,t.push(n);continue}for(s=0,i=t.length-1;s<i;)a=s+i>>1,o[t[a]]<l?s=a+1:i=a;l<o[t[s]]&&(s>0&&(e[n]=t[s-1]),t[s]=n)}}for(s=t.length,i=t[s-1];s-- >0;)t[s]=i,i=e[i];return t}var Gy=o=>o.__isTeleport;var Hy=Symbol();var Pt=Symbol(void 0),$c=Symbol(void 0),yo=Symbol(void 0),la=Symbol(void 0),Ws=[],Qn=null;function Ae(o=!1){Ws.push(Qn=o?null:[])}function Yy(){Ws.pop(),Qn=Ws[Ws.length-1]||null}var ua=1;function gp(o){ua+=o}function _p(o){return o.dynamicChildren=ua>0?Qn||zn:null,Yy(),ua>0&&Qn&&Qn.push(o),o}function Ke(o,e,t,n,r,s){return _p(Zt(o,e,t,n,r,s,!0))}function Io(o,e,t,n,r){return _p(Ie(o,e,t,n,r,!0))}function pa(o){return o?o.__v_isVNode===!0:!1}function Zn(o,e){return o.type===e.type&&o.key===e.key}var fa="__vInternal",vp=({key:o})=>o!=null?o:null,da=({ref:o,ref_key:e,ref_for:t})=>o!=null?pt(o)||st(o)||_e(o)?{i:_o,r:o,k:e,f:!!t}:o:null;function Zt(o,e=null,t=null,n=0,r=null,s=o===Pt?0:1,i=!1,a=!1){let c={__v_isVNode:!0,__v_skip:!0,type:o,props:e,key:e&&vp(e),ref:e&&da(e),scopeId:ea,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null};return a?(Uc(c,t),s&128&&o.normalize(c)):t&&(c.shapeFlag|=pt(t)?8:16),ua>0&&!i&&Qn&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&Qn.push(c),c}var Ie=Xy;function Xy(o,e=null,t=null,n=0,r=null,s=!1){if((!o||o===Hy)&&(o=yo),pa(o)){let a=Pr(o,e,!0);return t&&Uc(a,t),a}if(cx(o)&&(o=o.__vccOpts),e){e=Ky(e);let{class:a,style:c}=e;a&&!pt(a)&&(e.class=go(a)),Xe(c)&&(Qi(c)&&!me(c)&&(c=ut({},c)),e.style=wt(c))}let i=pt(o)?1:yy(o)?128:Gy(o)?64:Xe(o)?4:_e(o)?2:0;return Zt(o,e,t,n,r,i,s,!0)}function Ky(o){return o?Qi(o)||fa in o?ut({},o):o:null}function Pr(o,e,t=!1){let{props:n,ref:r,patchFlag:s,children:i}=o,a=e?Jn(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:o.type,props:a,key:a&&vp(a),ref:e&&e.ref?t&&r?me(r)?r.concat(da(e)):[r,da(e)]:da(e):r,scopeId:o.scopeId,slotScopeIds:o.slotScopeIds,children:i,target:o.target,targetAnchor:o.targetAnchor,staticCount:o.staticCount,shapeFlag:o.shapeFlag,patchFlag:e&&o.type!==Pt?s===-1?16:s|16:s,dynamicProps:o.dynamicProps,dynamicChildren:o.dynamicChildren,appContext:o.appContext,dirs:o.dirs,transition:o.transition,component:o.component,suspense:o.suspense,ssContent:o.ssContent&&Pr(o.ssContent),ssFallback:o.ssFallback&&Pr(o.ssFallback),el:o.el,anchor:o.anchor}}function zs(o=" ",e=0){return Ie($c,null,o,e)}function xn(o="",e=!1){return e?(Ae(),Io(yo,null,o)):Ie(yo,null,o)}function Fo(o){return o==null||typeof o=="boolean"?Ie(yo):me(o)?Ie(Pt,null,o.slice()):typeof o=="object"?bn(o):Ie($c,null,String(o))}function bn(o){return o.el===null||o.memo?o:Pr(o)}function Uc(o,e){let t=0,{shapeFlag:n}=o;if(e==null)e=null;else if(me(e))t=16;else if(typeof e=="object")if(n&(1|64)){let r=e.default;r&&(r._c&&(r._d=!1),Uc(o,r()),r._c&&(r._d=!0));return}else{t=32;let r=e._;!r&&!(fa in e)?e._ctx=_o:r===3&&_o&&(_o.slots._===1?e._=1:(e._=2,o.patchFlag|=1024))}else _e(e)?(e={default:e,_ctx:_o},t=32):(e=String(e),n&64?(t=16,e=[zs(e)]):t=8);o.children=e,o.shapeFlag|=t}function Jn(...o){let e={};for(let t=0;t<o.length;t++){let n=o[t];for(let r in n)if(r==="class")e.class!==n.class&&(e.class=go([e.class,n.class]));else if(r==="style")e.style=wt([e.style,n.style]);else if(Cr(r)){let s=e[r],i=n[r];s!==i&&!(me(s)&&s.includes(i))&&(e[r]=s?[].concat(s,i):i)}else r!==""&&(e[r]=n[r])}return e}function Ro(o,e,t,n=null){Jt(o,e,7,[t,n])}function yp(o,e,t,n){let r,s=t&&t[n];if(me(o)||pt(o)){r=new Array(o.length);for(let i=0,a=o.length;i<a;i++)r[i]=e(o[i],i,void 0,s&&s[i])}else if(typeof o=="number"){r=new Array(o);for(let i=0;i<o;i++)r[i]=e(i+1,i,void 0,s&&s[i])}else if(Xe(o))if(o[Symbol.iterator])r=Array.from(o,(i,a)=>e(i,a,void 0,s&&s[a]));else{let i=Object.keys(o);r=new Array(i.length);for(let a=0,c=i.length;a<c;a++){let l=i[a];r[a]=e(o[l],l,a,s&&s[a])}}else r=[];return t&&(t[n]=r),r}function ha(o,e,t={},n,r){if(_o.isCE)return Ie("slot",e==="default"?null:{name:e},n&&n());let s=o[e];s&&s._c&&(s._d=!1),Ae();let i=s&&xp(s(t)),a=Io(Pt,{key:t.key||`_${e}`},i||(n?n():[]),i&&o._===1?64:-2);return!r&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function xp(o){return o.some(e=>pa(e)?!(e.type===yo||e.type===Pt&&!xp(e.children)):!0)?o:null}var Gc=o=>o?bp(o)?Hc(o)||o.proxy:Gc(o.parent):null,ma=ut(Object.create(null),{$:o=>o,$el:o=>o.vnode.el,$data:o=>o.data,$props:o=>o.props,$attrs:o=>o.attrs,$slots:o=>o.slots,$refs:o=>o.refs,$parent:o=>Gc(o.parent),$root:o=>Gc(o.root),$emit:o=>o.emit,$options:o=>op(o),$forceUpdate:o=>()=>kp(o.update),$nextTick:o=>Qc.bind(o.proxy),$watch:o=>vx.bind(o)}),Qy={get({_:o},e){let{ctx:t,setupState:n,data:r,props:s,accessCache:i,type:a,appContext:c}=o,l;if(e[0]!=="$"){let d=i[e];if(d!==void 0)switch(d){case 1:return n[e];case 2:return r[e];case 4:return t[e];case 3:return s[e]}else{if(n!==Pe&&Ne(n,e))return i[e]=1,n[e];if(r!==Pe&&Ne(r,e))return i[e]=2,r[e];if((l=o.propsOptions[0])&&Ne(l,e))return i[e]=3,s[e];if(t!==Pe&&Ne(t,e))return i[e]=4,t[e];Lc&&(i[e]=0)}}let u=ma[e],p,f;if(u)return e==="$attrs"&&Bt(o,"get",e),u(o);if((p=a.__cssModules)&&(p=p[e]))return p;if(t!==Pe&&Ne(t,e))return i[e]=4,t[e];if(f=c.config.globalProperties,Ne(f,e))return f[e]},set({_:o},e,t){let{data:n,setupState:r,ctx:s}=o;if(r!==Pe&&Ne(r,e))r[e]=t;else if(n!==Pe&&Ne(n,e))n[e]=t;else if(Ne(o.props,e))return!1;return e[0]==="$"&&e.slice(1)in o?!1:(s[e]=t,!0)},has({_:{data:o,setupState:e,accessCache:t,ctx:n,appContext:r,propsOptions:s}},i){let a;return!!t[i]||o!==Pe&&Ne(o,i)||e!==Pe&&Ne(e,i)||(a=s[0])&&Ne(a,i)||Ne(n,i)||Ne(ma,i)||Ne(r.config.globalProperties,i)}};var Zy=dp(),Jy=0;function ex(o,e,t){let n=o.type,r=(e?e.appContext:o.appContext)||Zy,s={uid:Jy++,vnode:o,type:n,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new zi(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:sp(n,r),emitsOptions:Hu(n,r),emit:null,emitted:null,propsDefaults:Pe,inheritAttrs:n.inheritAttrs,ctx:Pe,data:Pe,props:Pe,attrs:Pe,slots:Pe,refs:Pe,setupState:Pe,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=hy.bind(null,s),o.ce&&o.ce(s),s}var St=null,ga=()=>St||_o,Ir=o=>{St=o,o.scope.on()},er=()=>{St&&St.scope.off(),St=null};function bp(o){return o.vnode.shapeFlag&4}var _a=!1;function tx(o,e=!1){_a=e;let{props:t,children:n}=o.vnode,r=bp(o);Ry(o,t,r,e),Ly(o,n);let s=r?ox(o,e):void 0;return _a=!1,s}function ox(o,e){let t=o.type;o.accessCache=Object.create(null),o.proxy=Vs(new Proxy(o.ctx,Qy));let{setup:n}=t;if(n){let r=o.setupContext=n.length>1?rx(o):null;Ir(o),_n();let s=Qo(n,o,0,[o.props,r]);if(Xo(),er(),mc(s)){if(s.then(er,er),e)return s.then(i=>{wp(o,i,e)}).catch(i=>{va(i,o,0)});o.asyncDep=s}else wp(o,s,e)}else Op(o,e)}function wp(o,e,t){_e(e)?o.type.__ssrInlineRender?o.ssrRender=e:o.render=e:Xe(e)&&(o.setupState=Zi(e)),Op(o,t)}var Sp,Tp;function Op(o,e,t){let n=o.type;if(!o.render){if(!e&&Sp&&!n.render){let r=n.template;if(r){let{isCustomElement:s,compilerOptions:i}=o.appContext.config,{delimiters:a,compilerOptions:c}=n,l=ut(ut({isCustomElement:s,delimiters:a},i),c);n.render=Sp(r,l)}}o.render=n.render||Xt,Tp&&Tp(o)}Ir(o),_n(),Dy(o),Xo(),er()}function nx(o){return new Proxy(o.attrs,{get(e,t){return Bt(o,"get","$attrs"),e[t]}})}function rx(o){let e=n=>{o.exposed=n||{}},t;return{get attrs(){return t||(t=nx(o))},slots:o.slots,emit:o.emit,expose:e}}function Hc(o){if(o.exposed)return o.exposeProxy||(o.exposeProxy=new Proxy(Zi(Vs(o.exposed)),{get(e,t){if(t in e)return e[t];if(t in ma)return ma[t](o)}}))}var sx=/(?:^|[-_])(\w)/g,ix=o=>o.replace(sx,e=>e.toUpperCase()).replace(/[-_]/g,"");function ax(o){return _e(o)&&o.displayName||o.name}function Np(o,e,t=!1){let n=ax(e);if(!n&&e.__file){let r=e.__file.match(/([^/\\]+)\.\w+$/);r&&(n=r[1])}if(!n&&o&&o.parent){let r=s=>{for(let i in s)if(s[i]===e)return i};n=r(o.components||o.parent.type.components)||r(o.appContext.components)}return n?ix(n):t?"App":"Anonymous"}function cx(o){return _e(o)&&"__vccOpts"in o}var $s=[];function Ep(o,...e){_n();let t=$s.length?$s[$s.length-1].component:null,n=t&&t.appContext.config.warnHandler,r=lx();if(n)Qo(n,t,11,[o+e.join(""),t&&t.proxy,r.map(({vnode:s})=>`at <${Np(t,s.type)}>`).join(`
`),r]);else{let s=[`[Vue warn]: ${o}`,...e];r.length&&s.push(`
`,...ux(r)),console.warn(...s)}Xo()}function lx(){let o=$s[$s.length-1];if(!o)return[];let e=[];for(;o;){let t=e[0];t&&t.vnode===o?t.recurseCount++:e.push({vnode:o,recurseCount:0});let n=o.component&&o.component.parent;o=n&&n.vnode}return e}function ux(o){let e=[];return o.forEach((t,n)=>{e.push(...n===0?[]:[`
`],...px(t))}),e}function px({vnode:o,recurseCount:e}){let t=e>0?`... (${e} recursive calls)`:"",n=o.component?o.component.parent==null:!1,r=` at <${Np(o.component,o.type,n)}`,s=">"+t;return o.props?[r,...fx(o.props),s]:[r+s]}function fx(o){let e=[],t=Object.keys(o);return t.slice(0,3).forEach(n=>{e.push(...Ap(n,o[n]))}),t.length>3&&e.push(" ..."),e}function Ap(o,e,t){return pt(e)?(e=JSON.stringify(e),t?e:[`${o}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?t?e:[`${o}=${e}`]:st(e)?(e=Ap(o,Te(e.value),!0),t?e:[`${o}=Ref<`,e,">"]):_e(e)?[`${o}=fn${e.name?`<${e.name}>`:""}`]:(e=Te(e),t?e:[`${o}=`,e])}var FS={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",[0]:"setup function",[1]:"render function",[2]:"watcher getter",[3]:"watcher callback",[4]:"watcher cleanup function",[5]:"native event handler",[6]:"component event handler",[7]:"vnode hook",[8]:"directive hook",[9]:"transition hook",[10]:"app errorHandler",[11]:"app warnHandler",[12]:"ref function",[13]:"async component loader",[14]:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/vue-next"};function Qo(o,e,t,n){let r;try{r=n?o(...n):o()}catch(s){va(s,e,t)}return r}function Jt(o,e,t,n){if(_e(o)){let s=Qo(o,e,t,n);return s&&mc(s)&&s.catch(i=>{va(i,e,t)}),s}let r=[];for(let s=0;s<o.length;s++)r.push(Jt(o[s],e,t,n));return r}function va(o,e,t,n=!0){let r=e?e.vnode:null;if(e){let s=e.parent,i=e.proxy,a=t;for(;s;){let l=s.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](o,i,a)===!1)return}s=s.parent}let c=e.appContext.config.errorHandler;if(c){Qo(c,null,10,[o,i,a]);return}}dx(o,t,r,n)}function dx(o,e,t,n=!0){console.error(o)}var ya=!1,Yc=!1,eo=[],Zo=0,Us=[],Gs=null,Fr=0,Hs=[],wn=null,Rr=0,Cp=Promise.resolve(),Xc=null,Kc=null;function Qc(o){let e=Xc||Cp;return o?e.then(this?o.bind(this):o):e}function hx(o){let e=Zo+1,t=eo.length;for(;e<t;){let n=e+t>>>1;Ys(eo[n])<o?e=n+1:t=n}return e}function kp(o){(!eo.length||!eo.includes(o,ya&&o.allowRecurse?Zo+1:Zo))&&o!==Kc&&(o.id==null?eo.push(o):eo.splice(hx(o.id),0,o),Dp())}function Dp(){!ya&&!Yc&&(Yc=!0,Xc=Cp.then(Ip))}function mx(o){let e=eo.indexOf(o);e>Zo&&eo.splice(e,1)}function Mp(o,e,t,n){me(o)?t.push(...o):(!e||!e.includes(o,o.allowRecurse?n+1:n))&&t.push(o),Dp()}function gx(o){Mp(o,Gs,Us,Fr)}function _x(o){Mp(o,wn,Hs,Rr)}function Zc(o,e=null){if(Us.length){for(Kc=e,Gs=[...new Set(Us)],Us.length=0,Fr=0;Fr<Gs.length;Fr++)Gs[Fr]();Gs=null,Fr=0,Kc=null,Zc(o,e)}}function Pp(o){if(Hs.length){let e=[...new Set(Hs)];if(Hs.length=0,wn){wn.push(...e);return}for(wn=e,wn.sort((t,n)=>Ys(t)-Ys(n)),Rr=0;Rr<wn.length;Rr++)wn[Rr]();wn=null,Rr=0}}var Ys=o=>o.id==null?1/0:o.id;function Ip(o){Yc=!1,ya=!0,Zc(o),eo.sort((t,n)=>Ys(t)-Ys(n));let e=Xt;try{for(Zo=0;Zo<eo.length;Zo++){let t=eo[Zo];t&&t.active!==!1&&Qo(t,null,14)}}finally{Zo=0,eo.length=0,Pp(o),ya=!1,Xc=null,(eo.length||Us.length||Hs.length)&&Ip(o)}}var Fp={};function Ge(o,e,t){return Rp(o,e,t)}function Rp(o,e,{immediate:t,deep:n,flush:r,onTrack:s,onTrigger:i}=Pe){let a=T=>{Ep("Invalid watch source: ",T,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},c=St,l,u=!1,p=!1;if(st(o)?(l=()=>o.value,u=!!o._shallow):yn(o)?(l=()=>o,n=!0):me(o)?(p=!0,u=o.some(yn),l=()=>o.map(T=>{if(st(T))return T.value;if(yn(T))return Vr(T);if(_e(T))return Qo(T,c,2)})):_e(o)?e?l=()=>Qo(o,c,2):l=()=>{if(!(c&&c.isUnmounted))return f&&f(),Jt(o,c,3,[d])}:l=Xt,e&&n){let T=l;l=()=>Vr(T())}let f,d=T=>{f=x.onStop=()=>{Qo(T,c,4)}};if(_a)return d=Xt,e?t&&Jt(e,c,3,[l(),p?[]:void 0,d]):l(),Xt;let h=p?[]:Fp,m=()=>{if(!!x.active)if(e){let T=x.run();(n||u||(p?T.some((D,C)=>$n(D,h[C])):$n(T,h)))&&(f&&f(),Jt(e,c,3,[T,h===Fp?void 0:h,d]),h=T)}else x.run()};m.allowRecurse=!!e;let g;r==="sync"?g=m:r==="post"?g=()=>jt(m,c&&c.suspense):g=()=>{!c||c.isMounted?gx(m):m()};let x=new Dr(l,g);return e?t?m():h=x.run():r==="post"?jt(x.run.bind(x),c&&c.suspense):x.run(),()=>{x.stop(),c&&c.scope&&Fi(c.scope.effects,x)}}function vx(o,e,t){let n=this.proxy,r=pt(o)?o.includes(".")?Vp(n,o):()=>n[o]:o.bind(n,n),s;_e(e)?s=e:(s=e.handler,t=e);let i=St;Ir(this);let a=Rp(r,s.bind(n),t);return i?Ir(i):er(),a}function Vp(o,e){let t=e.split(".");return()=>{let n=o;for(let r=0;r<t.length&&n;r++)n=n[t[r]];return n}}function Vr(o,e){if(!Xe(o)||o.__v_skip||(e=e||new Set,e.has(o)))return o;if(e.add(o),st(o))Vr(o.value,e);else if(me(o))for(let t=0;t<o.length;t++)Vr(o[t],e);else if(Ri(o)||hn(o))o.forEach(t=>{Vr(t,e)});else if(_c(o))for(let t in o)Vr(o[t],e);return o}function qp(o,e,t){let n=arguments.length;return n===2?Xe(e)&&!me(e)?pa(e)?Ie(o,null,[e]):Ie(o,e):Ie(o,null,e):(n>3?t=Array.prototype.slice.call(arguments,2):n===3&&pa(t)&&(t=[t]),Ie(o,e,t))}var RS=Symbol("");var yx="3.2.26";var xx="http://www.w3.org/2000/svg",qr=typeof document!="undefined"?document:null,Lp=new Map,bx={insert:(o,e,t)=>{e.insertBefore(o,t||null)},remove:o=>{let e=o.parentNode;e&&e.removeChild(o)},createElement:(o,e,t,n)=>{let r=e?qr.createElementNS(xx,o):qr.createElement(o,t?{is:t}:void 0);return o==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:o=>qr.createTextNode(o),createComment:o=>qr.createComment(o),setText:(o,e)=>{o.nodeValue=e},setElementText:(o,e)=>{o.textContent=e},parentNode:o=>o.parentNode,nextSibling:o=>o.nextSibling,querySelector:o=>qr.querySelector(o),setScopeId(o,e){o.setAttribute(e,"")},cloneNode(o){let e=o.cloneNode(!0);return"_value"in o&&(e._value=o._value),e},insertStaticContent(o,e,t,n){let r=t?t.previousSibling:e.lastChild,s=Lp.get(o);if(!s){let i=qr.createElement("template");if(i.innerHTML=n?`<svg>${o}</svg>`:o,s=i.content,n){let a=s.firstChild;for(;a.firstChild;)s.appendChild(a.firstChild);s.removeChild(a)}Lp.set(o,s)}return e.insertBefore(s.cloneNode(!0),t),[r?r.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}};function wx(o,e,t){let n=o._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?o.removeAttribute("class"):t?o.setAttribute("class",e):o.className=e}function Sx(o,e,t){let n=o.style,r=pt(t);if(t&&!r){for(let s in t)Jc(n,s,t[s]);if(e&&!pt(e))for(let s in e)t[s]==null&&Jc(n,s,"")}else{let s=n.display;r?e!==t&&(n.cssText=t):e&&o.removeAttribute("style"),"_vod"in o&&(n.display=s)}}var Bp=/\s*!important$/;function Jc(o,e,t){if(me(t))t.forEach(n=>Jc(o,e,n));else if(e.startsWith("--"))o.setProperty(e,t);else{let n=Tx(o,e);Bp.test(t)?o.setProperty(mn(n),t.replace(Bp,""),"important"):o[n]=t}}var jp=["Webkit","Moz","ms"],el={};function Tx(o,e){let t=el[e];if(t)return t;let n=Do(e);if(n!=="filter"&&n in o)return el[e]=n;n=ks(n);for(let r=0;r<jp.length;r++){let s=jp[r]+n;if(s in o)return el[e]=s}return e}var Wp="http://www.w3.org/1999/xlink";function Ox(o,e,t,n,r){if(n&&e.startsWith("xlink:"))t==null?o.removeAttributeNS(Wp,e.slice(6,e.length)):o.setAttributeNS(Wp,e,t);else{let s=vu(e);t==null||s&&!hc(t)?o.removeAttribute(e):o.setAttribute(e,s?"":t)}}function Nx(o,e,t,n,r,s,i){if(e==="innerHTML"||e==="textContent"){n&&i(n,r,s),o[e]=t==null?"":t;return}if(e==="value"&&o.tagName!=="PROGRESS"&&!o.tagName.includes("-")){o._value=t;let a=t==null?"":t;(o.value!==a||o.tagName==="OPTION")&&(o.value=a),t==null&&o.removeAttribute(e);return}if(t===""||t==null){let a=typeof o[e];if(a==="boolean"){o[e]=hc(t);return}else if(t==null&&a==="string"){o[e]="",o.removeAttribute(e);return}else if(a==="number"){try{o[e]=0}catch(c){}o.removeAttribute(e);return}}try{o[e]=t}catch(a){}}var xa=Date.now,zp=!1;if(typeof window!="undefined"){xa()>document.createEvent("Event").timeStamp&&(xa=()=>performance.now());let o=navigator.userAgent.match(/firefox\/(\d+)/i);zp=!!(o&&Number(o[1])<=53)}var tl=0,Ex=Promise.resolve(),Ax=()=>{tl=0},Cx=()=>tl||(Ex.then(Ax),tl=xa());function kx(o,e,t,n){o.addEventListener(e,t,n)}function Dx(o,e,t,n){o.removeEventListener(e,t,n)}function Mx(o,e,t,n,r=null){let s=o._vei||(o._vei={}),i=s[e];if(n&&i)i.value=n;else{let[a,c]=Px(e);if(n){let l=s[e]=Ix(n,r);kx(o,a,l,c)}else i&&(Dx(o,a,i,c),s[e]=void 0)}}var $p=/(?:Once|Passive|Capture)$/;function Px(o){let e;if($p.test(o)){e={};let t;for(;t=o.match($p);)o=o.slice(0,o.length-t[0].length),e[t[0].toLowerCase()]=!0}return[mn(o.slice(2)),e]}function Ix(o,e){let t=n=>{let r=n.timeStamp||xa();(zp||r>=t.attached-1)&&Jt(Fx(n,t.value),e,5,[n])};return t.value=o,t.attached=Cx(),t}function Fx(o,e){if(me(e)){let t=o.stopImmediatePropagation;return o.stopImmediatePropagation=()=>{t.call(o),o._stopped=!0},e.map(n=>r=>!r._stopped&&n(r))}else return e}var Up=/^on[a-z]/,Rx=(o,e,t,n,r=!1,s,i,a,c)=>{e==="class"?wx(o,n,r):e==="style"?Sx(o,t,n):Cr(e)?As(e)||Mx(o,e,t,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Vx(o,e,n,r))?Nx(o,e,n,s,i,a,c):(e==="true-value"?o._trueValue=n:e==="false-value"&&(o._falseValue=n),Ox(o,e,n,r))};function Vx(o,e,t,n){return n?!!(e==="innerHTML"||e==="textContent"||e in o&&Up.test(e)&&_e(t)):e==="spellcheck"||e==="draggable"||e==="form"||e==="list"&&o.tagName==="INPUT"||e==="type"&&o.tagName==="TEXTAREA"||Up.test(e)&&pt(t)?!1:e in o}var Sn="transition",Xs="animation",Gp=(o,{slots:e})=>qp(Ic,qx(o),e);Gp.displayName="Transition";var Hp={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},XS=Gp.props=ut({},Ic.props,Hp),tr=(o,e=[])=>{me(o)?o.forEach(t=>t(...e)):o&&o(...e)},Yp=o=>o?me(o)?o.some(e=>e.length>1):o.length>1:!1;function qx(o){let e={};for(let E in o)E in Hp||(e[E]=o[E]);if(o.css===!1)return e;let{name:t="v",type:n,duration:r,enterFromClass:s=`${t}-enter-from`,enterActiveClass:i=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:c=s,appearActiveClass:l=i,appearToClass:u=a,leaveFromClass:p=`${t}-leave-from`,leaveActiveClass:f=`${t}-leave-active`,leaveToClass:d=`${t}-leave-to`}=o,h=Lx(r),m=h&&h[0],g=h&&h[1],{onBeforeEnter:x,onEnter:T,onEnterCancelled:D,onLeave:C,onLeaveCancelled:w,onBeforeAppear:N=x,onAppear:b=T,onAppearCancelled:O=D}=e,L=(E,H,F)=>{Lr(E,H?u:a),Lr(E,H?l:i),F&&F()},Y=(E,H)=>{Lr(E,d),Lr(E,f),H&&H()},R=E=>(H,F)=>{let ee=E?b:T,$=()=>L(H,E,F);tr(ee,[H,$]),Xp(()=>{Lr(H,E?c:s),Tn(H,E?u:a),Yp(ee)||Kp(H,n,m,$)})};return ut(e,{onBeforeEnter(E){tr(x,[E]),Tn(E,s),Tn(E,i)},onBeforeAppear(E){tr(N,[E]),Tn(E,c),Tn(E,l)},onEnter:R(!1),onAppear:R(!0),onLeave(E,H){let F=()=>Y(E,H);Tn(E,p),Wx(),Tn(E,f),Xp(()=>{Lr(E,p),Tn(E,d),Yp(C)||Kp(E,n,g,F)}),tr(C,[E,F])},onEnterCancelled(E){L(E,!1),tr(D,[E])},onAppearCancelled(E){L(E,!0),tr(O,[E])},onLeaveCancelled(E){Y(E),tr(w,[E])}})}function Lx(o){if(o==null)return null;if(Xe(o))return[ol(o.enter),ol(o.leave)];{let e=ol(o);return[e,e]}}function ol(o){return ji(o)}function Tn(o,e){e.split(/\s+/).forEach(t=>t&&o.classList.add(t)),(o._vtc||(o._vtc=new Set)).add(e)}function Lr(o,e){e.split(/\s+/).forEach(n=>n&&o.classList.remove(n));let{_vtc:t}=o;t&&(t.delete(e),t.size||(o._vtc=void 0))}function Xp(o){requestAnimationFrame(()=>{requestAnimationFrame(o)})}var Bx=0;function Kp(o,e,t,n){let r=o._endId=++Bx,s=()=>{r===o._endId&&n()};if(t)return setTimeout(s,t);let{type:i,timeout:a,propCount:c}=jx(o,e);if(!i)return n();let l=i+"end",u=0,p=()=>{o.removeEventListener(l,f),s()},f=d=>{d.target===o&&++u>=c&&p()};setTimeout(()=>{u<c&&p()},a+1),o.addEventListener(l,f)}function jx(o,e){let t=window.getComputedStyle(o),n=h=>(t[h]||"").split(", "),r=n(Sn+"Delay"),s=n(Sn+"Duration"),i=Qp(r,s),a=n(Xs+"Delay"),c=n(Xs+"Duration"),l=Qp(a,c),u=null,p=0,f=0;e===Sn?i>0&&(u=Sn,p=i,f=s.length):e===Xs?l>0&&(u=Xs,p=l,f=c.length):(p=Math.max(i,l),u=p>0?i>l?Sn:Xs:null,f=u?u===Sn?s.length:c.length:0);let d=u===Sn&&/\b(transform|all)(,|$)/.test(t[Sn+"Property"]);return{type:u,timeout:p,propCount:f,hasTransform:d}}function Qp(o,e){for(;o.length<e.length;)o=o.concat(o);return Math.max(...e.map((t,n)=>Zp(t)+Zp(o[n])))}function Zp(o){return Number(o.slice(0,-1).replace(",","."))*1e3}function Wx(){return document.body.offsetHeight}var KS=new WeakMap,QS=new WeakMap;var zx=ut({patchProp:Rx},bx),Jp;function $x(){return Jp||(Jp=hp(zx))}var ef=(...o)=>{let e=$x().createApp(...o),{mount:t}=e;return e.mount=n=>{let r=Ux(n);if(!r)return;let s=e._component;!_e(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";let i=t(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),i},e};function Ux(o){return pt(o)?document.querySelector(o):o}var nl={Mute:"Mute",Unmute:"Unmute","Stop metronome":"Stop metronome","Start metronome":"Start metronome","%1 BPM":"%1 BPM","Invalid BPM":"Invalid BPM","Invalid or unsupported meter":"Invalid or unsupported meter","Stopping in %1...":"Stopping in %1...",Cancel:"Cancel"};var Hx=window.moment.locale,Yx={en:nl},rl=Yx[Hx()];function ro(o,...e){var n,r;let t=(r=(n=rl==null?void 0:rl[o])!=null?n:nl[o])!=null?r:o;return e.forEach((s,i)=>t=t.replace(`%${i+1}`,s)),t}var Ks=We({props:{started:{type:null,required:!1}},setup(o,{expose:e}){e();let n={props:o,t:ro};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});var Xx=["aria-label"];function tf(o,e,t,n,r,s){return Ae(),Ke("button",{class:"overlay-toggle","aria-label":t.started?n.t("Stop metronome"):n.t("Start metronome"),"aria-label-position":"top"},null,8,Xx)}Ks.render=tf;Ks.__file="src/components/OverlayToggle.vue";Ks.__scopeId="data-v-7d715b01";var of=Ks;function nf(o){return $i()?(vc(o),!0):!1}var Br=typeof window!="undefined";var ba=()=>{};function rf(o){var e;let t=Ls(o);return(e=t==null?void 0:t.$el)!=null?e:t}var Zx=Br?window:void 0,eO=Br?window.document:void 0,tO=Br?window.navigator:void 0,oO=Br?window.location:void 0;var sl="__vueuse_ssr_handlers__";globalThis[sl]=globalThis[sl]||{};var nO=globalThis[sl];function wa(o,e,t={}){let{root:n,rootMargin:r="0px",threshold:s=.1,window:i=Zx}=t,a=i&&"IntersectionObserver"in i,c=ba,l=a?Ge(()=>({el:rf(o),root:rf(n)}),({el:p,root:f})=>{if(c(),!p)return;let d=new i.IntersectionObserver(e,{root:f,rootMargin:r,threshold:s});d.observe(p),c=()=>{d.disconnect(),c=ba}},{immediate:!0,flush:"post"}):ba,u=()=>{c(),l()};return nf(u),{isSupported:a,stop:u}}var sf,af;var rO=Br&&(window==null?void 0:window.navigator)&&((sf=window==null?void 0:window.navigator)==null?void 0:sf.platform)&&/iP(ad|hone|od)/.test((af=window==null?void 0:window.navigator)==null?void 0:af.platform);var Jx=Object.defineProperty;var cf=Object.getOwnPropertySymbols,eb=Object.prototype.hasOwnProperty,tb=Object.prototype.propertyIsEnumerable,lf=(o,e,t)=>e in o?Jx(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,ob=(o,e)=>{for(var t in e||(e={}))eb.call(e,t)&&lf(o,t,e[t]);if(cf)for(var t of cf(e))tb.call(e,t)&&lf(o,t,e[t]);return o};var nb={top:0,left:0,bottom:0,right:0,height:0,width:0},sO=ob({text:""},nb);function Vo({synchronizeElement:o,onBeat:e,observeVisibilityElement:t}){let n=t||o,r=be(!1),s=be(!1),i=ft(()=>s.value?{animation:"none !important"}:{});e(()=>{if(!r.value)return;let l=20;s.value=!0,setTimeout(()=>{s.value=!1,o.value.style.setProperty("--sync-delay",`-${l}ms`),r.value=!1},l)});let{stop:a}=wa(n,([l])=>{l.isIntersecting&&(r.value=!0,s.value=!0)}),c=()=>r.value=!0;return vo(a),{haltAnimationStyle:i,forceResync:c}}var Qs=We({props:{started:{type:Boolean,required:!0},onBeat:{type:null,required:!0},onTick:{type:null,required:!0},onTock:{type:null,required:!0}},setup(o,{expose:e}){e();let t=o,n=10,r=be(n);t.onBeat(()=>r.value--);let s=be(null),i=be(""),{haltAnimationStyle:a,forceResync:c}=Vo({synchronizeElement:s,onBeat:t.onBeat});Ge(r,()=>{r.value===0&&(c(),r.value=n)}),t.onTick(()=>i.value="var(--text-accent)"),t.onTock(()=>i.value="var(--text-faint)");let l={props:t,RESYNC_AFTER_ITERATION_COUNT:n,iterationsUntilResync:r,rootElement:s,tickColor:i,haltAnimationStyle:a,forceResync:c};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}});var rb=["data-started"];function uf(o,e,t,n,r,s){return Ae(),Ke("div",{class:"pulse",ref:"rootElement",style:wt(A({"--tick-color":n.tickColor},n.haltAnimationStyle)),"data-started":n.props.started},null,12,rb)}Qs.render=uf;Qs.__file="src/components/visualizations/PulseVisualization.vue";Qs.__scopeId="data-v-9f442431";var Sa=Qs;var Zs=We({props:{started:{type:Boolean,required:!0},onBeat:{type:null,required:!0},onTick:{type:null,required:!0},onTock:{type:null,required:!0}},setup(o,{expose:e}){e();let n={props:o,PulseVisualization:Sa};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});var sb={class:"controls"};function pf(o,e,t,n,r,s){return Ae(),Ke("div",sb,[ha(o.$slots,"default",{},void 0,!0),Ie(n.PulseVisualization,{style:{opacity:"0.3"},started:n.props.started,"on-beat":n.props.onBeat,"on-tick":n.props.onTick,"on-tock":n.props.onTock},null,8,["started","on-beat","on-tick","on-tock"])])}Zs.render=pf;Zs.__file="src/components/Controls.vue";Zs.__scopeId="data-v-3c5f6c58";var ff=Zs;var Js=We({props:{started:{type:null,required:!1},onBeat:{type:null,required:!0}},setup(o,{expose:e}){e();let t=o,n=be(null),r=be(null),{haltAnimationStyle:s}=Vo({synchronizeElement:r,onBeat:t.onBeat,observeVisibilityElement:n}),i={props:t,rootElement:n,pendulum:r,haltAnimationStyle:s};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}});var ib=o=>(Kt("data-v-44106ba2"),o=o(),Qt(),o),ab={xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",fill:"currentColor",viewBox:"0 0 16 16",ref:"rootElement",class:"metronome-icon"},cb=ib(()=>Zt("path",{d:"M9.867,2.646C9.832,2.47 9.695,2.333 9.52,2.295C8.507,2.08 7.494,2.083 6.482,2.295C6.306,2.332 6.168,2.47 6.133,2.646L3.998,13.175C3.971,13.307 4.005,13.445 4.091,13.549C4.176,13.654 4.304,13.715 4.439,13.715L11.561,13.715C11.696,13.715 11.824,13.654 11.909,13.549C11.995,13.445 12.029,13.307 12.002,13.175L9.867,2.646ZM10.492,10.257L11.01,12.815C11.01,12.815 4.99,12.815 4.99,12.815L5.508,10.257L10.492,10.257ZM10.309,9.357L5.691,9.357L6.954,3.122C7.651,3.008 8.348,3.006 9.045,3.121L9.045,3.121L10.309,9.357Z"},null,-1)),lb={transform:"matrix(1,0,0,0.972522,4.29531,0.0786472)"};function df(o,e,t,n,r,s){return Ae(),Ke("svg",ab,[cb,Zt("g",lb,[Zt("path",{d:"M4.155,9.891L4.155,3.157C4.155,2.902 3.953,2.694 3.705,2.694C3.456,2.694 3.255,2.902 3.255,3.157L3.255,9.891C3.255,10.147 3.456,10.354 3.705,10.354C3.953,10.354 4.155,10.147 4.155,9.891Z",class:go(["pendulum",{started:t.started}]),ref:"pendulum",style:wt(A({},n.haltAnimationStyle))},null,6)])],512)}Js.render=df;Js.__file="src/components/visualizations/MetronomeVisualization.vue";Js.__scopeId="data-v-44106ba2";var Ta=Js;var ei=We({props:{started:{type:null,required:!1},onBeat:{type:null,required:!0},bpm:{type:null,required:!0},meter:{type:null,required:!0},size:{type:null,required:!0}},setup(o,{expose:e}){e();let n={props:o,MetronomeVisualization:Ta};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});var ub=["data-size"],pb={key:0};function hf(o,e,t,n,r,s){return Ae(),Ke("div",{class:"status","data-size":t.size},[Ie(n.MetronomeVisualization,{started:t.started,onBeat:t.onBeat,class:"microphone-icon"},null,8,["started","onBeat"]),t.bpm.isSuperFast()?(Ae(),Ke("span",pb,"\u{1F525}")):xn("v-if",!0),zs(" "+Wn(t.bpm)+" "+Wn(t.meter&&"\xB7")+" "+Wn(t.meter),1)],8,ub)}ei.render=hf;ei.__file="src/components/Status.vue";ei.__scopeId="data-v-494e1bbe";var mf=ei;var gf=`<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" fill="currentColor" class="bi bi-volume-up" viewBox="0 0 16 16">
  <path d="M11.536 14.01A8.473 8.473 0 0 0 14.026 8a8.473 8.473 0 0 0-2.49-6.01l-.708.707A7.476 7.476 0 0 1 13.025 8c0 2.071-.84 3.946-2.197 5.303l.708.707z"/>
  <path d="M10.121 12.596A6.48 6.48 0 0 0 12.025 8a6.48 6.48 0 0 0-1.904-4.596l-.707.707A5.483 5.483 0 0 1 11.025 8a5.483 5.483 0 0 1-1.61 3.89l.706.706z"/>
  <path d="M10.025 8a4.486 4.486 0 0 1-1.318 3.182L8 10.475A3.489 3.489 0 0 0 9.025 8c0-.966-.392-1.841-1.025-2.475l.707-.707A4.486 4.486 0 0 1 10.025 8zM7 4a.5.5 0 0 0-.812-.39L3.825 5.5H1.5A.5.5 0 0 0 1 6v4a.5.5 0 0 0 .5.5h2.325l2.363 1.89A.5.5 0 0 0 7 12V4zM4.312 6.39 6 5.04v5.92L4.312 9.61A.5.5 0 0 0 4 9.5H2v-3h2a.5.5 0 0 0 .312-.11z"/>
</svg>`;var _f=`<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" fill="currentColor" class="bi bi-volume-mute" viewBox="0 0 16 16">
  <path d="M6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06zM6 5.04 4.312 6.39A.5.5 0 0 1 4 6.5H2v3h2a.5.5 0 0 1 .312.11L6 10.96V5.04zm7.854.606a.5.5 0 0 1 0 .708L12.207 8l1.647 1.646a.5.5 0 0 1-.708.708L11.5 8.707l-1.646 1.647a.5.5 0 0 1-.708-.708L10.793 8 9.146 6.354a.5.5 0 1 1 .708-.708L11.5 7.293l1.646-1.647a.5.5 0 0 1 .708 0z"/>
</svg>`;var ti=We({props:{size:{type:String,required:!1},disabled:{type:Boolean,required:!1},bordered:{type:Boolean,required:!1}},setup(o,{expose:e}){e();let n={props:o};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});var hb=["disabled","data-size","data-bordered"];function vf(o,e,t,n,r,s){return Ae(),Ke("button",Jn({class:["button",o.$props.class],disabled:t.disabled,"data-size":n.props.size||"small","data-bordered":t.bordered},{size:t.size}),[ha(o.$slots,"default",{},void 0,!0)],16,hb)}ti.render=vf;ti.__file="src/components/Button.vue";ti.__scopeId="data-v-ac92a45f";var Oa=ti;var Na=We({props:{modelValue:{type:null,required:!1},size:{type:null,required:!0}},emits:["update:modelValue","muted","unmuted"],setup(o,{expose:e,emit:t}){e();let n=o;Ge(()=>n.modelValue,s=>{t(s?"muted":"unmuted")});let r={props:n,emit:t,VolumeUpIcon:gf,VolumeMuteIcon:_f,Button:Oa,t:ro};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}});function yf(o,e,t,n,r,s){return Ae(),Io(n.Button,Jn({class:{enabled:n.props.modelValue},onClick:e[0]||(e[0]=i=>n.emit("update:modelValue",!n.props.modelValue)),"aria-label":n.props.modelValue?n.t("Unmute"):n.t("Mute")},{size:n.props.size},{innerHTML:n.props.modelValue?n.VolumeMuteIcon:n.VolumeUpIcon}),null,16,["class","aria-label","innerHTML"])}Na.render=yf;Na.__file="src/components/MuteToggle.vue";var xf=Na;var Ef=jn(Nf()),oi=We({props:{expiringSoon:{type:Boolean,required:!1},timeLeft:{type:Number,required:!1}},setup(o,{expose:e}){e();let t=o,n=be(0),r=ft(()=>Math.ceil(t.timeLeft)<=60?Math.ceil(t.timeLeft):(0,Ef.default)(Math.ceil(t.timeLeft)*1e3));Ge(()=>t.expiringSoon,()=>{t.expiringSoon&&t.timeLeft>n.value&&(n.value=t.timeLeft)});let s={props:t,maxTimeLeftWhenExpiring:n,timeLeftFormatted:r,Button:Oa,t:ro};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});var gb=o=>(Kt("data-v-9a6388e6"),o=o(),Qt(),o),_b=gb(()=>Zt("div",{class:"auto-stop-timer-progress-bar"},null,-1));function Af(o,e,t,n,r,s){return t.expiringSoon?(Ae(),Io(n.Button,Jn({key:0,"aria-label":n.t("Cancel")},{size:n.props.size},{bordered:"",class:"disable-auto-stop-timer-button",style:{"--total-time":`${n.maxTimeLeftWhenExpiring}s`,"--time-left":`${t.timeLeft}s`}}),{default:Bs(()=>[_b,zs(" "+Wn(t.expiringSoon?n.t("Stopping in %1...",n.timeLeftFormatted):null),1)]),_:1},16,["aria-label","style"])):xn("v-if",!0)}oi.render=Af;oi.__file="src/components/DisableAutoStopTimerButton.vue";oi.__scopeId="data-v-9a6388e6";var Cf=oi;var ni=We({props:{started:{type:null,required:!1},onBeat:{type:null,required:!0}},setup(o,{expose:e}){e();let t=o,n=be(null),{haltAnimationStyle:r}=Vo({synchronizeElement:n,onBeat:t.onBeat}),s={props:t,line:n,haltAnimationStyle:r};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});var vb={style:{position:"relative",width:"100%",height:"100%"}};function kf(o,e,t,n,r,s){return Ae(),Ke("div",vb,[Zt("div",{class:go(["line",{started:t.started}]),ref:"line",style:wt(A({},n.haltAnimationStyle))},null,6)])}ni.render=kf;ni.__file="src/components/visualizations/LineVisualization.vue";ni.__scopeId="data-v-57f47b18";var Df=ni;var ri=We({props:{started:{type:null,required:!1},onBeat:{type:null,required:!0},meter:{type:null,required:!1},currentBeat:{type:Number,required:!0},size:{type:null,required:!0}},setup(o,{expose:e}){e();let t=o,n=be(null),{haltAnimationStyle:r}=Vo({synchronizeElement:n,onBeat:t.onBeat}),s=12,i=ft(()=>{var l;return((l=t.meter)==null?void 0:l.isValid())&&t.meter.upper<=s?t.meter.upper:2}),a=ft(()=>t.currentBeat%i.value),c={props:t,line:n,haltAnimationStyle:r,MAX_DOTS:s,dotsCount:i,activeIndex:a};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}});var yb=["data-size"],xb={class:"dot-wrap-width-constraint"};function Mf(o,e,t,n,r,s){return n.props.size!=="small"?(Ae(),Ke("div",{key:0,class:"dots",style:wt({"--dots-count":n.dotsCount})},[(Ae(!0),Ke(Pt,null,yp(n.dotsCount,i=>(Ae(),Ke("div",{key:i,class:"dot-wrap","data-size":n.props.size},[Zt("div",xb,[Zt("div",{class:go(["dot",{active:t.started&&i===n.activeIndex+1,downbeat:i===1}])},null,2)])],8,yb))),128))],4)):xn("v-if",!0)}ri.render=Mf;ri.__file="src/components/visualizations/DotsVisualization.vue";ri.__scopeId="data-v-7fc8b166";var Pf=ri;var si=We({props:{visualization:{type:null,required:!0},started:{type:Boolean,required:!1},onBeat:{type:null,required:!0},meter:{type:null,required:!0},currentBeat:{type:Number,required:!0},size:{type:null,required:!0},onTick:{type:null,required:!0},onTock:{type:null,required:!0}},setup(o,{expose:e}){e();let r={props:o,getPulseOpacityForOtherVisualization:s=>{switch(s){case"pendulum":case"line":return .6;case"dots":return .4;default:return 1}},PulseVisualization:Sa,MetronomeVisualization:Ta,LineVisualization:Df,DotsVisualization:Pf};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}});var bb={class:"visualization"};function If(o,e,t,n,r,s){return Ae(),Ke("div",bb,[n.props.visualization==="pendulum"?(Ae(),Io(n.MetronomeVisualization,{key:0,style:{position:"absolute",top:"0",right:"0",bottom:"0",left:"0",color:"var(--text-normal)"},started:n.props.started,"on-beat":n.props.onBeat},null,8,["started","on-beat"])):n.props.visualization==="line"?(Ae(),Io(n.LineVisualization,{key:1,started:n.props.started,"on-beat":n.props.onBeat},null,8,["started","on-beat"])):n.props.visualization==="dots"?(Ae(),Io(n.DotsVisualization,{key:2,started:n.props.started,"on-beat":n.props.onBeat,meter:n.props.meter,"current-beat":n.props.currentBeat,size:t.size},null,8,["started","on-beat","meter","current-beat","size"])):xn("v-if",!0),Ie(n.PulseVisualization,{style:wt({opacity:n.getPulseOpacityForOtherVisualization(n.props.visualization)}),started:n.props.started,"on-beat":n.props.onBeat,"on-tick":n.props.onTick,"on-tock":n.props.onTock},null,8,["style","started","on-beat","on-tick","on-tock"])])}si.render=If;si.__file="src/components/visualizations/Visualization.vue";si.__scopeId="data-v-1b7fcf86";var Ff=si;var ii="14.8.36";var Wt=jn(il());var Hf=()=>new DOMException("","AbortError");var Yf=o=>(e,t,[n,r,s],i)=>{o(e[r],[t,n,s],a=>a[0]===t&&a[1]===n,i)};var Xf=o=>(e,t,n)=>{let r=[];for(let s=0;s<n.numberOfInputs;s+=1)r.push(new Set);o.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:t})};var Kf=o=>(e,t)=>{o.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})};var qo=new WeakSet,Ca=new WeakMap,Wr=new WeakMap,ka=new WeakMap,mi=new WeakMap,zr=new WeakMap,Da=new WeakMap,gi=new WeakMap,_i=new WeakMap,vi=new WeakMap;var Qf={construct(){return Qf}},Zf=o=>{try{let e=new Proxy(o,Qf);new e}catch(e){return!1}return!0};var Jf=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,al=(o,e)=>{let t=[],n=o.replace(/^[\s]+/,""),r=n.match(Jf);for(;r!==null;){let s=r[1].slice(1,-1),i=r[0].replace(/([\s]+)?;?$/,"").replace(s,new URL(s,e).toString());t.push(i),n=n.slice(r[0].length).replace(/^[\s]+/,""),r=n.match(Jf)}return[t.join(";"),n]};var ed=o=>{if(o!==void 0&&!Array.isArray(o))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},td=o=>{if(!Zf(o))throw new TypeError("The given value for processorCtor should be a constructor.");if(o.prototype===null||typeof o.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},od=(o,e,t,n,r,s,i,a,c,l,u,p,f)=>{let d=0;return(h,m,g={credentials:"omit"})=>{let x=u.get(h);if(x!==void 0&&x.has(m))return Promise.resolve();let T=l.get(h);if(T!==void 0){let w=T.get(m);if(w!==void 0)return w}let D=s(h),C=D.audioWorklet===void 0?r(m).then(([w,N])=>{let[b,O]=al(w,N),L=`${b};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${O}
})})(window,'_AWGS')`;return t(L)}).then(()=>{let w=f._AWGS.pop();if(w===void 0)throw new SyntaxError;n(D.currentTime,D.sampleRate,()=>w(class{},void 0,(N,b)=>{if(N.trim()==="")throw e();let O=_i.get(D);if(O!==void 0){if(O.has(N))throw e();td(b),ed(b.parameterDescriptors),O.set(N,b)}else td(b),ed(b.parameterDescriptors),_i.set(D,new Map([[N,b]]))},D.sampleRate,void 0,void 0))}):Promise.all([r(m),Promise.resolve(o(p,p))]).then(([[w,N],b])=>{let O=d+1;d=O;let[L,Y]=al(w,N),F=`${L};((AudioWorkletProcessor,registerProcessor)=>{${Y}
})(${b?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${b?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${b?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${O}',class extends AudioWorkletProcessor{process(){return !1}})`,ee=new Blob([F],{type:"application/javascript; charset=utf-8"}),$=URL.createObjectURL(ee);return D.audioWorklet.addModule($,g).then(()=>{if(a(D))return D;let X=i(D);return X.audioWorklet.addModule($,g).then(()=>X)}).then(X=>{if(c===null)throw new SyntaxError;try{new c(X,`__sac${O}`)}catch(B){throw new SyntaxError}}).finally(()=>URL.revokeObjectURL($))});return T===void 0?l.set(h,new Map([[m,C]])):T.set(m,C),C.then(()=>{let w=u.get(h);w===void 0?u.set(h,new Set([m])):w.add(m)}).finally(()=>{let w=l.get(h);w!==void 0&&w.delete(m)}),C}};var dt=(o,e)=>{let t=o.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t};var On=(o,e)=>{let t=Array.from(o).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");let[n]=t;return o.delete(n),n};var Ma=(o,e,t,n)=>{let r=dt(o,e),s=On(r,i=>i[0]===t&&i[1]===n);return r.size===0&&o.delete(e),s};var Lo=o=>dt(Da,o);var xo=o=>{if(qo.has(o))throw new Error("The AudioNode is already stored.");qo.add(o),Lo(o).forEach(e=>e(!0))};var Pa=o=>"port"in o;var Bo=o=>{if(!qo.has(o))throw new Error("The AudioNode is not stored.");qo.delete(o),Lo(o).forEach(e=>e(!1))};var yi=(o,e)=>{!Pa(o)&&e.every(t=>t.size===0)&&Bo(o)};var nd=(o,e,t,n,r,s,i,a,c,l,u,p,f)=>{let d=new WeakMap;return(h,m,g,x,T)=>{let{activeInputs:D,passiveInputs:C}=s(m),{outputs:w}=s(h),N=a(h),b=O=>{let L=c(m),Y=c(h);if(O){let R=Ma(C,h,g,x);o(D,h,R,!1),!T&&!p(h)&&t(Y,L,g,x),f(m)&&xo(m)}else{let R=n(D,h,g,x);e(C,x,R,!1),!T&&!p(h)&&r(Y,L,g,x);let E=i(m);if(E===0)u(m)&&yi(m,D);else{let H=d.get(m);H!==void 0&&clearTimeout(H),d.set(m,setTimeout(()=>{u(m)&&yi(m,D)},E*1e3))}}};return l(w,[m,g,x],O=>O[0]===m&&O[1]===g&&O[2]===x,!0)?(N.add(b),u(h)?o(D,h,[g,x,b],!0):e(C,x,[h,g,b],!0),!0):!1}};var rd=o=>(e,t,[n,r,s],i)=>{let a=e.get(n);a===void 0?e.set(n,new Set([[r,t,s]])):o(a,[r,t,s],c=>c[0]===r&&c[1]===t,i)};var sd=o=>(e,t)=>{let n=o(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(n).connect(e.destination);let r=()=>{t.removeEventListener("ended",r),t.disconnect(n),n.disconnect()};t.addEventListener("ended",r)};var id=o=>(e,t)=>{o(e).add(t)};var Ib={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},ad=(o,e,t,n,r,s)=>class extends o{constructor(a,c){let l=r(a),u=A(A({},Ib),c),p=n(l,u),f=s(l)?e():null;super(a,!1,p,f);this._nativeAnalyserNode=p}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){let c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){let c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}};var Ce=(o,e)=>o.context===e;var cd=(o,e,t)=>()=>{let n=new WeakMap,r=(s,i)=>ie(void 0,null,function*(){let a=e(s);if(!Ce(a,i)){let l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=o(i,l)}return n.set(i,a),yield t(s,i,a),a});return{render(s,i){let a=n.get(i);return a!==void 0?Promise.resolve(a):r(s,i)}}};var $r=o=>{try{o.copyToChannel(new Float32Array(1),0,-1)}catch(e){return!1}return!0};var so=()=>new DOMException("","IndexSizeError");var Ur=o=>{o.getChannelData=(e=>t=>{try{return e.call(o,t)}catch(n){throw n.code===12?so():n}})(o.getChannelData)};var Fb={numberOfChannels:1},ld=(o,e,t,n,r,s,i,a)=>{let c=null;return class ud{constructor(u){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");let{length:p,numberOfChannels:f,sampleRate:d}=A(A({},Fb),u);c===null&&(c=new r(1,1,44100));let h=n!==null&&e(s,s)?new n({length:p,numberOfChannels:f,sampleRate:d}):c.createBuffer(f,p,d);if(h.numberOfChannels===0)throw t();return typeof h.copyFromChannel!="function"?(i(h),Ur(h)):e($r,()=>$r(h))||a(h),o.add(h),h}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===ud.prototype||o.has(u)}}};var it=-34028234663852886e22,et=-it;var It=o=>qo.has(o);var Rb={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},pd=(o,e,t,n,r,s,i,a)=>class extends o{constructor(l,u){let p=s(l),f=A(A({},Rb),u),d=r(p,f),h=i(p),m=h?e():null;super(l,!1,d,m);this._audioBufferSourceNodeRenderer=m,this._isBufferNullified=!1,this._isBufferSet=f.buffer!==null,this._nativeAudioBufferSourceNode=d,this._onended=null,this._playbackRate=t(this,h,d.playbackRate,et,it)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(l){if(this._nativeAudioBufferSourceNode.buffer=l,l!==null){if(this._isBufferSet)throw n();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(l){this._nativeAudioBufferSourceNode.loop=l}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(l){this._nativeAudioBufferSourceNode.loopEnd=l}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(l){this._nativeAudioBufferSourceNode.loopStart=l}get onended(){return this._onended}set onended(l){let u=typeof l=="function"?a(this,l):null;this._nativeAudioBufferSourceNode.onended=u;let p=this._nativeAudioBufferSourceNode.onended;this._onended=p!==null&&p===u?l:p}get playbackRate(){return this._playbackRate}start(l=0,u=0,p){if(this._nativeAudioBufferSourceNode.start(l,u,p),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=p===void 0?[l,u]:[l,u,p]),this.context.state!=="closed"){xo(this);let f=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",f),It(this)&&Bo(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",f)}}stop(l=0){this._nativeAudioBufferSourceNode.stop(l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=l)}};var fd=(o,e,t,n,r)=>()=>{let s=new WeakMap,i=null,a=null,c=(l,u)=>ie(void 0,null,function*(){let p=t(l),f=Ce(p,u);if(!f){let d={buffer:p.buffer,channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,loop:p.loop,loopEnd:p.loopEnd,loopStart:p.loopStart,playbackRate:p.playbackRate.value};p=e(u,d),i!==null&&p.start(...i),a!==null&&p.stop(a)}return s.set(u,p),f?yield o(u,l.playbackRate,p.playbackRate):yield n(u,l.playbackRate,p.playbackRate),yield r(l,u,p),p});return{set start(l){i=l},set stop(l){a=l},render(l,u){let p=s.get(u);return p!==void 0?Promise.resolve(p):c(l,u)}}};var dd=o=>"playbackRate"in o;var hd=o=>"frequency"in o&&"gain"in o;var md=o=>"offset"in o;var gd=o=>!("frequency"in o)&&"gain"in o;var _d=o=>"detune"in o&&"frequency"in o;var vd=o=>"pan"in o;var mt=o=>dt(Ca,o);var Nn=o=>dt(ka,o);var Ia=(o,e)=>{let{activeInputs:t}=mt(o);t.forEach(r=>r.forEach(([s])=>{e.includes(o)||Ia(s,[...e,o])}));let n=dd(o)?[o.playbackRate]:Pa(o)?Array.from(o.parameters.values()):hd(o)?[o.Q,o.detune,o.frequency,o.gain]:md(o)?[o.offset]:gd(o)?[o.gain]:_d(o)?[o.detune,o.frequency]:vd(o)?[o.pan]:[];for(let r of n){let s=Nn(r);s!==void 0&&s.activeInputs.forEach(([i])=>Ia(i,e))}It(o)&&Bo(o)};var En=o=>{Ia(o.destination,[])};var Fa=o=>o===void 0||typeof o=="number"||typeof o=="string"&&(o==="balanced"||o==="interactive"||o==="playback");var yd=(o,e,t,n,r,s,i,a,c)=>class extends o{constructor(u={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let p;try{p=new c(u)}catch(h){throw h.code===12&&h.message==="sampleRate is not in range"?t():h}if(p===null)throw n();if(!Fa(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&p.sampleRate!==u.sampleRate)throw t();super(p,2);let{latencyHint:f}=u,{sampleRate:d}=p;if(this._baseLatency=typeof p.baseLatency=="number"?p.baseLatency:f==="balanced"?512/d:f==="interactive"||f===void 0?256/d:f==="playback"?1024/d:Math.max(2,Math.min(128,Math.round(f*d/128)))*128/d,this._nativeAudioContext=p,c.name==="webkitAudioContext"?(this._nativeGainNode=p.createGain(),this._nativeOscillatorNode=p.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(p.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,p.state==="running"){this._state="suspended";let h=()=>{this._state==="suspended"&&(this._state=null),p.removeEventListener("statechange",h)};p.addEventListener("statechange",h)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),En(this)}))}createMediaElementSource(u){return new r(this,{mediaElement:u})}createMediaStreamDestination(){return new s(this)}createMediaStreamSource(u){return new i(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,p)=>{let f=()=>{this._nativeAudioContext.removeEventListener("statechange",f),this._nativeAudioContext.state==="running"?u():this.resume().then(u,p)};this._nativeAudioContext.addEventListener("statechange",f)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}};var xd=(o,e,t,n,r,s,i,a)=>class extends o{constructor(l,u){let p=s(l),f=i(p),d=r(p,u,f),h=f?e(a):null;super(l,!1,d,h);this._isNodeOfNativeOfflineAudioContext=f,this._nativeAudioDestinationNode=d}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(l){if(this._isNodeOfNativeOfflineAudioContext)throw n();if(l>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=l}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(l){if(this._isNodeOfNativeOfflineAudioContext)throw n();this._nativeAudioDestinationNode.channelCountMode=l}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}};var bd=o=>{let e=new WeakMap,t=(n,r)=>ie(void 0,null,function*(){let s=r.destination;return e.set(r,s),yield o(n,r,s),s});return{render(n,r){let s=e.get(r);return s!==void 0?Promise.resolve(s):t(n,r)}}};var wd=(o,e,t,n,r,s,i,a)=>(c,l)=>{let u=l.listener,p=()=>{let w=new Float32Array(1),N=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),b=i(l),O=!1,L=[0,0,-1,0,1,0],Y=[0,0,0],R=()=>{if(O)return;O=!0;let ee=n(l,256,9,0);ee.onaudioprocess=({inputBuffer:$})=>{let X=[s($,w,0),s($,w,1),s($,w,2),s($,w,3),s($,w,4),s($,w,5)];X.some((M,U)=>M!==L[U])&&(u.setOrientation(...X),L=X);let B=[s($,w,6),s($,w,7),s($,w,8)];B.some((M,U)=>M!==Y[U])&&(u.setPosition(...B),Y=B)},N.connect(ee)},E=ee=>$=>{$!==L[ee]&&(L[ee]=$,u.setOrientation(...L))},H=ee=>$=>{$!==Y[ee]&&(Y[ee]=$,u.setPosition(...Y))},F=(ee,$,X)=>{let B=t(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:$});B.connect(N,0,ee),B.start(),Object.defineProperty(B.offset,"defaultValue",{get(){return $}});let M=o({context:c},b,B.offset,et,it);return a(M,"value",U=>()=>U.call(M),U=>V=>{try{U.call(M,V)}catch(J){if(J.code!==9)throw J}R(),b&&X(V)}),M.cancelAndHoldAtTime=(U=>b?()=>{throw r()}:(...V)=>{let J=U.apply(M,V);return R(),J})(M.cancelAndHoldAtTime),M.cancelScheduledValues=(U=>b?()=>{throw r()}:(...V)=>{let J=U.apply(M,V);return R(),J})(M.cancelScheduledValues),M.exponentialRampToValueAtTime=(U=>b?()=>{throw r()}:(...V)=>{let J=U.apply(M,V);return R(),J})(M.exponentialRampToValueAtTime),M.linearRampToValueAtTime=(U=>b?()=>{throw r()}:(...V)=>{let J=U.apply(M,V);return R(),J})(M.linearRampToValueAtTime),M.setTargetAtTime=(U=>b?()=>{throw r()}:(...V)=>{let J=U.apply(M,V);return R(),J})(M.setTargetAtTime),M.setValueAtTime=(U=>b?()=>{throw r()}:(...V)=>{let J=U.apply(M,V);return R(),J})(M.setValueAtTime),M.setValueCurveAtTime=(U=>b?()=>{throw r()}:(...V)=>{let J=U.apply(M,V);return R(),J})(M.setValueCurveAtTime),M};return{forwardX:F(0,0,E(0)),forwardY:F(1,0,E(1)),forwardZ:F(2,-1,E(2)),positionX:F(6,0,H(0)),positionY:F(7,0,H(1)),positionZ:F(8,0,H(2)),upX:F(3,0,E(3)),upY:F(4,1,E(4)),upZ:F(5,0,E(5))}},{forwardX:f,forwardY:d,forwardZ:h,positionX:m,positionY:g,positionZ:x,upX:T,upY:D,upZ:C}=u.forwardX===void 0?p():u;return{get forwardX(){return f},get forwardY(){return d},get forwardZ(){return h},get positionX(){return m},get positionY(){return g},get positionZ(){return x},get upX(){return T},get upY(){return D},get upZ(){return C}}};var or=o=>"context"in o;var An=o=>or(o[0]);var bo=(o,e,t,n)=>{for(let r of o)if(t(r)){if(n)return!1;throw Error("The set contains at least one similar element.")}return o.add(e),!0};var cl=(o,e,[t,n],r)=>{bo(o,[e,t,n],s=>s[0]===e&&s[1]===t,r)};var ll=(o,[e,t,n],r)=>{let s=o.get(e);s===void 0?o.set(e,new Set([[t,n]])):bo(s,[t,n],i=>i[0]===t,r)};var io=o=>"inputs"in o;var Gr=(o,e,t,n)=>{if(io(e)){let r=e.inputs[n];return o.connect(r,t,0),[r,t,0]}return o.connect(e,t,n),[e,t,n]};var ul=(o,e,t)=>{for(let n of o)if(n[0]===e&&n[1]===t)return o.delete(n),n;return null};var Sd=(o,e,t)=>On(o,n=>n[0]===e&&n[1]===t);var pl=(o,e)=>{if(!Lo(o).delete(e))throw new Error("Missing the expected event listener.")};var fl=(o,e,t)=>{let n=dt(o,e),r=On(n,s=>s[0]===t);return n.size===0&&o.delete(e),r};var Hr=(o,e,t,n)=>{io(e)?o.disconnect(e.inputs[n],t,0):o.disconnect(e,t,n)};var Fe=o=>dt(Wr,o);var nr=o=>dt(mi,o);var Jo=o=>gi.has(o);var Yr=o=>!qo.has(o);var dl=(o,e)=>new Promise(t=>{if(e!==null)t(!0);else{let n=o.createScriptProcessor(256,1,1),r=o.createGain(),s=o.createBuffer(1,2,44100),i=s.getChannelData(0);i[0]=1,i[1]=1;let a=o.createBufferSource();a.buffer=s,a.loop=!0,a.connect(n).connect(o.destination),a.connect(r),a.disconnect(r),n.onaudioprocess=c=>{let l=c.inputBuffer.getChannelData(0);Array.prototype.some.call(l,u=>u===1)?t(!0):t(!1),a.stop(),n.onaudioprocess=null,a.disconnect(n),n.disconnect(o.destination)},a.start()}});var Ra=(o,e)=>{let t=new Map;for(let n of o)for(let r of n){let s=t.get(r);t.set(r,s===void 0?1:s+1)}t.forEach((n,r)=>e(r,n))};var rr=o=>"context"in o;var Td=o=>{let e=new Map;o.connect=(t=>(n,r=0,s=0)=>{let i=rr(n)?t(n,r,s):t(n,r),a=e.get(n);return a===void 0?e.set(n,[{input:s,output:r}]):a.every(c=>c.input!==s||c.output!==r)&&a.push({input:s,output:r}),i})(o.connect.bind(o)),o.disconnect=(t=>(n,r,s)=>{if(t.apply(o),n===void 0)e.clear();else if(typeof n=="number")for(let[i,a]of e){let c=a.filter(l=>l.output!==n);c.length===0?e.delete(i):e.set(i,c)}else if(e.has(n))if(r===void 0)e.delete(n);else{let i=e.get(n);if(i!==void 0){let a=i.filter(c=>c.output!==r&&(c.input!==s||s===void 0));a.length===0?e.delete(n):e.set(n,a)}}for(let[i,a]of e)a.forEach(c=>{rr(i)?o.connect(i,c.output,c.input):o.connect(i,c.output)})})(o.disconnect)};var Vb=(o,e,t,n)=>{let{activeInputs:r,passiveInputs:s}=Nn(e),{outputs:i}=mt(o),a=Lo(o),c=l=>{let u=Fe(o),p=nr(e);if(l){let f=fl(s,o,t);cl(r,o,f,!1),!n&&!Jo(o)&&u.connect(p,t)}else{let f=Sd(r,o,t);ll(s,f,!1),!n&&!Jo(o)&&u.disconnect(p,t)}};return bo(i,[e,t],l=>l[0]===e&&l[1]===t,!0)?(a.add(c),It(o)?cl(r,o,[t,c],!0):ll(s,[o,t,c],!0),!0):!1},qb=(o,e,t,n)=>{let{activeInputs:r,passiveInputs:s}=mt(e),i=ul(r[n],o,t);return i===null?[Ma(s,o,t,n)[2],!1]:[i[2],!0]},Lb=(o,e,t)=>{let{activeInputs:n,passiveInputs:r}=Nn(e),s=ul(n,o,t);return s===null?[fl(r,o,t)[1],!1]:[s[2],!0]},hl=(o,e,t,n,r)=>{let[s,i]=qb(o,t,n,r);if(s!==null&&(pl(o,s),i&&!e&&!Jo(o)&&Hr(Fe(o),Fe(t),n,r)),It(t)){let{activeInputs:a}=mt(t);yi(t,a)}},ml=(o,e,t,n)=>{let[r,s]=Lb(o,t,n);r!==null&&(pl(o,r),s&&!e&&!Jo(o)&&Fe(o).disconnect(nr(t),n))},Bb=(o,e)=>{let t=mt(o),n=[];for(let r of t.outputs)An(r)?hl(o,e,...r):ml(o,e,...r),n.push(r[0]);return t.outputs.clear(),n},jb=(o,e,t)=>{let n=mt(o),r=[];for(let s of n.outputs)s[1]===t&&(An(s)?hl(o,e,...s):ml(o,e,...s),r.push(s[0]),n.outputs.delete(s));return r},Wb=(o,e,t,n,r)=>{let s=mt(o);return Array.from(s.outputs).filter(i=>i[0]===t&&(n===void 0||i[1]===n)&&(r===void 0||i[2]===r)).map(i=>(An(i)?hl(o,e,...i):ml(o,e,...i),s.outputs.delete(i),i[0]))},Od=(o,e,t,n,r,s,i,a,c,l,u,p,f,d,h,m)=>class extends l{constructor(x,T,D,C){super(D);this._context=x,this._nativeAudioNode=D;let w=u(x);p(w)&&t(dl,()=>dl(w,m))!==!0&&Td(D),Wr.set(this,D),Da.set(this,new Set),x.state!=="closed"&&T&&xo(this),o(this,C,D)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(x){this._nativeAudioNode.channelCount=x}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(x){this._nativeAudioNode.channelCountMode=x}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(x){this._nativeAudioNode.channelInterpretation=x}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(x,T=0,D=0){if(T<0||T>=this._nativeAudioNode.numberOfOutputs)throw r();let C=u(this._context),w=h(C);if(f(x)||d(x))throw s();if(or(x)){let O=Fe(x);try{let Y=Gr(this._nativeAudioNode,O,T,D),R=Yr(this);(w||R)&&this._nativeAudioNode.disconnect(...Y),this.context.state!=="closed"&&!R&&Yr(x)&&xo(x)}catch(Y){throw Y.code===12?s():Y}if(e(this,x,T,D,w)){let Y=c([this],x);Ra(Y,n(w))}return x}let N=nr(x);if(N.name==="playbackRate"&&N.maxValue===1024)throw i();try{this._nativeAudioNode.connect(N,T),(w||Yr(this))&&this._nativeAudioNode.disconnect(N,T)}catch(O){throw O.code===12?s():O}if(Vb(this,x,T,w)){let O=c([this],x);Ra(O,n(w))}}disconnect(x,T,D){let C,w=u(this._context),N=h(w);if(x===void 0)C=Bb(this,N);else if(typeof x=="number"){if(x<0||x>=this.numberOfOutputs)throw r();C=jb(this,N,x)}else{if(T!==void 0&&(T<0||T>=this.numberOfOutputs)||or(x)&&D!==void 0&&(D<0||D>=x.numberOfInputs))throw r();if(C=Wb(this,N,x,T,D),C.length===0)throw s()}for(let b of C){let O=c([this],b);Ra(O,a)}}};var Nd=jn(il()),Ed=(o,e,t,n,r,s,i,a,c,l,u,p,f)=>(d,h,m,g=null,x=null)=>{let T=new Nd.AutomationEventList(m.defaultValue),D=h?n(T):null,C={get defaultValue(){return m.defaultValue},get maxValue(){return g===null?m.maxValue:g},get minValue(){return x===null?m.minValue:x},get value(){return m.value},set value(w){m.value=w,C.setValueAtTime(w,d.context.currentTime)},cancelAndHoldAtTime(w){if(typeof m.cancelAndHoldAtTime=="function")D===null&&T.flush(d.context.currentTime),T.add(r(w)),m.cancelAndHoldAtTime(w);else{let N=Array.from(T).pop();D===null&&T.flush(d.context.currentTime),T.add(r(w));let b=Array.from(T).pop();m.cancelScheduledValues(w),N!==b&&b!==void 0&&(b.type==="exponentialRampToValue"?m.exponentialRampToValueAtTime(b.value,b.endTime):b.type==="linearRampToValue"?m.linearRampToValueAtTime(b.value,b.endTime):b.type==="setValue"?m.setValueAtTime(b.value,b.startTime):b.type==="setValueCurve"&&m.setValueCurveAtTime(b.values,b.startTime,b.duration))}return C},cancelScheduledValues(w){return D===null&&T.flush(d.context.currentTime),T.add(s(w)),m.cancelScheduledValues(w),C},exponentialRampToValueAtTime(w,N){if(w===0)throw new RangeError;if(!Number.isFinite(N)||N<0)throw new RangeError;return D===null&&T.flush(d.context.currentTime),T.add(i(w,N)),m.exponentialRampToValueAtTime(w,N),C},linearRampToValueAtTime(w,N){return D===null&&T.flush(d.context.currentTime),T.add(a(w,N)),m.linearRampToValueAtTime(w,N),C},setTargetAtTime(w,N,b){return D===null&&T.flush(d.context.currentTime),T.add(c(w,N,b)),m.setTargetAtTime(w,N,b),C},setValueAtTime(w,N){return D===null&&T.flush(d.context.currentTime),T.add(l(w,N)),m.setValueAtTime(w,N),C},setValueCurveAtTime(w,N,b){let O=w instanceof Float32Array?w:new Float32Array(w);if(p!==null&&p.name==="webkitAudioContext"){let L=N+b,Y=d.context.sampleRate,R=Math.ceil(N*Y),E=Math.floor(L*Y),H=E-R,F=new Float32Array(H);for(let $=0;$<H;$+=1){let X=(O.length-1)/b*((R+$)/Y-N),B=Math.floor(X),M=Math.ceil(X);F[$]=B===M?O[B]:(1-(X-B))*O[B]+(1-(M-X))*O[M]}D===null&&T.flush(d.context.currentTime),T.add(u(F,N,b)),m.setValueCurveAtTime(F,N,b);let ee=E/Y;ee<L&&f(C,F[F.length-1],ee),f(C,O[O.length-1],L)}else D===null&&T.flush(d.context.currentTime),T.add(u(O,N,b)),m.setValueCurveAtTime(O,N,b);return C}};return t.set(C,m),e.set(C,d),o(C,D),C};var Ad=o=>({replay(e){for(let t of o)if(t.type==="exponentialRampToValue"){let{endTime:n,value:r}=t;e.exponentialRampToValueAtTime(r,n)}else if(t.type==="linearRampToValue"){let{endTime:n,value:r}=t;e.linearRampToValueAtTime(r,n)}else if(t.type==="setTarget"){let{startTime:n,target:r,timeConstant:s}=t;e.setTargetAtTime(r,n,s)}else if(t.type==="setValue"){let{startTime:n,value:r}=t;e.setValueAtTime(r,n)}else if(t.type==="setValueCurve"){let{duration:n,startTime:r,values:s}=t;e.setValueCurveAtTime(s,r,n)}else throw new Error("Can't apply an unknown automation.")}});var xi=class{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((n,r)=>e.call(t,n,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}};var zb={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},Cd=(o,e,t,n,r,s,i,a,c,l,u,p,f,d)=>class extends e{constructor(m,g,x){var T;let D=a(m),C=c(D),w=u(A(A({},zb),x));f(w);let N=_i.get(D),b=N==null?void 0:N.get(g),O=C||D.state!=="closed"?D:(T=i(D))!==null&&T!==void 0?T:D,L=r(O,C?null:m.baseLatency,l,g,b,w),Y=C?n(g,w,b):null;super(m,!0,L,Y);let R=[];L.parameters.forEach((H,F)=>{let ee=t(this,C,H);R.push([F,ee])}),this._nativeAudioWorkletNode=L,this._onprocessorerror=null,this._parameters=new xi(R),C&&o(D,this);let{activeInputs:E}=s(this);p(L,E)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(m){let g=typeof m=="function"?d(this,m):null;this._nativeAudioWorkletNode.onprocessorerror=g;let x=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=x!==null&&x===g?m:x}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Xr(o,e,t,n,r){if(typeof o.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),o.copyFromChannel(e[t],n,r);else{let s=o.getChannelData(n);if(e[t].byteLength===0)e[t]=s.slice(r,r+128);else{let i=new Float32Array(s.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(i)}}}var Va=(o,e,t,n,r)=>{typeof o.copyToChannel=="function"?e[t].byteLength!==0&&o.copyToChannel(e[t],n,r):e[t].byteLength!==0&&o.getChannelData(n).set(e[t],r)};var Kr=(o,e)=>{let t=[];for(let n=0;n<o;n+=1){let r=[],s=typeof e=="number"?e:e[n];for(let i=0;i<s;i+=1)r.push(new Float32Array(128));t.push(r)}return t};var kd=(o,e)=>{let t=dt(vi,o),n=Fe(e);return dt(t,n)};var $b=(o,e,t,n,r,s,i)=>ie(void 0,null,function*(){let a=e===null?Math.ceil(o.context.length/128)*128:e.length,c=n.channelCount*n.numberOfInputs,l=r.reduce((g,x)=>g+x,0),u=l===0?null:t.createBuffer(l,a,t.sampleRate);if(s===void 0)throw new Error("Missing the processor constructor.");let p=mt(o),f=yield kd(t,o),d=Kr(n.numberOfInputs,n.channelCount),h=Kr(n.numberOfOutputs,r),m=Array.from(o.parameters.keys()).reduce((g,x)=>se(A({},g),{[x]:new Float32Array(128)}),{});for(let g=0;g<a;g+=128){if(n.numberOfInputs>0&&e!==null)for(let x=0;x<n.numberOfInputs;x+=1)for(let T=0;T<n.channelCount;T+=1)Xr(e,d[x],T,T,g);s.parameterDescriptors!==void 0&&e!==null&&s.parameterDescriptors.forEach(({name:x},T)=>{Xr(e,m,x,c+T,g)});for(let x=0;x<n.numberOfInputs;x+=1)for(let T=0;T<r[x];T+=1)h[x][T].byteLength===0&&(h[x][T]=new Float32Array(128));try{let x=d.map((D,C)=>p.activeInputs[C].size===0?[]:D),T=i(g/t.sampleRate,t.sampleRate,()=>f.process(x,h,m));if(u!==null)for(let D=0,C=0;D<n.numberOfOutputs;D+=1){for(let w=0;w<r[D];w+=1)Va(u,h[D],w,C+w,g);C+=r[D]}if(!T)break}catch(x){o.dispatchEvent(new ErrorEvent("processorerror",{colno:x.colno,filename:x.filename,lineno:x.lineno,message:x.message}));break}}return u}),Dd=(o,e,t,n,r,s,i,a,c,l,u,p,f,d,h,m)=>(g,x,T)=>{let D=new WeakMap,C=null,w=(N,b)=>ie(void 0,null,function*(){let O=u(N),L=null,Y=Ce(O,b),R=Array.isArray(x.outputChannelCount)?x.outputChannelCount:Array.from(x.outputChannelCount);if(p===null){let E=R.reduce(($,X)=>$+X,0),H=r(b,{channelCount:Math.max(1,E),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,E)}),F=[];for(let $=0;$<N.numberOfOutputs;$+=1)F.push(n(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:R[$]}));let ee=i(b,{channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,gain:1});ee.connect=e.bind(null,F),ee.disconnect=c.bind(null,F),L=[H,F,ee]}else Y||(O=new p(b,g));if(D.set(b,L===null?O:L[2]),L!==null){if(C===null){if(T===void 0)throw new Error("Missing the processor constructor.");if(f===null)throw new Error("Missing the native OfflineAudioContext constructor.");let X=N.channelCount*N.numberOfInputs,B=T.parameterDescriptors===void 0?0:T.parameterDescriptors.length,M=X+B;C=$b(N,M===0?null:yield(()=>ie(void 0,null,function*(){let V=new f(M,Math.ceil(N.context.length/128)*128,b.sampleRate),J=[],Z=[];for(let Se=0;Se<x.numberOfInputs;Se+=1)J.push(i(V,{channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,gain:1})),Z.push(r(V,{channelCount:x.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:x.channelCount}));let de=yield Promise.all(Array.from(N.parameters.values()).map(Se=>ie(void 0,null,function*(){let pe=s(V,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Se.value});return yield d(V,Se,pe.offset),pe}))),ce=n(V,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,X+B)});for(let Se=0;Se<x.numberOfInputs;Se+=1){J[Se].connect(Z[Se]);for(let pe=0;pe<x.channelCount;pe+=1)Z[Se].connect(ce,pe,Se*x.channelCount+pe)}for(let[Se,pe]of de.entries())pe.connect(ce,0,X+Se),pe.start(0);return ce.connect(V.destination),yield Promise.all(J.map(Se=>h(N,V,Se))),m(V)}))(),b,x,R,T,l)}let E=yield C,H=t(b,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[F,ee,$]=L;E!==null&&(H.buffer=E,H.start(0)),H.connect(F);for(let X=0,B=0;X<N.numberOfOutputs;X+=1){let M=ee[X];for(let U=0;U<R[X];U+=1)F.connect(M,B+U,U);B+=R[X]}return $}if(Y)for(let[E,H]of N.parameters.entries())yield o(b,H,O.parameters.get(E));else for(let[E,H]of N.parameters.entries())yield d(b,H,O.parameters.get(E));return yield h(N,b,O),O});return{render(N,b){a(b,N);let O=D.get(b);return O!==void 0?Promise.resolve(O):w(N,b)}}};var Md=(o,e,t,n,r,s,i,a,c,l,u,p,f,d,h,m,g,x,T,D)=>class extends h{constructor(w,N){super(w,N);this._nativeContext=w,this._audioWorklet=o===void 0?void 0:{addModule:(b,O)=>o(this,b,O)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(w,N,b){return new t({length:N,numberOfChannels:w,sampleRate:b})}createBufferSource(){return new n(this)}createChannelMerger(w=6){return new s(this,{numberOfInputs:w})}createChannelSplitter(w=6){return new i(this,{numberOfOutputs:w})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(w=1){return new u(this,{maxDelayTime:w})}createDynamicsCompressor(){return new p(this)}createGain(){return new f(this)}createIIRFilter(w,N){return new d(this,{feedback:N,feedforward:w})}createOscillator(){return new m(this)}createPanner(){return new g(this)}createPeriodicWave(w,N,b={disableNormalization:!1}){return new x(this,se(A({},b),{imag:N,real:w}))}createStereoPanner(){return new T(this)}createWaveShaper(){return new D(this)}decodeAudioData(w,N,b){return l(this._nativeContext,w).then(O=>(typeof N=="function"&&N(O),O),O=>{throw typeof b=="function"&&b(O),O})}};var Ub={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Pd=(o,e,t,n,r,s,i,a)=>class extends o{constructor(l,u){let p=s(l),f=A(A({},Ub),u),d=r(p,f),h=i(p),m=h?t():null;super(l,!1,d,m);this._Q=e(this,h,d.Q,et,it),this._detune=e(this,h,d.detune,1200*Math.log2(et),-1200*Math.log2(et)),this._frequency=e(this,h,d.frequency,l.sampleRate/2,0),this._gain=e(this,h,d.gain,40*Math.log10(et),it),this._nativeBiquadFilterNode=d,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(l){this._nativeBiquadFilterNode.type=l}getFrequencyResponse(l,u,p){try{this._nativeBiquadFilterNode.getFrequencyResponse(l,u,p)}catch(f){throw f.code===11?n():f}if(l.length!==u.length||u.length!==p.length)throw n()}};var Id=(o,e,t,n,r)=>()=>{let s=new WeakMap,i=(a,c)=>ie(void 0,null,function*(){let l=t(a),u=Ce(l,c);if(!u){let p={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=e(c,p)}return s.set(c,l),u?(yield o(c,a.Q,l.Q),yield o(c,a.detune,l.detune),yield o(c,a.frequency,l.frequency),yield o(c,a.gain,l.gain)):(yield n(c,a.Q,l.Q),yield n(c,a.detune,l.detune),yield n(c,a.frequency,l.frequency),yield n(c,a.gain,l.gain)),yield r(a,c,l),l});return{render(a,c){let l=s.get(c);return l!==void 0?Promise.resolve(l):i(a,c)}}};var Fd=(o,e)=>(t,n)=>{let r=e.get(t);if(r!==void 0)return r;let s=o.get(t);if(s!==void 0)return s;try{let i=n();return i instanceof Promise?(o.set(t,i),i.catch(()=>!1).then(a=>(o.delete(t),e.set(t,a),a))):(e.set(t,i),i)}catch(i){return e.set(t,!1),!1}};var Gb={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Rd=(o,e,t,n,r)=>class extends o{constructor(i,a){let c=n(i),l=A(A({},Gb),a),u=t(c,l),p=r(c)?e():null;super(i,!1,u,p)}};var Vd=(o,e,t)=>()=>{let n=new WeakMap,r=(s,i)=>ie(void 0,null,function*(){let a=e(s);if(!Ce(a,i)){let l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=o(i,l)}return n.set(i,a),yield t(s,i,a),a});return{render(s,i){let a=n.get(i);return a!==void 0?Promise.resolve(a):r(s,i)}}};var Hb={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},qd=(o,e,t,n,r,s)=>class extends o{constructor(a,c){let l=n(a),u=s(A(A({},Hb),c)),p=t(l,u),f=r(l)?e():null;super(a,!1,p,f)}};var Ld=(o,e,t)=>()=>{let n=new WeakMap,r=(s,i)=>ie(void 0,null,function*(){let a=e(s);if(!Ce(a,i)){let l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=o(i,l)}return n.set(i,a),yield t(s,i,a),a});return{render(s,i){let a=n.get(i);return a!==void 0?Promise.resolve(a):r(s,i)}}};var Bd=o=>(e,t,n)=>o(t,e,n);var jd=o=>(e,t,n=0,r=0)=>{let s=e[n];if(s===void 0)throw o();return rr(t)?s.connect(t,0,r):s.connect(t,0)};var Wd=o=>(e,t)=>{let n=o(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return n.buffer=r,n.loop=!0,n.connect(t),n.start(),()=>{n.stop(),n.disconnect(t)}};var Yb={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},zd=(o,e,t,n,r,s,i)=>class extends o{constructor(c,l){let u=r(c),p=A(A({},Yb),l),f=n(u,p),d=s(u),h=d?t():null;super(c,!1,f,h);this._constantSourceNodeRenderer=h,this._nativeConstantSourceNode=f,this._offset=e(this,d,f.offset,et,it),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){let l=typeof c=="function"?i(this,c):null;this._nativeConstantSourceNode.onended=l;let u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===l?c:u}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){xo(this);let l=()=>{this._nativeConstantSourceNode.removeEventListener("ended",l),It(this)&&Bo(this)};this._nativeConstantSourceNode.addEventListener("ended",l)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}};var $d=(o,e,t,n,r)=>()=>{let s=new WeakMap,i=null,a=null,c=(l,u)=>ie(void 0,null,function*(){let p=t(l),f=Ce(p,u);if(!f){let d={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,offset:p.offset.value};p=e(u,d),i!==null&&p.start(i),a!==null&&p.stop(a)}return s.set(u,p),f?yield o(u,l.offset,p.offset):yield n(u,l.offset,p.offset),yield r(l,u,p),p});return{set start(l){i=l},set stop(l){a=l},render(l,u){let p=s.get(u);return p!==void 0?Promise.resolve(p):c(l,u)}}};var Ud=o=>e=>(o[0]=e,o[0]);var Xb={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Gd=(o,e,t,n,r,s)=>class extends o{constructor(a,c){let l=n(a),u=A(A({},Xb),c),p=t(l,u),d=r(l)?e():null;super(a,!1,p,d);this._isBufferNullified=!1,this._nativeConvolverNode=p,u.buffer!==null&&s(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){let c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,44100),this._isBufferNullified=!0,s(this,0)}else this._isBufferNullified=!1,s(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}};var Hd=(o,e,t)=>()=>{let n=new WeakMap,r=(s,i)=>ie(void 0,null,function*(){let a=e(s);if(!Ce(a,i)){let l={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=o(i,l)}return n.set(i,a),io(a)?yield t(s,i,a.inputs[0]):yield t(s,i,a),a});return{render(s,i){let a=n.get(i);return a!==void 0?Promise.resolve(a):r(s,i)}}};var Yd=(o,e)=>(t,n,r)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,n,r)}catch(s){throw s.name==="SyntaxError"?o():s}};var Xd=()=>new DOMException("","DataCloneError");var gl=o=>{let{port1:e,port2:t}=new MessageChannel;return new Promise(n=>{let r=()=>{t.onmessage=null,e.close(),t.close(),n()};t.onmessage=()=>r();try{e.postMessage(o,[o])}finally{r()}})};var Kd=(o,e,t,n,r,s,i,a,c,l,u)=>(p,f)=>{let d=i(p)?p:s(p);if(r.has(f)){let h=t();return Promise.reject(h)}try{r.add(f)}catch(h){}return e(c,()=>c(d))?d.decodeAudioData(f).then(h=>(gl(f).catch(()=>{}),e(a,()=>a(h))||u(h),o.add(h),h)):new Promise((h,m)=>{let g=()=>ie(void 0,null,function*(){try{yield gl(f)}catch(T){}}),x=T=>{m(T),g()};try{d.decodeAudioData(f,T=>{typeof T.copyFromChannel!="function"&&(l(T),Ur(T)),o.add(T),g().then(()=>h(T))},T=>{x(T===null?n():T)})}catch(T){x(T)}})};var Qd=(o,e,t,n,r,s,i,a)=>(c,l)=>{let u=e.get(c);if(u===void 0)throw new Error("Missing the expected cycle count.");let p=s(c.context),f=a(p);if(u===l){if(e.delete(c),!f&&i(c)){let d=n(c),{outputs:h}=t(c);for(let m of h)if(An(m)){let g=n(m[0]);o(d,g,m[1],m[2])}else{let g=r(m[0]);d.connect(g,m[1])}}}else e.set(c,u-l)};var Kb={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Zd=(o,e,t,n,r,s,i)=>class extends o{constructor(c,l){let u=r(c),p=A(A({},Kb),l),f=n(u,p),d=s(u),h=d?t(p.maxDelayTime):null;super(c,!1,f,h);this._delayTime=e(this,d,f.delayTime),i(this,p.maxDelayTime)}get delayTime(){return this._delayTime}};var Jd=(o,e,t,n,r)=>s=>{let i=new WeakMap,a=(c,l)=>ie(void 0,null,function*(){let u=t(c),p=Ce(u,l);if(!p){let f={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:s};u=e(l,f)}return i.set(l,u),p?yield o(l,c.delayTime,u.delayTime):yield n(l,c.delayTime,u.delayTime),yield r(c,l,u),u});return{render(c,l){let u=i.get(l);return u!==void 0?Promise.resolve(u):a(c,l)}}};var eh=o=>(e,t,n,r)=>o(e[r],s=>s[0]===t&&s[1]===n);var th=o=>(e,t)=>{o(e).delete(t)};var oh=o=>"delayTime"in o;var nh=(o,e,t)=>function n(r,s){let i=or(s)?s:t(o,s);if(oh(i))return[];if(r[0]===i)return[r];if(r.includes(i))return[];let{outputs:a}=e(i);return Array.from(a).map(c=>n([...r,i],c[0])).reduce((c,l)=>c.concat(l),[])};var qa=(o,e,t)=>{let n=e[t];if(n===void 0)throw o();return n},rh=o=>(e,t=void 0,n=void 0,r=0)=>t===void 0?e.forEach(s=>s.disconnect()):typeof t=="number"?qa(o,e,t).disconnect():rr(t)?n===void 0?e.forEach(s=>s.disconnect(t)):r===void 0?qa(o,e,n).disconnect(t,0):qa(o,e,n).disconnect(t,0,r):n===void 0?e.forEach(s=>s.disconnect(t)):qa(o,e,n).disconnect(t,0);var Qb={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},sh=(o,e,t,n,r,s,i,a)=>class extends o{constructor(l,u){let p=s(l),f=A(A({},Qb),u),d=n(p,f),h=i(p),m=h?t():null;super(l,!1,d,m);this._attack=e(this,h,d.attack),this._knee=e(this,h,d.knee),this._nativeDynamicsCompressorNode=d,this._ratio=e(this,h,d.ratio),this._release=e(this,h,d.release),this._threshold=e(this,h,d.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(l){let u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=l,l>2)throw this._nativeDynamicsCompressorNode.channelCount=u,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(l){let u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=l,l==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}};var ih=(o,e,t,n,r)=>()=>{let s=new WeakMap,i=(a,c)=>ie(void 0,null,function*(){let l=t(a),u=Ce(l,c);if(!u){let p={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=e(c,p)}return s.set(c,l),u?(yield o(c,a.attack,l.attack),yield o(c,a.knee,l.knee),yield o(c,a.ratio,l.ratio),yield o(c,a.release,l.release),yield o(c,a.threshold,l.threshold)):(yield n(c,a.attack,l.attack),yield n(c,a.knee,l.knee),yield n(c,a.ratio,l.ratio),yield n(c,a.release,l.release),yield n(c,a.threshold,l.threshold)),yield r(a,c,l),l});return{render(a,c){let l=s.get(c);return l!==void 0?Promise.resolve(l):i(a,c)}}};var ah=()=>new DOMException("","EncodingError");var ch=o=>e=>new Promise((t,n)=>{if(o===null){n(new SyntaxError);return}let r=o.document.head;if(r===null)n(new SyntaxError);else{let s=o.document.createElement("script"),i=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(i),c=o.onerror,l=()=>{o.onerror=c,URL.revokeObjectURL(a)};o.onerror=(u,p,f,d,h)=>{if(p===a||p===o.location.href&&f===1&&d===1)return l(),n(h),!1;if(c!==null)return c(u,p,f,d,h)},s.onerror=()=>{l(),n(new SyntaxError)},s.onload=()=>{l(),t()},s.src=a,s.type="module",r.appendChild(s)}});var lh=o=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,n,r){if(n!==null){let s=this._listeners.get(n);s===void 0&&(s=o(this,n),typeof n=="function"&&this._listeners.set(n,s)),this._nativeEventTarget.addEventListener(t,s,r)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,n,r){let s=n===null?void 0:this._listeners.get(n);this._nativeEventTarget.removeEventListener(t,s===void 0?null:s,r)}};var uh=o=>(e,t,n)=>{Object.defineProperties(o,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return n()}finally{o!==null&&(delete o.currentFrame,delete o.currentTime)}};var ph=o=>e=>ie(void 0,null,function*(){try{let t=yield fetch(e);if(t.ok)return[yield t.text(),t.url]}catch(t){}throw o()});var Zb={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},fh=(o,e,t,n,r,s)=>class extends o{constructor(a,c){let l=r(a),u=A(A({},Zb),c),p=n(l,u),f=s(l),d=f?t():null;super(a,!1,p,d);this._gain=e(this,f,p.gain,et,it)}get gain(){return this._gain}};var dh=(o,e,t,n,r)=>()=>{let s=new WeakMap,i=(a,c)=>ie(void 0,null,function*(){let l=t(a),u=Ce(l,c);if(!u){let p={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=e(c,p)}return s.set(c,l),u?yield o(c,a.gain,l.gain):yield n(c,a.gain,l.gain),yield r(a,c,l),l});return{render(a,c){let l=s.get(c);return l!==void 0?Promise.resolve(l):i(a,c)}}};var hh=(o,e)=>t=>e(o,t);var mh=o=>e=>{let t=o(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer};var gh=o=>e=>{var t;return(t=o.get(e))!==null&&t!==void 0?t:0};var _h=o=>e=>{let t=o(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer};var vh=o=>e=>o.get(e);var He=()=>new DOMException("","InvalidStateError");var yh=o=>e=>{let t=o.get(e);if(t===void 0)throw He();return t};var xh=(o,e)=>t=>{let n=o.get(t);if(n!==void 0)return n;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return n=new e(1,1,44100),o.set(t,n),n};var bh=o=>e=>{let t=o.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t};var Qr=()=>new DOMException("","InvalidAccessError");var wh=o=>{o.getFrequencyResponse=(e=>(t,n,r)=>{if(t.length!==n.length||n.length!==r.length)throw Qr();return e.call(o,t,n,r)})(o.getFrequencyResponse)};var Jb={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Sh=(o,e,t,n,r,s)=>class extends o{constructor(a,c){let l=n(a),u=r(l),p=A(A({},Jb),c),f=e(l,u?null:a.baseLatency,p),d=u?t(p.feedback,p.feedforward):null;super(a,!1,f,d);wh(f),this._nativeIIRFilterNode=f,s(this,1)}getFrequencyResponse(a,c,l){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,l)}};var La=(o,e,t,n,r,s,i,a,c,l,u)=>{let p=l.length,f=a;for(let d=0;d<p;d+=1){let h=t[0]*l[d];for(let m=1;m<r;m+=1){let g=f-m&c-1;h+=t[m]*s[g],h-=o[m]*i[g]}for(let m=r;m<n;m+=1)h+=t[m]*s[f-m&c-1];for(let m=r;m<e;m+=1)h-=o[m]*i[f-m&c-1];s[f]=l[d],i[f]=h,f=f+1&c-1,u[d]=h}return f};var ew=(o,e,t,n)=>{let r=t instanceof Float64Array?t:new Float64Array(t),s=n instanceof Float64Array?n:new Float64Array(n),i=r.length,a=s.length,c=Math.min(i,a);if(r[0]!==1){for(let h=0;h<i;h+=1)s[h]/=r[0];for(let h=1;h<a;h+=1)r[h]/=r[0]}let l=32,u=new Float32Array(l),p=new Float32Array(l),f=e.createBuffer(o.numberOfChannels,o.length,o.sampleRate),d=o.numberOfChannels;for(let h=0;h<d;h+=1){let m=o.getChannelData(h),g=f.getChannelData(h);u.fill(0),p.fill(0),La(r,i,s,a,c,u,p,0,l,m,g)}return f},Th=(o,e,t,n,r)=>(s,i)=>{let a=new WeakMap,c=null,l=(u,p)=>ie(void 0,null,function*(){let f=null,d=e(u),h=Ce(d,p);if(p.createIIRFilter===void 0?f=o(p,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):h||(d=p.createIIRFilter(i,s)),a.set(p,f===null?d:f),f!==null){if(c===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");let g=new t(u.context.destination.channelCount,u.context.length,p.sampleRate);c=(()=>ie(void 0,null,function*(){yield n(u,g,g.destination);let x=yield r(g);return ew(x,p,s,i)}))()}let m=yield c;return f.buffer=m,f.start(0),f}return yield n(u,p,d),d});return{render(u,p){let f=a.get(p);return f!==void 0?Promise.resolve(f):l(u,p)}}};var Oh=(o,e,t,n,r,s)=>i=>(a,c)=>{let l=o.get(a);if(l===void 0){if(!i&&s(a)){let u=n(a),{outputs:p}=t(a);for(let f of p)if(An(f)){let d=n(f[0]);e(u,d,f[1],f[2])}else{let d=r(f[0]);u.disconnect(d,f[1])}}o.set(a,c)}else o.set(a,l+c)};var Nh=(o,e)=>t=>{let n=o.get(t);return e(n)||e(t)};var Eh=(o,e)=>t=>o.has(t)||e(t);var Ah=(o,e)=>t=>o.has(t)||e(t);var Ch=(o,e)=>t=>{let n=o.get(t);return e(n)||e(t)};var kh=o=>e=>o!==null&&e instanceof o;var Dh=o=>e=>o!==null&&typeof o.AudioNode=="function"&&e instanceof o.AudioNode;var Mh=o=>e=>o!==null&&typeof o.AudioParam=="function"&&e instanceof o.AudioParam;var Ph=(o,e)=>t=>o(t)||e(t);var Ih=o=>e=>o!==null&&e instanceof o;var Fh=o=>o!==null&&o.isSecureContext;var Rh=(o,e,t,n)=>class extends o{constructor(s,i){let a=t(s),c=e(a,i);if(n(a))throw TypeError();super(s,!0,c,null);this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}};var tw={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},Vh=(o,e,t,n)=>class extends o{constructor(s,i){let a=t(s);if(n(a))throw new TypeError;let c=A(A({},tw),i),l=e(a,c);super(s,!1,l,null);this._nativeMediaStreamAudioDestinationNode=l}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}};var qh=(o,e,t,n)=>class extends o{constructor(s,i){let a=t(s),c=e(a,i);if(n(a))throw new TypeError;super(s,!0,c,null);this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}};var Lh=(o,e,t)=>class extends o{constructor(r,s){let i=t(r),a=e(i,s);super(r,!0,a,null)}};var Bh=(o,e,t,n,r)=>class extends n{constructor(i={}){if(r===null)throw new Error("Missing the native AudioContext constructor.");let a;try{a=new r(i)}catch(u){throw u.code===12&&u.message==="sampleRate is not in range"?e():u}if(a===null)throw t();if(!Fa(i.latencyHint))throw new TypeError(`The provided value '${i.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(i.sampleRate!==void 0&&a.sampleRate!==i.sampleRate)throw e();super(a,2);let{latencyHint:c}=i,{sampleRate:l}=a;if(this._baseLatency=typeof a.baseLatency=="number"?a.baseLatency:c==="balanced"?512/l:c==="interactive"||c===void 0?256/l:c==="playback"?1024/l:Math.max(2,Math.min(128,Math.round(c*l/128)))*128/l,this._nativeAudioContext=a,r.name==="webkitAudioContext"?(this._nativeGainNode=a.createGain(),this._nativeOscillatorNode=a.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(a.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,a.state==="running"){this._state="suspended";let u=()=>{this._state==="suspended"&&(this._state=null),a.removeEventListener("statechange",u)};a.addEventListener("statechange",u)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw o()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),En(this)}))}resume(){return this._state==="suspended"?new Promise((i,a)=>{let c=()=>{this._nativeAudioContext.removeEventListener("statechange",c),this._nativeAudioContext.state==="running"?i():this.resume().then(i,a)};this._nativeAudioContext.addEventListener("statechange",c)}):this._nativeAudioContext.resume().catch(i=>{throw i===void 0||i.code===15?o():i})}suspend(){return this._nativeAudioContext.suspend().catch(i=>{throw i===void 0?o():i})}};var jh=(o,e,t,n,r,s)=>class extends t{constructor(a,c){super(a);this._nativeContext=a,zr.set(this,a),n(a)&&r.set(a,new Set),this._destination=new o(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){let c=typeof a=="function"?s(this,a):null;this._nativeContext.onstatechange=c;let l=this._nativeContext.onstatechange;this._onstatechange=l!==null&&l===c?a:l}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}};var wo=o=>{let e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{let t=o.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch(t){}return!1};var ow={numberOfChannels:1},Wh=(o,e,t,n,r)=>class extends n{constructor(i){let{length:a,numberOfChannels:c,sampleRate:l}=A(A({},ow),i),u=t(c,a,l);o(wo,()=>wo(u))||u.addEventListener("statechange",(()=>{let p=0,f=d=>{this._state==="running"&&(p>0?(u.removeEventListener("statechange",f),d.stopImmediatePropagation(),this._waitForThePromiseToSettle(d)):p+=1)};return f})());super(u,c);this._length=a,this._nativeOfflineAudioContext=u,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(e()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,En(this)}))}_waitForThePromiseToSettle(i){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(i):setTimeout(()=>this._waitForThePromiseToSettle(i))}};var zh=(o,e)=>(t,n,r)=>{let s=new Set;return t.connect=(i=>(a,c=0,l=0)=>{let u=s.size===0;if(e(a))return i.call(t,a,c,l),o(s,[a,c,l],p=>p[0]===a&&p[1]===c&&p[2]===l,!0),u&&n(),a;i.call(t,a,c),o(s,[a,c],p=>p[0]===a&&p[1]===c,!0),u&&n()})(t.connect),t.disconnect=(i=>(a,c,l)=>{let u=s.size>0;if(a===void 0)i.apply(t),s.clear();else if(typeof a=="number"){i.call(t,a);for(let f of s)f[1]===a&&s.delete(f)}else{e(a)?i.call(t,a,c,l):i.call(t,a,c);for(let f of s)f[0]===a&&(c===void 0||f[1]===c)&&(l===void 0||f[2]===l)&&s.delete(f)}let p=s.size===0;u&&p&&r()})(t.disconnect),t};var ke=(o,e,t)=>{let n=e[t];n!==void 0&&n!==o[t]&&(o[t]=n)};var we=(o,e)=>{ke(o,e,"channelCount"),ke(o,e,"channelCountMode"),ke(o,e,"channelInterpretation")};var _l=o=>typeof o.getFloatTimeDomainData=="function";var $h=o=>{o.getFloatTimeDomainData=e=>{let t=new Uint8Array(e.length);o.getByteTimeDomainData(t);let n=Math.max(t.length,o.fftSize);for(let r=0;r<n;r+=1)e[r]=(t[r]-128)*.0078125;return e}};var Uh=(o,e)=>(t,n)=>{let r=t.createAnalyser();if(we(r,n),!(n.maxDecibels>n.minDecibels))throw e();return ke(r,n,"fftSize"),ke(r,n,"maxDecibels"),ke(r,n,"minDecibels"),ke(r,n,"smoothingTimeConstant"),o(_l,()=>_l(r))||$h(r),r};var Gh=o=>o===null?null:o.hasOwnProperty("AudioBuffer")?o.AudioBuffer:null;var Me=(o,e,t)=>{let n=e[t];n!==void 0&&n!==o[t].value&&(o[t].value=n)};var Hh=o=>{o.start=(e=>{let t=!1;return(n=0,r=0,s)=>{if(t)throw He();e.call(o,n,r,s),t=!0}})(o.start)};var Zr=o=>{o.start=(e=>(t=0,n=0,r)=>{if(typeof r=="number"&&r<0||n<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(o,t,n,r)})(o.start)};var Jr=o=>{o.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(o,t)})(o.stop)};var Yh=(o,e,t,n,r,s,i,a,c,l,u)=>(p,f)=>{let d=p.createBufferSource();return we(d,f),Me(d,f,"playbackRate"),ke(d,f,"buffer"),ke(d,f,"loop"),ke(d,f,"loopEnd"),ke(d,f,"loopStart"),e(t,()=>t(p))||Hh(d),e(n,()=>n(p))||c(d),e(r,()=>r(p))||l(d,p),e(s,()=>s(p))||Zr(d),e(i,()=>i(p))||u(d,p),e(a,()=>a(p))||Jr(d),o(p,d),d};var Xh=o=>o===null?null:o.hasOwnProperty("AudioContext")?o.AudioContext:o.hasOwnProperty("webkitAudioContext")?o.webkitAudioContext:null;var Kh=(o,e)=>(t,n,r)=>{let s=t.destination;if(s.channelCount!==n)try{s.channelCount=n}catch(a){}r&&s.channelCountMode!=="explicit"&&(s.channelCountMode="explicit"),s.maxChannelCount===0&&Object.defineProperty(s,"maxChannelCount",{value:n});let i=o(t,{channelCount:n,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,gain:1});return e(i,"channelCount",a=>()=>a.call(i),a=>c=>{a.call(i,c);try{s.channelCount=c}catch(l){if(c>s.maxChannelCount)throw l}}),e(i,"channelCountMode",a=>()=>a.call(i),a=>c=>{a.call(i,c),s.channelCountMode=c}),e(i,"channelInterpretation",a=>()=>a.call(i),a=>c=>{a.call(i,c),s.channelInterpretation=c}),Object.defineProperty(i,"maxChannelCount",{get:()=>s.maxChannelCount}),i.connect(s),i};var Qh=o=>o===null?null:o.hasOwnProperty("AudioWorkletNode")?o.AudioWorkletNode:null;var Zh=o=>{let{port1:e}=new MessageChannel;try{e.postMessage(o)}finally{e.close()}};var Jh=(o,e,t,n,r)=>(s,i,a,c,l,u)=>{if(a!==null)try{let p=new a(s,c,u),f=new Map,d=null;if(Object.defineProperties(p,{channelCount:{get:()=>u.channelCount,set:()=>{throw o()}},channelCountMode:{get:()=>"explicit",set:()=>{throw o()}},onprocessorerror:{get:()=>d,set:h=>{typeof d=="function"&&p.removeEventListener("processorerror",d),d=typeof h=="function"?h:null,typeof d=="function"&&p.addEventListener("processorerror",d)}}}),p.addEventListener=(h=>(...m)=>{if(m[0]==="processorerror"){let g=typeof m[1]=="function"?m[1]:typeof m[1]=="object"&&m[1]!==null&&typeof m[1].handleEvent=="function"?m[1].handleEvent:null;if(g!==null){let x=f.get(m[1]);x!==void 0?m[1]=x:(m[1]=T=>{T.type==="error"?(Object.defineProperties(T,{type:{value:"processorerror"}}),g(T)):g(new ErrorEvent(m[0],A({},T)))},f.set(g,m[1]))}}return h.call(p,"error",m[1],m[2]),h.call(p,...m)})(p.addEventListener),p.removeEventListener=(h=>(...m)=>{if(m[0]==="processorerror"){let g=f.get(m[1]);g!==void 0&&(f.delete(m[1]),m[1]=g)}return h.call(p,"error",m[1],m[2]),h.call(p,m[0],m[1],m[2])})(p.removeEventListener),u.numberOfOutputs!==0){let h=t(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return p.connect(h).connect(s.destination),r(p,()=>h.disconnect(),()=>h.connect(s.destination))}return p}catch(p){throw p.code===11?n():p}if(l===void 0)throw n();return Zh(u),e(s,i,l,u)};var Ba=(o,e)=>o===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(o*e)))));var em=o=>new Promise((e,t)=>{let{port1:n,port2:r}=new MessageChannel;n.onmessage=({data:s})=>{n.close(),r.close(),e(s)},n.onmessageerror=({data:s})=>{n.close(),r.close(),t(s)},r.postMessage(o)});var tm=(o,e)=>ie(void 0,null,function*(){let t=yield em(e);return new o(t)});var om=(o,e,t,n)=>{let r=vi.get(o);r===void 0&&(r=new WeakMap,vi.set(o,r));let s=tm(t,n);return r.set(e,s),s};var nm=(o,e,t,n,r,s,i,a,c,l,u,p,f)=>(d,h,m,g)=>{if(g.numberOfInputs===0&&g.numberOfOutputs===0)throw c();let x=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(x.some(_=>_<1))throw c();if(x.length!==g.numberOfOutputs)throw e();if(g.channelCountMode!=="explicit")throw c();let T=g.channelCount*g.numberOfInputs,D=x.reduce((_,S)=>_+S,0),C=m.parameterDescriptors===void 0?0:m.parameterDescriptors.length;if(T+C>6||D>6)throw c();let w=new MessageChannel,N=[],b=[];for(let _=0;_<g.numberOfInputs;_+=1)N.push(i(d,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),b.push(r(d,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));let O=[];if(m.parameterDescriptors!==void 0)for(let{defaultValue:_,maxValue:S,minValue:P,name:k}of m.parameterDescriptors){let I=s(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:g.parameterData[k]!==void 0?g.parameterData[k]:_===void 0?0:_});Object.defineProperties(I.offset,{defaultValue:{get:()=>_===void 0?0:_},maxValue:{get:()=>S===void 0?et:S},minValue:{get:()=>P===void 0?it:P}}),O.push(I)}let L=n(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,T+C)}),Y=Ba(h,d.sampleRate),R=a(d,Y,T+C,Math.max(1,D)),E=r(d,{channelCount:Math.max(1,D),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,D)}),H=[];for(let _=0;_<g.numberOfOutputs;_+=1)H.push(n(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:x[_]}));for(let _=0;_<g.numberOfInputs;_+=1){N[_].connect(b[_]);for(let S=0;S<g.channelCount;S+=1)b[_].connect(L,S,_*g.channelCount+S)}let F=new xi(m.parameterDescriptors===void 0?[]:m.parameterDescriptors.map(({name:_},S)=>{let P=O[S];return P.connect(L,0,T+S),P.start(0),[_,P.offset]}));L.connect(R);let ee=g.channelInterpretation,$=null,X=g.numberOfOutputs===0?[R]:H,B={get bufferSize(){return Y},get channelCount(){return g.channelCount},set channelCount(_){throw t()},get channelCountMode(){return g.channelCountMode},set channelCountMode(_){throw t()},get channelInterpretation(){return ee},set channelInterpretation(_){for(let S of N)S.channelInterpretation=_;ee=_},get context(){return R.context},get inputs(){return N},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return $},set onprocessorerror(_){typeof $=="function"&&B.removeEventListener("processorerror",$),$=typeof _=="function"?_:null,typeof $=="function"&&B.addEventListener("processorerror",$)},get parameters(){return F},get port(){return w.port2},addEventListener(..._){return R.addEventListener(_[0],_[1],_[2])},connect:o.bind(null,X),disconnect:l.bind(null,X),dispatchEvent(..._){return R.dispatchEvent(_[0])},removeEventListener(..._){return R.removeEventListener(_[0],_[1],_[2])}},M=new Map;w.port1.addEventListener=(_=>(...S)=>{if(S[0]==="message"){let P=typeof S[1]=="function"?S[1]:typeof S[1]=="object"&&S[1]!==null&&typeof S[1].handleEvent=="function"?S[1].handleEvent:null;if(P!==null){let k=M.get(S[1]);k!==void 0?S[1]=k:(S[1]=I=>{u(d.currentTime,d.sampleRate,()=>P(I))},M.set(P,S[1]))}}return _.call(w.port1,S[0],S[1],S[2])})(w.port1.addEventListener),w.port1.removeEventListener=(_=>(...S)=>{if(S[0]==="message"){let P=M.get(S[1]);P!==void 0&&(M.delete(S[1]),S[1]=P)}return _.call(w.port1,S[0],S[1],S[2])})(w.port1.removeEventListener);let U=null;Object.defineProperty(w.port1,"onmessage",{get:()=>U,set:_=>{typeof U=="function"&&w.port1.removeEventListener("message",U),U=typeof _=="function"?_:null,typeof U=="function"&&(w.port1.addEventListener("message",U),w.port1.start())}}),m.prototype.port=w.port1;let V=null;om(d,B,m,g).then(_=>V=_);let Z=Kr(g.numberOfInputs,g.channelCount),de=Kr(g.numberOfOutputs,x),ce=m.parameterDescriptors===void 0?[]:m.parameterDescriptors.reduce((_,{name:S})=>se(A({},_),{[S]:new Float32Array(128)}),{}),Se=!0,pe=()=>{g.numberOfOutputs>0&&R.disconnect(E);for(let _=0,S=0;_<g.numberOfOutputs;_+=1){let P=H[_];for(let k=0;k<x[_];k+=1)E.disconnect(P,S+k,k);S+=x[_]}},nt=new Map;R.onaudioprocess=({inputBuffer:_,outputBuffer:S})=>{if(V!==null){let P=p(B);for(let k=0;k<Y;k+=128){for(let I=0;I<g.numberOfInputs;I+=1)for(let z=0;z<g.channelCount;z+=1)Xr(_,Z[I],z,z,k);m.parameterDescriptors!==void 0&&m.parameterDescriptors.forEach(({name:I},z)=>{Xr(_,ce,I,T+z,k)});for(let I=0;I<g.numberOfInputs;I+=1)for(let z=0;z<x[I];z+=1)de[I][z].byteLength===0&&(de[I][z]=new Float32Array(128));try{let I=Z.map((W,G)=>{if(P[G].size>0)return nt.set(G,Y/128),W;let ae=nt.get(G);return ae===void 0?[]:(W.every(re=>re.every(le=>le===0))&&(ae===1?nt.delete(G):nt.set(G,ae-1)),W)});Se=u(d.currentTime+k/d.sampleRate,d.sampleRate,()=>V.process(I,de,ce));for(let W=0,G=0;W<g.numberOfOutputs;W+=1){for(let j=0;j<x[W];j+=1)Va(S,de[W],j,G+j,k);G+=x[W]}}catch(I){Se=!1,B.dispatchEvent(new ErrorEvent("processorerror",{colno:I.colno,filename:I.filename,lineno:I.lineno,message:I.message}))}if(!Se){for(let I=0;I<g.numberOfInputs;I+=1){N[I].disconnect(b[I]);for(let z=0;z<g.channelCount;z+=1)b[k].disconnect(L,z,I*g.channelCount+z)}if(m.parameterDescriptors!==void 0){let I=m.parameterDescriptors.length;for(let z=0;z<I;z+=1){let W=O[z];W.disconnect(L,0,T+z),W.stop()}}L.disconnect(R),R.onaudioprocess=null,Lt?pe():Dt();break}}}};let Lt=!1,oe=i(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),rt=()=>R.connect(oe).connect(d.destination),Dt=()=>{R.disconnect(oe),oe.disconnect()},yt=()=>{if(Se){Dt(),g.numberOfOutputs>0&&R.connect(E);for(let _=0,S=0;_<g.numberOfOutputs;_+=1){let P=H[_];for(let k=0;k<x[_];k+=1)E.connect(P,S+k,k);S+=x[_]}}Lt=!0},v=()=>{Se&&(rt(),pe()),Lt=!1};return rt(),f(B,yt,v)};var vl=(o,e)=>{let t=o.createBiquadFilter();return we(t,e),Me(t,e,"Q"),Me(t,e,"detune"),Me(t,e,"frequency"),Me(t,e,"gain"),ke(t,e,"type"),t};var rm=(o,e)=>(t,n)=>{let r=t.createChannelMerger(n.numberOfInputs);return o!==null&&o.name==="webkitAudioContext"&&e(t,r),we(r,n),r};var sm=o=>{let e=o.numberOfOutputs;Object.defineProperty(o,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw He()}}),Object.defineProperty(o,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw He()}}),Object.defineProperty(o,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw He()}})};var es=(o,e)=>{let t=o.createChannelSplitter(e.numberOfOutputs);return we(t,e),sm(t),t};var im=(o,e,t,n,r)=>(s,i)=>{if(s.createConstantSource===void 0)return t(s,i);let a=s.createConstantSource();return we(a,i),Me(a,i,"offset"),e(n,()=>n(s))||Zr(a),e(r,()=>r(s))||Jr(a),o(s,a),a};var ao=(o,e)=>(o.connect=e.connect.bind(e),o.disconnect=e.disconnect.bind(e),o);var am=(o,e,t,n)=>(r,a)=>{var c=a,{offset:s}=c,i=dn(c,["offset"]);let l=r.createBuffer(1,2,44100),u=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),p=t(r,se(A({},i),{gain:s})),f=l.getChannelData(0);f[0]=1,f[1]=1,u.buffer=l,u.loop=!0;let d={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(g){p.channelCount=g},get channelCountMode(){return p.channelCountMode},set channelCountMode(g){p.channelCountMode=g},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(g){p.channelInterpretation=g},get context(){return p.context},get inputs(){return[]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get offset(){return p.gain},get onended(){return u.onended},set onended(g){u.onended=g},addEventListener(...g){return u.addEventListener(g[0],g[1],g[2])},dispatchEvent(...g){return u.dispatchEvent(g[0])},removeEventListener(...g){return u.removeEventListener(g[0],g[1],g[2])},start(g=0){u.start.call(u,g)},stop(g=0){u.stop.call(u,g)}},h=()=>u.connect(p),m=()=>u.disconnect(p);return o(r,u),n(ao(d,p),h,m)};var cm=(o,e)=>(t,n)=>{let r=t.createConvolver();if(we(r,n),n.disableNormalization===r.normalize&&(r.normalize=!n.disableNormalization),ke(r,n,"buffer"),n.channelCount>2||(e(r,"channelCount",s=>()=>s.call(r),s=>i=>{if(i>2)throw o();return s.call(r,i)}),n.channelCountMode==="max"))throw o();return e(r,"channelCountMode",s=>()=>s.call(r),s=>i=>{if(i==="max")throw o();return s.call(r,i)}),r};var yl=(o,e)=>{let t=o.createDelay(e.maxDelayTime);return we(t,e),Me(t,e,"delayTime"),t};var lm=o=>(e,t)=>{let n=e.createDynamicsCompressor();if(we(n,t),t.channelCount>2||t.channelCountMode==="max")throw o();return Me(n,t,"attack"),Me(n,t,"knee"),Me(n,t,"ratio"),Me(n,t,"release"),Me(n,t,"threshold"),n};var Ft=(o,e)=>{let t=o.createGain();return we(t,e),Me(t,e,"gain"),t};var um=o=>(e,t,n)=>{if(e.createIIRFilter===void 0)return o(e,t,n);let r=e.createIIRFilter(n.feedforward,n.feedback);return we(r,n),r};function nw(o,e){let t=e[0]*e[0]+e[1]*e[1];return[(o[0]*e[0]+o[1]*e[1])/t,(o[1]*e[0]-o[0]*e[1])/t]}function rw(o,e){return[o[0]*e[0]-o[1]*e[1],o[0]*e[1]+o[1]*e[0]]}function pm(o,e){let t=[0,0];for(let n=o.length-1;n>=0;n-=1)t=rw(t,e),t[0]+=o[n];return t}var fm=(o,e,t,n)=>(r,s,{channelCount:i,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{let p=Ba(s,r.sampleRate),f=l instanceof Float64Array?l:new Float64Array(l),d=u instanceof Float64Array?u:new Float64Array(u),h=f.length,m=d.length,g=Math.min(h,m);if(h===0||h>20)throw n();if(f[0]===0)throw e();if(m===0||m>20)throw n();if(d[0]===0)throw e();if(f[0]!==1){for(let O=0;O<m;O+=1)d[O]/=f[0];for(let O=1;O<h;O+=1)f[O]/=f[0]}let x=t(r,p,i,i);x.channelCount=i,x.channelCountMode=a,x.channelInterpretation=c;let T=32,D=[],C=[],w=[];for(let O=0;O<i;O+=1){D.push(0);let L=new Float32Array(T),Y=new Float32Array(T);L.fill(0),Y.fill(0),C.push(L),w.push(Y)}x.onaudioprocess=O=>{let L=O.inputBuffer,Y=O.outputBuffer,R=L.numberOfChannels;for(let E=0;E<R;E+=1){let H=L.getChannelData(E),F=Y.getChannelData(E);D[E]=La(f,h,d,m,g,C[E],w[E],D[E],T,H,F)}};let N=r.sampleRate/2;return ao({get bufferSize(){return p},get channelCount(){return x.channelCount},set channelCount(O){x.channelCount=O},get channelCountMode(){return x.channelCountMode},set channelCountMode(O){x.channelCountMode=O},get channelInterpretation(){return x.channelInterpretation},set channelInterpretation(O){x.channelInterpretation=O},get context(){return x.context},get inputs(){return[x]},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},addEventListener(...O){return x.addEventListener(O[0],O[1],O[2])},dispatchEvent(...O){return x.dispatchEvent(O[0])},getFrequencyResponse(O,L,Y){if(O.length!==L.length||L.length!==Y.length)throw o();let R=O.length;for(let E=0;E<R;E+=1){let H=-Math.PI*(O[E]/N),F=[Math.cos(H),Math.sin(H)],ee=pm(d,F),$=pm(f,F),X=nw(ee,$);L[E]=Math.sqrt(X[0]*X[0]+X[1]*X[1]),Y[E]=Math.atan2(X[1],X[0])}},removeEventListener(...O){return x.removeEventListener(O[0],O[1],O[2])}},x)};var dm=(o,e)=>o.createMediaElementSource(e.mediaElement);var hm=(o,e)=>{let t=o.createMediaStreamDestination();return we(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t};var mm=(o,{mediaStream:e})=>{let t=e.getAudioTracks();t.sort((s,i)=>s.id<i.id?-1:s.id>i.id?1:0);let n=t.slice(0,1),r=o.createMediaStreamSource(new MediaStream(n));return Object.defineProperty(r,"mediaStream",{value:e}),r};var gm=(o,e)=>(t,{mediaStreamTrack:n})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(n);let r=new MediaStream([n]),s=t.createMediaStreamSource(r);if(n.kind!=="audio")throw o();if(e(t))throw new TypeError;return s};var _m=o=>o===null?null:o.hasOwnProperty("OfflineAudioContext")?o.OfflineAudioContext:o.hasOwnProperty("webkitOfflineAudioContext")?o.webkitOfflineAudioContext:null;var vm=(o,e,t,n,r,s)=>(i,a)=>{let c=i.createOscillator();return we(c,a),Me(c,a,"detune"),Me(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):ke(c,a,"type"),e(t,()=>t(i))||Zr(c),e(n,()=>n(i))||s(c,i),e(r,()=>r(i))||Jr(c),o(i,c),c};var ym=o=>(e,t)=>{let n=e.createPanner();return n.orientationX===void 0?o(e,t):(we(n,t),Me(n,t,"orientationX"),Me(n,t,"orientationY"),Me(n,t,"orientationZ"),Me(n,t,"positionX"),Me(n,t,"positionY"),Me(n,t,"positionZ"),ke(n,t,"coneInnerAngle"),ke(n,t,"coneOuterAngle"),ke(n,t,"coneOuterGain"),ke(n,t,"distanceModel"),ke(n,t,"maxDistance"),ke(n,t,"panningModel"),ke(n,t,"refDistance"),ke(n,t,"rolloffFactor"),n)};var xm=(o,e,t,n,r,s,i,a,c,l)=>(u,Y)=>{var R=Y,{coneInnerAngle:p,coneOuterAngle:f,coneOuterGain:d,distanceModel:h,maxDistance:m,orientationX:g,orientationY:x,orientationZ:T,panningModel:D,positionX:C,positionY:w,positionZ:N,refDistance:b,rolloffFactor:O}=R,L=dn(R,["coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","orientationX","orientationY","orientationZ","panningModel","positionX","positionY","positionZ","refDistance","rolloffFactor"]);let E=u.createPanner();if(L.channelCount>2||L.channelCountMode==="max")throw i();we(E,L);let H={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},F=t(u,se(A({},H),{channelInterpretation:"speakers",numberOfInputs:6})),ee=n(u,se(A({},L),{gain:1})),$=n(u,se(A({},H),{gain:1})),X=n(u,se(A({},H),{gain:0})),B=n(u,se(A({},H),{gain:0})),M=n(u,se(A({},H),{gain:0})),U=n(u,se(A({},H),{gain:0})),V=n(u,se(A({},H),{gain:0})),J=r(u,256,6,1),Z=s(u,se(A({},H),{curve:new Float32Array([1,1]),oversample:"none"})),de=[g,x,T],ce=[C,w,N],Se=new Float32Array(1);J.onaudioprocess=({inputBuffer:oe})=>{let rt=[c(oe,Se,0),c(oe,Se,1),c(oe,Se,2)];rt.some((yt,v)=>yt!==de[v])&&(E.setOrientation(...rt),de=rt);let Dt=[c(oe,Se,3),c(oe,Se,4),c(oe,Se,5)];Dt.some((yt,v)=>yt!==ce[v])&&(E.setPosition(...Dt),ce=Dt)},Object.defineProperty(X.gain,"defaultValue",{get:()=>0}),Object.defineProperty(B.gain,"defaultValue",{get:()=>0}),Object.defineProperty(M.gain,"defaultValue",{get:()=>0}),Object.defineProperty(U.gain,"defaultValue",{get:()=>0}),Object.defineProperty(V.gain,"defaultValue",{get:()=>0});let pe={get bufferSize(){},get channelCount(){return E.channelCount},set channelCount(oe){if(oe>2)throw i();ee.channelCount=oe,E.channelCount=oe},get channelCountMode(){return E.channelCountMode},set channelCountMode(oe){if(oe==="max")throw i();ee.channelCountMode=oe,E.channelCountMode=oe},get channelInterpretation(){return E.channelInterpretation},set channelInterpretation(oe){ee.channelInterpretation=oe,E.channelInterpretation=oe},get coneInnerAngle(){return E.coneInnerAngle},set coneInnerAngle(oe){E.coneInnerAngle=oe},get coneOuterAngle(){return E.coneOuterAngle},set coneOuterAngle(oe){E.coneOuterAngle=oe},get coneOuterGain(){return E.coneOuterGain},set coneOuterGain(oe){if(oe<0||oe>1)throw e();E.coneOuterGain=oe},get context(){return E.context},get distanceModel(){return E.distanceModel},set distanceModel(oe){E.distanceModel=oe},get inputs(){return[ee]},get maxDistance(){return E.maxDistance},set maxDistance(oe){if(oe<0)throw new RangeError;E.maxDistance=oe},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get orientationX(){return $.gain},get orientationY(){return X.gain},get orientationZ(){return B.gain},get panningModel(){return E.panningModel},set panningModel(oe){E.panningModel=oe},get positionX(){return M.gain},get positionY(){return U.gain},get positionZ(){return V.gain},get refDistance(){return E.refDistance},set refDistance(oe){if(oe<0)throw new RangeError;E.refDistance=oe},get rolloffFactor(){return E.rolloffFactor},set rolloffFactor(oe){if(oe<0)throw new RangeError;E.rolloffFactor=oe},addEventListener(...oe){return ee.addEventListener(oe[0],oe[1],oe[2])},dispatchEvent(...oe){return ee.dispatchEvent(oe[0])},removeEventListener(...oe){return ee.removeEventListener(oe[0],oe[1],oe[2])}};p!==pe.coneInnerAngle&&(pe.coneInnerAngle=p),f!==pe.coneOuterAngle&&(pe.coneOuterAngle=f),d!==pe.coneOuterGain&&(pe.coneOuterGain=d),h!==pe.distanceModel&&(pe.distanceModel=h),m!==pe.maxDistance&&(pe.maxDistance=m),g!==pe.orientationX.value&&(pe.orientationX.value=g),x!==pe.orientationY.value&&(pe.orientationY.value=x),T!==pe.orientationZ.value&&(pe.orientationZ.value=T),D!==pe.panningModel&&(pe.panningModel=D),C!==pe.positionX.value&&(pe.positionX.value=C),w!==pe.positionY.value&&(pe.positionY.value=w),N!==pe.positionZ.value&&(pe.positionZ.value=N),b!==pe.refDistance&&(pe.refDistance=b),O!==pe.rolloffFactor&&(pe.rolloffFactor=O),(de[0]!==1||de[1]!==0||de[2]!==0)&&E.setOrientation(...de),(ce[0]!==0||ce[1]!==0||ce[2]!==0)&&E.setPosition(...ce);let nt=()=>{ee.connect(E),o(ee,Z,0,0),Z.connect($).connect(F,0,0),Z.connect(X).connect(F,0,1),Z.connect(B).connect(F,0,2),Z.connect(M).connect(F,0,3),Z.connect(U).connect(F,0,4),Z.connect(V).connect(F,0,5),F.connect(J).connect(u.destination)},Lt=()=>{ee.disconnect(E),a(ee,Z,0,0),Z.disconnect($),$.disconnect(F),Z.disconnect(X),X.disconnect(F),Z.disconnect(B),B.disconnect(F),Z.disconnect(M),M.disconnect(F),Z.disconnect(U),U.disconnect(F),Z.disconnect(V),V.disconnect(F),F.disconnect(J),J.disconnect(u.destination)};return l(ao(pe,E),nt,Lt)};var bm=o=>(e,{disableNormalization:t,imag:n,real:r})=>{let s=n instanceof Float32Array?n:new Float32Array(n),i=r instanceof Float32Array?r:new Float32Array(r),a=e.createPeriodicWave(i,s,{disableNormalization:t});if(Array.from(n).length<2)throw o();return a};var ts=(o,e,t,n)=>o.createScriptProcessor(e,t,n);var wm=(o,e)=>(t,n)=>{let r=n.channelCountMode;if(r==="clamped-max")throw e();if(t.createStereoPanner===void 0)return o(t,n);let s=t.createStereoPanner();return we(s,n),Me(s,n,"pan"),Object.defineProperty(s,"channelCountMode",{get:()=>r,set:i=>{if(i!==r)throw e()}}),s};var Sm=(o,e,t,n,r,s)=>{let i=16385,a=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u=se(A({},l),{oversample:"none"}),p=(h,m,g,x)=>{let T=new Float32Array(i),D=new Float32Array(i);for(let L=0;L<i;L+=1){let Y=L/(i-1)*c;T[L]=Math.cos(Y),D[L]=Math.sin(Y)}let C=t(h,se(A({},l),{gain:0})),w=n(h,se(A({},u),{curve:T})),N=n(h,se(A({},u),{curve:a})),b=t(h,se(A({},l),{gain:0})),O=n(h,se(A({},u),{curve:D}));return{connectGraph(){m.connect(C),m.connect(N.inputs===void 0?N:N.inputs[0]),m.connect(b),N.connect(g),g.connect(w.inputs===void 0?w:w.inputs[0]),g.connect(O.inputs===void 0?O:O.inputs[0]),w.connect(C.gain),O.connect(b.gain),C.connect(x,0,0),b.connect(x,0,1)},disconnectGraph(){m.disconnect(C),m.disconnect(N.inputs===void 0?N:N.inputs[0]),m.disconnect(b),N.disconnect(g),g.disconnect(w.inputs===void 0?w:w.inputs[0]),g.disconnect(O.inputs===void 0?O:O.inputs[0]),w.disconnect(C.gain),O.disconnect(b.gain),C.disconnect(x,0,0),b.disconnect(x,0,1)}}},f=(h,m,g,x)=>{let T=new Float32Array(i),D=new Float32Array(i),C=new Float32Array(i),w=new Float32Array(i),N=Math.floor(i/2);for(let X=0;X<i;X+=1)if(X>N){let B=(X-N)/(i-1-N)*c;T[X]=Math.cos(B),D[X]=Math.sin(B),C[X]=0,w[X]=1}else{let B=X/(i-1-N)*c;T[X]=1,D[X]=0,C[X]=Math.cos(B),w[X]=Math.sin(B)}let b=e(h,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),O=t(h,se(A({},l),{gain:0})),L=n(h,se(A({},u),{curve:T})),Y=t(h,se(A({},l),{gain:0})),R=n(h,se(A({},u),{curve:D})),E=n(h,se(A({},u),{curve:a})),H=t(h,se(A({},l),{gain:0})),F=n(h,se(A({},u),{curve:C})),ee=t(h,se(A({},l),{gain:0})),$=n(h,se(A({},u),{curve:w}));return{connectGraph(){m.connect(b),m.connect(E.inputs===void 0?E:E.inputs[0]),b.connect(O,0),b.connect(Y,0),b.connect(H,1),b.connect(ee,1),E.connect(g),g.connect(L.inputs===void 0?L:L.inputs[0]),g.connect(R.inputs===void 0?R:R.inputs[0]),g.connect(F.inputs===void 0?F:F.inputs[0]),g.connect($.inputs===void 0?$:$.inputs[0]),L.connect(O.gain),R.connect(Y.gain),F.connect(H.gain),$.connect(ee.gain),O.connect(x,0,0),H.connect(x,0,0),Y.connect(x,0,1),ee.connect(x,0,1)},disconnectGraph(){m.disconnect(b),m.disconnect(E.inputs===void 0?E:E.inputs[0]),b.disconnect(O,0),b.disconnect(Y,0),b.disconnect(H,1),b.disconnect(ee,1),E.disconnect(g),g.disconnect(L.inputs===void 0?L:L.inputs[0]),g.disconnect(R.inputs===void 0?R:R.inputs[0]),g.disconnect(F.inputs===void 0?F:F.inputs[0]),g.disconnect($.inputs===void 0?$:$.inputs[0]),L.disconnect(O.gain),R.disconnect(Y.gain),F.disconnect(H.gain),$.disconnect(ee.gain),O.disconnect(x,0,0),H.disconnect(x,0,0),Y.disconnect(x,0,1),ee.disconnect(x,0,1)}}},d=(h,m,g,x,T)=>{if(m===1)return p(h,g,x,T);if(m===2)return f(h,g,x,T);throw r()};return(h,D)=>{var C=D,{channelCount:m,channelCountMode:g,pan:x}=C,T=dn(C,["channelCount","channelCountMode","pan"]);if(g==="max")throw r();let w=o(h,se(A({},T),{channelCount:1,channelCountMode:g,numberOfInputs:2})),N=t(h,se(A({},T),{channelCount:m,channelCountMode:g,gain:1})),b=t(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:x}),{connectGraph:O,disconnectGraph:L}=d(h,m,N,b,w);Object.defineProperty(b.gain,"defaultValue",{get:()=>0}),Object.defineProperty(b.gain,"maxValue",{get:()=>1}),Object.defineProperty(b.gain,"minValue",{get:()=>-1});let Y={get bufferSize(){},get channelCount(){return N.channelCount},set channelCount(F){N.channelCount!==F&&(R&&L(),{connectGraph:O,disconnectGraph:L}=d(h,F,N,b,w),R&&O()),N.channelCount=F},get channelCountMode(){return N.channelCountMode},set channelCountMode(F){if(F==="clamped-max"||F==="max")throw r();N.channelCountMode=F},get channelInterpretation(){return N.channelInterpretation},set channelInterpretation(F){N.channelInterpretation=F},get context(){return N.context},get inputs(){return[N]},get numberOfInputs(){return N.numberOfInputs},get numberOfOutputs(){return N.numberOfOutputs},get pan(){return b.gain},addEventListener(...F){return N.addEventListener(F[0],F[1],F[2])},dispatchEvent(...F){return N.dispatchEvent(F[0])},removeEventListener(...F){return N.removeEventListener(F[0],F[1],F[2])}},R=!1,E=()=>{O(),R=!0},H=()=>{L(),R=!1};return s(ao(Y,w),E,H)}};var Tm=(o,e,t,n,r,s,i)=>(a,c)=>{let l=a.createWaveShaper();if(s!==null&&s.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return t(a,c);we(l,c);let u=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(u!==null&&u.length<2)throw e();ke(l,{curve:u},"curve"),ke(l,c,"oversample");let p=null,f=!1;return i(l,"curve",m=>()=>m.call(l),m=>g=>(m.call(l,g),f&&(n(g)&&p===null?p=o(a,l):!n(g)&&p!==null&&(p(),p=null)),g)),r(l,()=>{f=!0,n(l.curve)&&(p=o(a,l))},()=>{f=!1,p!==null&&(p(),p=null)})};var Om=(o,e,t,n,r)=>(s,l)=>{var u=l,{curve:i,oversample:a}=u,c=dn(u,["curve","oversample"]);let p=s.createWaveShaper(),f=s.createWaveShaper();we(p,c),we(f,c);let d=t(s,se(A({},c),{gain:1})),h=t(s,se(A({},c),{gain:-1})),m=t(s,se(A({},c),{gain:1})),g=t(s,se(A({},c),{gain:-1})),x=null,T=!1,D=null,C={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(b){d.channelCount=b,h.channelCount=b,p.channelCount=b,m.channelCount=b,f.channelCount=b,g.channelCount=b},get channelCountMode(){return p.channelCountMode},set channelCountMode(b){d.channelCountMode=b,h.channelCountMode=b,p.channelCountMode=b,m.channelCountMode=b,f.channelCountMode=b,g.channelCountMode=b},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(b){d.channelInterpretation=b,h.channelInterpretation=b,p.channelInterpretation=b,m.channelInterpretation=b,f.channelInterpretation=b,g.channelInterpretation=b},get context(){return p.context},get curve(){return D},set curve(b){if(b!==null&&b.length<2)throw e();if(b===null)p.curve=b,f.curve=b;else{let O=b.length,L=new Float32Array(O+2-O%2),Y=new Float32Array(O+2-O%2);L[0]=b[0],Y[0]=-b[O-1];let R=Math.ceil((O+1)/2),E=(O+1)/2-1;for(let H=1;H<R;H+=1){let F=H/R*E,ee=Math.floor(F),$=Math.ceil(F);L[H]=ee===$?b[ee]:(1-(F-ee))*b[ee]+(1-($-F))*b[$],Y[H]=ee===$?-b[O-1-ee]:-((1-(F-ee))*b[O-1-ee])-(1-($-F))*b[O-1-$]}L[R]=O%2==1?b[R-1]:(b[R-2]+b[R-1])/2,p.curve=L,f.curve=Y}D=b,T&&(n(D)&&x===null?x=o(s,d):x!==null&&(x(),x=null))},get inputs(){return[d]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get oversample(){return p.oversample},set oversample(b){p.oversample=b,f.oversample=b},addEventListener(...b){return d.addEventListener(b[0],b[1],b[2])},dispatchEvent(...b){return d.dispatchEvent(b[0])},removeEventListener(...b){return d.removeEventListener(b[0],b[1],b[2])}};i!==null&&(C.curve=i instanceof Float32Array?i:new Float32Array(i)),a!==C.oversample&&(C.oversample=a);let w=()=>{d.connect(p).connect(m),d.connect(h).connect(f).connect(g).connect(m),T=!0,n(D)&&(x=o(s,d))},N=()=>{d.disconnect(p),p.disconnect(m),d.disconnect(h),h.disconnect(f),f.disconnect(g),g.disconnect(m),T=!1,x!==null&&(x(),x=null)};return r(ao(C,m),w,N)};var Tt=()=>new DOMException("","NotSupportedError");var sw={numberOfChannels:1},Nm=(o,e,t,n,r)=>class extends o{constructor(i,a,c){let l;if(typeof i=="number"&&a!==void 0&&c!==void 0)l={length:a,numberOfChannels:i,sampleRate:c};else if(typeof i=="object")l=i;else throw new Error("The given parameters are not valid.");let{length:u,numberOfChannels:p,sampleRate:f}=A(A({},sw),l),d=n(p,u,f);e(wo,()=>wo(d))||d.addEventListener("statechange",(()=>{let h=0,m=g=>{this._state==="running"&&(h>0?(d.removeEventListener("statechange",m),g.stopImmediatePropagation(),this._waitForThePromiseToSettle(g)):h+=1)};return m})());super(d,p);this._length=u,this._nativeOfflineAudioContext=d,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,En(this)}))}_waitForThePromiseToSettle(i){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(i):setTimeout(()=>this._waitForThePromiseToSettle(i))}};var iw={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Em=(o,e,t,n,r,s,i)=>class extends o{constructor(c,l){let u=r(c),p=A(A({},iw),l),f=t(u,p),d=s(u),h=d?n():null,m=c.sampleRate/2;super(c,!1,f,h);this._detune=e(this,d,f.detune,153600,-153600),this._frequency=e(this,d,f.frequency,m,-m),this._nativeOscillatorNode=f,this._onended=null,this._oscillatorNodeRenderer=h,this._oscillatorNodeRenderer!==null&&p.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=p.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){let l=typeof c=="function"?i(this,c):null;this._nativeOscillatorNode.onended=l;let u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===l?c:u}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){xo(this);let l=()=>{this._nativeOscillatorNode.removeEventListener("ended",l),It(this)&&Bo(this)};this._nativeOscillatorNode.addEventListener("ended",l)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}};var Am=(o,e,t,n,r)=>()=>{let s=new WeakMap,i=null,a=null,c=null,l=(u,p)=>ie(void 0,null,function*(){let f=t(u),d=Ce(f,p);if(!d){let h={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,periodicWave:i===null?void 0:i,type:f.type};f=e(p,h),a!==null&&f.start(a),c!==null&&f.stop(c)}return s.set(p,f),d?(yield o(p,u.detune,f.detune),yield o(p,u.frequency,f.frequency)):(yield n(p,u.detune,f.detune),yield n(p,u.frequency,f.frequency)),yield r(u,p,f),f});return{set periodicWave(u){i=u},set start(u){a=u},set stop(u){c=u},render(u,p){let f=s.get(p);return f!==void 0?Promise.resolve(f):l(u,p)}}};var aw={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Cm=(o,e,t,n,r,s,i)=>class extends o{constructor(c,l){let u=r(c),p=A(A({},aw),l),f=t(u,p),d=s(u),h=d?n():null;super(c,!1,f,h);this._nativePannerNode=f,this._orientationX=e(this,d,f.orientationX,et,it),this._orientationY=e(this,d,f.orientationY,et,it),this._orientationZ=e(this,d,f.orientationZ,et,it),this._positionX=e(this,d,f.positionX,et,it),this._positionY=e(this,d,f.positionY,et,it),this._positionZ=e(this,d,f.positionZ,et,it),i(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}};var km=(o,e,t,n,r,s,i,a,c,l)=>()=>{let u=new WeakMap,p=null,f=(d,h)=>ie(void 0,null,function*(){let m=null,g=s(d),x={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},T=se(A({},x),{coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor}),D=Ce(g,h);if("bufferSize"in g)m=n(h,se(A({},x),{gain:1}));else if(!D){let C=se(A({},T),{orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value});g=r(h,C)}if(u.set(h,m===null?g:m),m!==null){if(p===null){if(i===null)throw new Error("Missing the native OfflineAudioContext constructor.");let R=new i(6,d.context.length,h.sampleRate),E=e(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});E.connect(R.destination),p=(()=>ie(void 0,null,function*(){let H=yield Promise.all([d.orientationX,d.orientationY,d.orientationZ,d.positionX,d.positionY,d.positionZ].map((F,ee)=>ie(void 0,null,function*(){let $=t(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ee===0?1:0});return yield a(R,F,$.offset),$})));for(let F=0;F<6;F+=1)H[F].connect(E,0,F),H[F].start(0);return l(R)}))()}let C=yield p,w=n(h,se(A({},x),{gain:1}));yield c(d,h,w);let N=[];for(let R=0;R<C.numberOfChannels;R+=1)N.push(C.getChannelData(R));let b=[N[0][0],N[1][0],N[2][0]],O=[N[3][0],N[4][0],N[5][0]],L=n(h,se(A({},x),{gain:1})),Y=r(h,se(A({},T),{orientationX:b[0],orientationY:b[1],orientationZ:b[2],positionX:O[0],positionY:O[1],positionZ:O[2]}));w.connect(L).connect(Y.inputs[0]),Y.connect(m);for(let R=128;R<C.length;R+=128){let E=[N[0][R],N[1][R],N[2][R]],H=[N[3][R],N[4][R],N[5][R]];if(E.some((F,ee)=>F!==b[ee])||H.some((F,ee)=>F!==O[ee])){b=E,O=H;let F=R/h.sampleRate;L.gain.setValueAtTime(0,F),L=n(h,se(A({},x),{gain:0})),Y=r(h,se(A({},T),{orientationX:b[0],orientationY:b[1],orientationZ:b[2],positionX:O[0],positionY:O[1],positionZ:O[2]})),L.gain.setValueAtTime(1,F),w.connect(L).connect(Y.inputs[0]),Y.connect(m)}}return m}return D?(yield o(h,d.orientationX,g.orientationX),yield o(h,d.orientationY,g.orientationY),yield o(h,d.orientationZ,g.orientationZ),yield o(h,d.positionX,g.positionX),yield o(h,d.positionY,g.positionY),yield o(h,d.positionZ,g.positionZ)):(yield a(h,d.orientationX,g.orientationX),yield a(h,d.orientationY,g.orientationY),yield a(h,d.orientationZ,g.orientationZ),yield a(h,d.positionX,g.positionX),yield a(h,d.positionY,g.positionY),yield a(h,d.positionZ,g.positionZ)),io(g)?yield c(d,h,g.inputs[0]):yield c(d,h,g),g});return{render(d,h){let m=u.get(h);return m!==void 0?Promise.resolve(m):f(d,h)}}};var cw={disableNormalization:!1},Dm=(o,e,t,n)=>class Mm{constructor(s,i){let a=e(s),c=n(A(A({},cw),i)),l=o(a,c);return t.add(l),l}static[Symbol.hasInstance](s){return s!==null&&typeof s=="object"&&Object.getPrototypeOf(s)===Mm.prototype||t.has(s)}};var Pm=(o,e)=>(t,n,r)=>(o(n).replay(r),e(n,t,r));var Im=(o,e,t)=>(n,r,s)=>ie(void 0,null,function*(){let i=o(n);yield Promise.all(i.activeInputs.map((a,c)=>Array.from(a).map(p=>ie(void 0,[p],function*([l,u]){let d=yield e(l).render(l,r),h=n.context.destination;!t(l)&&(n!==h||!t(n))&&d.connect(s,u,c)}))).reduce((a,c)=>[...a,...c],[]))});var Fm=(o,e,t)=>(n,r,s)=>ie(void 0,null,function*(){let i=e(n);yield Promise.all(Array.from(i.activeInputs).map(l=>ie(void 0,[l],function*([a,c]){let p=yield o(a).render(a,r);t(a)||p.connect(s,c)})))});var Rm=(o,e,t,n)=>r=>o(wo,()=>wo(r))?Promise.resolve(o(n,n)).then(s=>{if(!s){let i=t(r,512,0,1);r.oncomplete=()=>{i.onaudioprocess=null,i.disconnect()},i.onaudioprocess=()=>r.currentTime,i.connect(r.destination)}return r.startRendering()}):new Promise(s=>{let i=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=a=>{i.disconnect(),s(a.renderedBuffer)},i.connect(r.destination),r.startRendering()});var Vm=o=>(e,t)=>{o.set(e,t)};var qm=o=>(e,t)=>o.set(e,t);var Lm=(o,e,t,n,r,s,i,a)=>(c,l)=>t(c).render(c,l).then(()=>Promise.all(Array.from(n(l)).map(u=>t(u).render(u,l)))).then(()=>r(l)).then(u=>(typeof u.copyFromChannel!="function"?(i(u),Ur(u)):e(s,()=>s(u))||a(u),o.add(u),u));var lw={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Bm=(o,e,t,n,r,s)=>class extends o{constructor(a,c){let l=r(a),u=A(A({},lw),c),p=t(l,u),f=s(l),d=f?n():null;super(a,!1,p,d);this._pan=e(this,f,p.pan)}get pan(){return this._pan}};var jm=(o,e,t,n,r)=>()=>{let s=new WeakMap,i=(a,c)=>ie(void 0,null,function*(){let l=t(a),u=Ce(l,c);if(!u){let p={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=e(c,p)}return s.set(c,l),u?yield o(c,a.pan,l.pan):yield n(c,a.pan,l.pan),io(l)?yield r(a,c,l.inputs[0]):yield r(a,c,l),l});return{render(a,c){let l=s.get(c);return l!==void 0?Promise.resolve(l):i(a,c)}}};var Wm=o=>()=>{if(o===null)return!1;try{new o({length:1,sampleRate:44100})}catch(e){return!1}return!0};var zm=(o,e)=>()=>ie(void 0,null,function*(){if(o===null)return!0;if(e===null)return!1;let t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),n=new e(1,128,44100),r=URL.createObjectURL(t),s=!1,i=!1;try{yield n.audioWorklet.addModule(r);let a=new o(n,"a",{numberOfOutputs:0}),c=n.createOscillator();a.port.onmessage=()=>s=!0,a.onprocessorerror=()=>i=!0,c.connect(a),c.start(0),yield n.startRendering()}catch(a){}finally{URL.revokeObjectURL(r)}return s&&!i});var $m=(o,e)=>()=>{if(e===null)return Promise.resolve(!1);let t=new e(1,1,44100),n=o(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{t.oncomplete=()=>{n.disconnect(),r(t.currentTime!==0)},t.startRendering()})};var xl=()=>new DOMException("","UnknownError");var uw={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Um=(o,e,t,n,r,s,i)=>class extends o{constructor(c,l){let u=r(c),p=A(A({},uw),l),f=t(u,p),h=s(u)?n():null;super(c,!0,f,h);this._isCurveNullified=!1,this._nativeWaveShaperNode=f,i(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}};var Gm=(o,e,t)=>()=>{let n=new WeakMap,r=(s,i)=>ie(void 0,null,function*(){let a=e(s);if(!Ce(a,i)){let l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=o(i,l)}return n.set(i,a),io(a)?yield t(s,i,a.inputs[0]):yield t(s,i,a),a});return{render(s,i){let a=n.get(i);return a!==void 0?Promise.resolve(a):r(s,i)}}};var Hm=()=>typeof window=="undefined"?null:window;var Ym=(o,e)=>t=>{t.copyFromChannel=(n,r,s=0)=>{let i=o(s),a=o(r);if(a>=t.numberOfChannels)throw e();let c=t.length,l=t.getChannelData(a),u=n.length;for(let p=i<0?-i:0;p+i<c&&p<u;p+=1)n[p]=l[p+i]},t.copyToChannel=(n,r,s=0)=>{let i=o(s),a=o(r);if(a>=t.numberOfChannels)throw e();let c=t.length,l=t.getChannelData(a),u=n.length;for(let p=i<0?-i:0;p+i<c&&p<u;p+=1)l[p+i]=n[p]}};var Xm=o=>e=>{e.copyFromChannel=(t=>(n,r,s=0)=>{let i=o(s),a=o(r);if(i<e.length)return t.call(e,n,a,i)})(e.copyFromChannel),e.copyToChannel=(t=>(n,r,s=0)=>{let i=o(s),a=o(r);if(i<e.length)return t.call(e,n,a,i)})(e.copyToChannel)};var Km=o=>(e,t)=>{let n=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=n),o(e,"buffer",r=>()=>{let s=r.call(e);return s===n?null:s},r=>s=>r.call(e,s===null?n:s))};var Qm=(o,e)=>(t,n)=>{n.channelCount=1,n.channelCountMode="explicit",Object.defineProperty(n,"channelCount",{get:()=>1,set:()=>{throw o()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:()=>{throw o()}});let r=t.createBufferSource();e(n,()=>{let a=n.numberOfInputs;for(let c=0;c<a;c+=1)r.connect(n,0,c)},()=>r.disconnect(n))};var bl=(o,e,t)=>o.copyFromChannel===void 0?o.getChannelData(t)[0]:(o.copyFromChannel(e,t),e[0]);var wl=o=>{if(o===null)return!1;let e=o.length;return e%2!=0?o[Math.floor(e/2)]!==0:o[e/2-1]+o[e/2]!==0};var os=(o,e,t,n)=>{let r=o;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);let{get:s,set:i}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(o,e,{get:t(s),set:n(i)})};var Zm=o=>se(A({},o),{outputChannelCount:o.outputChannelCount!==void 0?o.outputChannelCount:o.numberOfInputs===1&&o.numberOfOutputs===1?[o.channelCount]:Array.from({length:o.numberOfOutputs},()=>1)});var Jm=o=>se(A({},o),{channelCount:o.numberOfOutputs});var eg=o=>{let{imag:e,real:t}=o;return e===void 0?t===void 0?se(A({},o),{imag:[0,0],real:[0,0]}):se(A({},o),{imag:Array.from(t,()=>0),real:t}):t===void 0?se(A({},o),{imag:e,real:Array.from(e,()=>0)}):se(A({},o),{imag:e,real:t})};var Sl=(o,e,t)=>{try{o.setValueAtTime(e,t)}catch(n){if(n.code!==9)throw n;Sl(o,e,t+1e-7)}};var tg=o=>{let e=o.createBufferSource();e.start();try{e.start()}catch(t){return!0}return!1};var og=o=>{let e=o.createBufferSource(),t=o.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch(n){return!1}return!0};var ng=o=>{let e=o.createBufferSource();e.start();try{e.stop()}catch(t){return!1}return!0};var ja=o=>{let e=o.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1};var Tl=o=>{let e=o.createBuffer(1,1,44100),t=o.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch(n){return!1}};var Wa=o=>{let e=o.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1};var rg=o=>{let{port1:e,port2:t}=new MessageChannel;try{e.postMessage(o)}finally{e.close(),t.close()}};var sg=o=>{o.start=(e=>(t=0,n=0,r)=>{let s=o.buffer,i=s===null?n:Math.min(s.duration,n);s!==null&&i>s.duration-.5/o.context.sampleRate?e.call(o,t,0,0):e.call(o,t,i,r)})(o.start)};var Ol=(o,e)=>{let t=e.createGain();o.connect(t);let n=(r=>()=>{r.call(o,t),o.removeEventListener("ended",n)})(o.disconnect);o.addEventListener("ended",n),ao(o,t),o.stop=(r=>{let s=!1;return(i=0)=>{if(s)try{r.call(o,i)}catch(a){t.gain.setValueAtTime(0,i)}else r.call(o,i),s=!0}})(o.stop)};var sr=(o,e)=>t=>{let n={value:o};return Object.defineProperties(t,{currentTarget:n,target:n}),typeof e=="function"?e.call(o,t):e.handleEvent.call(o,t)};var pw=Yf(bo),fw=rd(bo),dw=eh(On),ig=new WeakMap,hw=gh(ig),co=Fd(new Map,new WeakMap),jo=Hm(),ag=Uh(co,so),Nl=mh(mt),Ot=Im(mt,Nl,Jo),mw=cd(ag,Fe,Ot),Le=yh(zr),en=_m(jo),Re=Ih(en),cg=new WeakMap,lg=lh(sr),ns=Xh(jo),El=kh(ns),Al=Dh(jo),ug=Mh(jo),bi=Qh(jo),at=Od(Xf(Ca),nd(pw,fw,Gr,dw,Hr,mt,hw,Lo,Fe,bo,It,Jo,Yr),co,Oh(gi,Hr,mt,Fe,nr,It),so,Qr,Tt,Qd(Gr,gi,mt,Fe,nr,Le,It,Re),nh(cg,mt,dt),lg,Le,El,Al,ug,Re,bi),gw=ad(at,mw,so,ag,Le,Re);var Cl=new WeakSet,pg=Gh(jo),fg=Ud(new Uint32Array(1)),kl=Ym(fg,so),Dl=Xm(fg),Ml=ld(Cl,co,Tt,pg,en,Wm(pg),kl,Dl);var za=sd(Ft),dg=Fm(Nl,Nn,Jo),Wo=Bd(dg),rs=Yh(za,co,tg,og,ng,ja,Tl,Wa,sg,Km(os),Ol),zo=Pm(_h(Nn),dg),_w=fd(Wo,rs,Fe,zo,Ot),So=Ed(Kf(ka),cg,mi,Ad,Wt.createCancelAndHoldAutomationEvent,Wt.createCancelScheduledValuesAutomationEvent,Wt.createExponentialRampToValueAutomationEvent,Wt.createLinearRampToValueAutomationEvent,Wt.createSetTargetAutomationEvent,Wt.createSetValueAutomationEvent,Wt.createSetValueCurveAutomationEvent,ns,Sl),vw=pd(at,_w,So,He,rs,Le,Re,sr);var yw=xd(at,bd,so,He,Kh(Ft,os),Le,Re,Ot),xw=Id(Wo,vl,Fe,zo,Ot),ir=qm(ig),bw=Pd(at,So,xw,Qr,vl,Le,Re,ir),Cn=zh(bo,Al),ww=Qm(He,Cn),kn=rm(ns,ww),Sw=Vd(kn,Fe,Ot),Tw=Rd(at,Sw,kn,Le,Re),Ow=Ld(es,Fe,Ot),Nw=qd(at,Ow,es,Le,Re,Jm),Ew=am(za,rs,Ft,Cn),ss=im(za,co,Ew,ja,Wa),Aw=$d(Wo,ss,Fe,zo,Ot),Cw=zd(at,So,Aw,ss,Le,Re,sr),hg=cm(Tt,os),kw=Hd(hg,Fe,Ot),Dw=Gd(at,kw,hg,Le,Re,ir),Mw=Jd(Wo,yl,Fe,zo,Ot),Pw=Zd(at,So,Mw,yl,Le,Re,ir),mg=lm(Tt),Iw=ih(Wo,mg,Fe,zo,Ot),Fw=sh(at,So,Iw,mg,Tt,Le,Re,ir),Rw=dh(Wo,Ft,Fe,zo,Ot),Vw=fh(at,So,Rw,Ft,Le,Re),qw=fm(Qr,He,ts,Tt),$a=Rm(co,Ft,ts,$m(Ft,en)),Lw=Th(rs,Fe,en,Ot,$a),Bw=um(qw),jw=Sh(at,Bw,Lw,Le,Re,ir),Ww=wd(So,kn,ss,ts,Tt,bl,Re,os),gg=new WeakMap,Pl=jh(yw,Ww,lg,Re,gg,sr),_g=vm(za,co,ja,Tl,Wa,Ol),zw=Am(Wo,_g,Fe,zo,Ot),$w=Em(at,So,_g,zw,Le,Re,sr),vg=Wd(rs),Uw=Om(vg,He,Ft,wl,Cn),Ua=Tm(vg,He,Uw,wl,Cn,ns,os),Gw=xm(Gr,He,kn,Ft,ts,Ua,Tt,Hr,bl,Cn),yg=ym(Gw),Hw=km(Wo,kn,ss,Ft,yg,Fe,en,zo,Ot,$a),Yw=Cm(at,So,yg,Hw,Le,Re,ir),Xw=bm(so),Kw=Dm(Xw,Le,new WeakSet,eg),Qw=Sm(kn,es,Ft,Ua,Tt,Cn),xg=wm(Qw,Tt),Zw=jm(Wo,xg,Fe,zo,Ot),Jw=Bm(at,So,xg,Zw,Le,Re),e0=Gm(Ua,Fe,Ot),t0=Um(at,He,Ua,e0,Le,Re,ir),bg=Fh(jo),Il=uh(jo),wg=new WeakMap,o0=xh(wg,en),n0=bg?od(co,Tt,ch(jo),Il,ph(Hf),Le,o0,Re,bi,new WeakMap,new WeakMap,zm(bi,en),jo):void 0,r0=Ph(El,Re),s0=Kd(Cl,co,Xd,ah,new WeakSet,Le,r0,$r,wo,kl,Dl),Sg=Md(n0,gw,Ml,vw,bw,Tw,Nw,Cw,Dw,s0,Pw,Fw,Vw,jw,Pl,$w,Yw,Kw,Jw,t0),i0=Rh(at,dm,Le,Re),a0=Vh(at,hm,Le,Re),c0=qh(at,mm,Le,Re),l0=gm(He,Re),u0=Lh(at,l0,Le),Tg=yd(Sg,He,Tt,xl,i0,a0,c0,u0,ns);var Fl=bh(gg),p0=id(Fl),Og=jd(so),f0=th(Fl),Ng=rh(so),Eg=new WeakMap,d0=hh(Eg,dt),h0=nm(Og,so,He,kn,es,ss,Ft,ts,Tt,Ng,Il,d0,Cn),m0=Jh(He,h0,Ft,Tt,Cn),g0=Dd(Wo,Og,rs,kn,es,ss,Ft,f0,Ng,Il,Fe,bi,en,zo,Ot,$a),_0=vh(wg),v0=Vm(Eg),Rl=bg?Cd(p0,at,So,g0,m0,mt,_0,Le,Re,bi,Zm,v0,rg,sr):void 0;var FX=Bh(He,Tt,xl,Pl,ns);var Ag=Yd(Tt,en),Cg=Lm(Cl,co,Nl,Fl,$a,$r,kl,Dl),RX=Wh(co,He,Ag,Pl,Cg);var kg=Nm(Sg,co,He,Ag,Cg);var Dg=Nh(zr,El),Mg=Eh(Wr,Al),Pg=Ah(mi,ug),Ig=Ch(zr,Re);function tt(o){return typeof o=="undefined"}function fe(o){return!tt(o)}function Fg(o){return typeof o=="function"}function Nt(o){return typeof o=="number"}function To(o){return Object.prototype.toString.call(o)==="[object Object]"&&o.constructor===Object}function Vl(o){return typeof o=="boolean"}function Qe(o){return Array.isArray(o)}function xt(o){return typeof o=="string"}function wi(o){return xt(o)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(o)}function Q(o,e){if(!o)throw new Error(e)}function gt(o,e,t=1/0){if(!(e<=o&&o<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${o}`)}function Ga(o){!o.isOffline&&o.state!=="running"&&ar('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}var Rg=!1,Vg=!1;function ql(o){Rg=o}function qg(o){tt(o)&&Rg&&!Vg&&(Vg=!0,ar("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}var Lg=console;function Bg(...o){Lg.log(...o)}function ar(...o){Lg.warn(...o)}function jg(o){return new Tg(o)}function Wg(o,e,t){return new kg(o,e,t)}var $o=typeof self=="object"?self:null,zg=$o&&($o.hasOwnProperty("AudioContext")||$o.hasOwnProperty("webkitAudioContext"));function $g(o,e,t){return Q(fe(Rl),"This node only works in a secure context (https or localhost)"),new Rl(o,e,t)}var f_=jn(p_()),{__extends:YX,__assign:XX,__rest:KX,__decorate:At,__param:QX,__metadata:ZX,__awaiter:ve,__generator:JX,__exportStar:eK,__createBinding:tK,__values:oK,__read:nK,__spread:rK,__spreadArrays:sK,__spreadArray:iK,__await:aK,__asyncGenerator:cK,__asyncDelegator:lK,__asyncValues:uK,__makeTemplateObject:pK,__importStar:fK,__importDefault:dK,__classPrivateFieldGet:hK,__classPrivateFieldSet:mK}=f_.default;var Bl=class{constructor(e,t,n){this._callback=e,this._type=t,this._updateInterval=n,this._createClock()}_createWorker(){let e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),n=new Worker(t);n.onmessage=this._callback.bind(this),this._worker=n}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch(e){this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){this._updateInterval=Math.max(e,128/44100),this._type==="worker"&&this._worker.postMessage(Math.max(e*1e3,1))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}};function Oo(o){return Pg(o)}function Uo(o){return Mg(o)}function as(o){return Ig(o)}function Dn(o){return Dg(o)}function Ka(o){return o instanceof Ml}function b0(o,e){return o==="value"||Oo(e)||Uo(e)||Ka(e)}function Et(o,...e){if(!e.length)return o;let t=e.shift();if(To(o)&&To(t))for(let n in t)b0(n,t[n])?o[n]=t[n]:To(t[n])?(o[n]||Object.assign(o,{[n]:{}}),Et(o[n],t[n])):Object.assign(o,{[n]:t[n]});return Et(o,...e)}function d_(o,e){return o.length===e.length&&o.every((t,n)=>e[n]===t)}function y(o,e,t=[],n){let r={},s=Array.from(e);if(To(s[0])&&n&&!Reflect.has(s[0],n)&&(Object.keys(s[0]).some(a=>Reflect.has(o,a))||(Et(r,{[n]:s[0]}),t.splice(t.indexOf(n),1),s.shift())),s.length===1&&To(s[0]))Et(r,s[0]);else for(let i=0;i<t.length;i++)fe(s[i])&&(r[t[i]]=s[i]);return Et(o,r)}function h_(o){return o.constructor.getDefaults()}function to(o,e){return tt(o)?e:o}function Ye(o,e){return e.forEach(t=>{Reflect.has(o,t)&&delete o[t]}),o}var bt=class{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||$o&&this.toString()===$o.TONE_DEBUG_CLASS)&&Bg(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}};bt.version=ii;var jl=1e-6;function tn(o,e){return o>e+jl}function Si(o,e){return tn(o,e)||Rt(o,e)}function cr(o,e){return o+jl<e}function Rt(o,e){return Math.abs(o-e)<jl}function Wl(o,e,t){return Math.max(Math.min(o,t),e)}var ct=class extends bt{constructor(){super();this.name="Timeline",this._timeline=[];let e=y(ct.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(Q(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){let t=this._timeline[this.length-1];Q(Si(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{let t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){let t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){let t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){let n=this._search(e,t);return n!==-1?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){let n=this._search(e,t);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(e){let t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];let n=this._search(e);return n-1>=0?this._timeline[n-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(Rt(this._timeline[t].time,e)){for(let n=t;n>=0&&Rt(this._timeline[n].time,e);n--)t=n;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&Si(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){let t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){let t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let n=0,r=this._timeline.length,s=r;if(r>0&&this._timeline[r-1][t]<=e)return r-1;for(;n<s;){let i=Math.floor(n+(s-n)/2),a=this._timeline[i],c=this._timeline[i+1];if(Rt(a[t],e)){for(let l=i;l<this._timeline.length;l++){let u=this._timeline[l];if(Rt(u[t],e))i=l;else break}return i}else{if(cr(a[t],e)&&tn(c[t],e))return i;tn(a[t],e)?s=i:n=i+1}}return-1}_iterate(e,t=0,n=this._timeline.length-1){this._timeline.slice(t,n+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){let n=this._search(e);return n!==-1&&this._iterate(t,0,n),this}forEachAfter(e,t){let n=this._search(e);return this._iterate(t,n+1),this}forEachBetween(e,t,n){let r=this._search(e),s=this._search(t);return r!==-1&&s!==-1?(this._timeline[r].time!==e&&(r+=1),this._timeline[s].time===t&&(s-=1),this._iterate(n,r,s)):r===-1&&this._iterate(n,0,s),this}forEachFrom(e,t){let n=this._search(e);for(;n>=0&&this._timeline[n].time>=e;)n--;return this._iterate(t,n+1),this}forEachAtTime(e,t){let n=this._search(e);if(n!==-1&&Rt(this._timeline[n].time,e)){let r=n;for(let s=n;s>=0&&Rt(this._timeline[s].time,e);s--)r=s;this._iterate(s=>{t(s)},r,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}};var m_=[];function Mn(o){m_.push(o)}function g_(o){m_.forEach(e=>e(o))}var __=[];function Pn(o){__.push(o)}function v_(o){__.forEach(e=>e(o))}var on=class extends bt{constructor(){super(...arguments);this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(r=>{tt(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(t)}),this}once(e,t){let n=(...r)=>{t(...r),this.off(e,n)};return this.on(e,n),this}off(e,t){return e.split(/\W+/).forEach(r=>{if(tt(this._events)&&(this._events={}),this._events.hasOwnProperty(r))if(tt(t))this._events[r]=[];else{let s=this._events[r];for(let i=s.length-1;i>=0;i--)s[i]===t&&s.splice(i,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){let n=this._events[e].slice(0);for(let r=0,s=n.length;r<s;r++)n[r].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{let n=Object.getOwnPropertyDescriptor(on.prototype,t);Object.defineProperty(e.prototype,t,n)})}dispose(){return super.dispose(),this._events=void 0,this}};var Ti=class extends on{constructor(){super(...arguments);this.isOffline=!1}toJSON(){return{}}};var In=class extends Ti{constructor(){super();this.name="Context",this._constants=new Map,this._timeouts=new ct,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;let e=y(In.getDefaults(),arguments,["context"]);e.context?this._context=e.context:this._context=jg({latencyHint:e.latencyHint}),this._ticker=new Bl(this.emit.bind(this,"tick"),e.clockSource,e.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(e.latencyHint),this.lookAhead=e.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(g_(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,n){return this._context.createBuffer(e,t,n)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,n){return this._context.createPeriodicWave(e,t,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return Q(Dn(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return Q(Dn(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return Q(Dn(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){Q(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){Q(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){Q(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){Q(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return $g(this.rawContext,e,t)}addAudioWorkletModule(e,t){return ve(this,void 0,void 0,function*(){Q(fe(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(t)||this._workletModules.set(t,this.rawContext.audioWorklet.addModule(e)),yield this._workletModules.get(t)})}workletsAreReady(){return ve(this,void 0,void 0,function*(){let e=[];this._workletModules.forEach(t=>e.push(t)),yield Promise.all(e)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get latencyHint(){return this._latencyHint}_setLatencyHint(e){let t=0;if(this._latencyHint=e,xt(e))switch(e){case"interactive":t=.1;break;case"playback":t=.5;break;case"balanced":t=.25;break}this.lookAhead=t,this.updateInterval=t/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return Dn(this._context)?this._context.resume():Promise.resolve()}close(){return ve(this,void 0,void 0,function*(){Dn(this._context)&&(yield this._context.close()),this._initialized&&v_(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{let t=this._context.createBuffer(1,128,this._context.sampleRate),n=t.getChannelData(0);for(let s=0;s<n.length;s++)n[s]=e;let r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=t,r.loop=!0,r.start(0),this._constants.set(e,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this}_timeoutLoop(){let e=this.now(),t=this._timeouts.peek();for(;this._timeouts.length&&t&&t.time<=e;)t.callback(),this._timeouts.shift(),t=this._timeouts.peek()}setTimeout(e,t){this._timeoutIds++;let n=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:n+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){let n=++this._timeoutIds,r=()=>{let s=this.now();this._timeouts.add({callback:()=>{e(),r()},id:n,time:s+t})};return r(),n}};var zl=class extends Ti{constructor(){super(...arguments);this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,n){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e,t){return ve(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}};function K(o,e){Qe(e)?e.forEach(t=>K(o,t)):Object.defineProperty(o,e,{enumerable:!0,writable:!1})}function lr(o,e){Qe(e)?e.forEach(t=>lr(o,t)):Object.defineProperty(o,e,{writable:!0})}var he=()=>{};var ye=class extends bt{constructor(){super();this.name="ToneAudioBuffer",this.onload=he;let e=y(ye.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,e.url&&Ka(e.url)||e.url instanceof ye?this.set(e.url):xt(e.url)&&this.load(e.url).catch(e.onerror)}static getDefaults(){return{onerror:he,onload:he,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:lt().sampleRate}set(e){return e instanceof ye?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return ve(this,void 0,void 0,function*(){let t=ye.load(e).then(n=>{this.set(n),this.onload(this)});ye.downloads.push(t);try{yield t}finally{let n=ye.downloads.indexOf(t);ye.downloads.splice(n,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){let t=Qe(e)&&e[0].length>0,n=t?e.length:1,r=t?e[0].length:e.length,s=lt(),i=s.createBuffer(n,r,s.sampleRate),a=!t&&n===1?[e]:e;for(let c=0;c<n;c++)i.copyToChannel(a[c],c);return this._buffer=i,this}toMono(e){if(Nt(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length),n=this.numberOfChannels;for(let r=0;r<n;r++){let s=this.toArray(r);for(let i=0;i<s.length;i++)t[i]+=s[i]}t=t.map(r=>r/n),this.fromArray(t)}return this}toArray(e){if(Nt(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{let t=[];for(let n=0;n<this.numberOfChannels;n++)t[n]=this.getChannelData(n);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){Q(this.loaded,"Buffer is not loaded");let n=Math.floor(e*this.sampleRate),r=Math.floor(t*this.sampleRate);Q(n<r,"The start time must be less than the end time");let s=r-n,i=lt().createBuffer(this.numberOfChannels,s,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)i.copyToChannel(this.getChannelData(a).subarray(n,r),a);return new ye(i)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new ye().fromArray(e)}static fromUrl(e){return ve(this,void 0,void 0,function*(){return yield new ye().load(e)})}static load(e){return ve(this,void 0,void 0,function*(){let t=e.match(/\[([^\]\[]+\|.+)\]$/);if(t){let c=t[1].split("|"),l=c[0];for(let u of c)if(ye.supportsType(u)){l=u;break}e=e.replace(t[0],l)}let n=ye.baseUrl===""||ye.baseUrl.endsWith("/")?ye.baseUrl:ye.baseUrl+"/",r=document.createElement("a");r.href=n+e,r.pathname=(r.pathname+r.hash).split("/").map(encodeURIComponent).join("/");let s=yield fetch(r.href);if(!s.ok)throw new Error(`could not load url: ${e}`);let i=yield s.arrayBuffer();return yield lt().decodeAudioData(i)})}static supportsType(e){let t=e.split("."),n=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+n)!==""}static loaded(){return ve(this,void 0,void 0,function*(){for(yield Promise.resolve();ye.downloads.length;)yield ye.downloads[0]})}};ye.baseUrl="";ye.downloads=[];var nn=class extends In{constructor(){super({clockSource:"offline",context:as(arguments[0])?arguments[0]:Wg(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:as(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]});this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=as(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return ve(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;let n=Math.floor(this.sampleRate/128);e&&t%n==0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(e=!0){return ve(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);let t=yield this._context.startRendering();return new ye(t)})}close(){return Promise.resolve()}};var y_=new zl,cs=y_;function lt(){return cs===y_&&zg&&$l(new In),cs}function $l(o,e=!1){e&&cs.dispose(),Dn(o)?cs=new In(o):as(o)?cs=new nn(o):cs=o}if($o&&!$o.TONE_SILENCE_LOGGING){let o="v";ii==="dev"&&(o="");let e=` * Tone.js ${o}${ii} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function ls(o){return Math.pow(10,o/20)}function us(o){return 20*(Math.log(o)/Math.LN10)}function ur(o){return Math.pow(2,o/12)}var Qa=440;function x_(){return Qa}function b_(o){Qa=o}function No(o){return Math.round(Ul(o))}function Ul(o){return 69+12*Math.log2(o/Qa)}function Oi(o){return Qa*Math.pow(2,(o-69)/12)}var Ni=class extends bt{constructor(e,t,n){super();this.defaultUnits="s",this._val=t,this._units=n,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{let n=parseInt(e,10),r=t==="."?1.5:1;return n===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/n)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{let t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,n)=>{let r=0;return e&&e!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r+=this._beatsToUnits(parseFloat(t))),n&&n!=="0"&&(r+=this._beatsToUnits(parseFloat(n)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Ni&&this.fromType(this._val),tt(this._val))return this._noArg();if(xt(this._val)&&tt(this._units)){for(let e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(To(this._val)){let e=0;for(let t in this._val)if(fe(this._val[t])){let n=this._val[t];e+=new this.constructor(this.context,t).valueOf()*n}return e}if(fe(this._units)){let e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return xt(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}};var Ct=class extends Ni{constructor(){super(...arguments);this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{let t=new Ct(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){let n=new this.constructor(this.context,e).valueOf(),r=this.valueOf(),a=Math.round(r/n)*n-r;return r+a*t}toNotation(){let e=this.toSeconds(),t=["1m"];for(let s=1;s<9;s++){let i=Math.pow(2,s);t.push(i+"n."),t.push(i+"n"),t.push(i+"t")}t.push("0");let n=t[0],r=new Ct(this.context,t[0]).toSeconds();return t.forEach(s=>{let i=new Ct(this.context,s).toSeconds();Math.abs(i-e)<Math.abs(r-e)&&(n=s,r=i)}),n}toBarsBeatsSixteenths(){let e=this._beatsToUnits(1),t=this.valueOf()/e;t=parseFloat(t.toFixed(4));let n=Math.floor(t/this._getTimeSignature()),r=t%1*4;t=Math.floor(t)%this._getTimeSignature();let s=r.toString();return s.length>3&&(r=parseFloat(parseFloat(s).toFixed(3))),[n,t,r].join(":")}toTicks(){let e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return No(this.toFrequency())}_now(){return this.context.now()}};var _t=class extends Ct{constructor(){super(...arguments);this.name="Frequency",this.defaultUnits="hz"}static get A4(){return x_()}static set A4(e){b_(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:_t.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){let r=w0[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?r:_t.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,n){let r=1;return e&&e!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r*=this._beatsToUnits(parseFloat(t))),n&&n!=="0"&&(r*=this._beatsToUnits(parseFloat(n)/4)),r}}})}transpose(e){return new _t(this.context,this.valueOf()*ur(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return No(this.valueOf())}toNote(){let e=this.toFrequency(),t=Math.log2(e/_t.A4),n=Math.round(12*t)+57,r=Math.floor(n/12);return r<0&&(n+=-12*r),S0[n%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){let e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return Oi(e)}static ftom(e){return No(e)}},w0={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},S0=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];var Eo=class extends Ct{constructor(){super(...arguments);this.name="TransportTime"}_now(){return this.context.transport.seconds}};var Ze=class extends bt{constructor(){super();let e=y(Ze.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:lt()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return qg(e),new Ct(this.context,e).toSeconds()}toFrequency(e){return new _t(this.context,e).toFrequency()}toTicks(e){return new Eo(this.context,e).toTicks()}_getPartialProperties(e){let t=this.get();return Object.keys(t).forEach(n=>{tt(e[n])&&delete t[n]}),t}get(){let e=h_(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){let n=this[t];fe(n)&&fe(n.value)&&fe(n.setValueAtTime)?e[t]=n.value:n instanceof Ze?e[t]=n._getPartialProperties(e[t]):Qe(n)||Nt(n)||xt(n)||Vl(n)?e[t]=n:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&fe(this[t])&&(this[t]&&fe(this[t].value)&&fe(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof Ze?this[t].set(e[t]):this[t]=e[t])}),this}};var rn=class extends ct{constructor(e="stopped"){super();this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){let t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,n){return gt(t,0),this.add(Object.assign({},n,{state:e,time:t})),this}getLastState(e,t){let n=this._search(t);for(let r=n;r>=0;r--){let s=this._timeline[r];if(s.state===e)return s}}getNextState(e,t){let n=this._search(t);if(n!==-1)for(let r=n;r<this._timeline.length;r++){let s=this._timeline[r];if(s.state===e)return s}}};var ue=class extends Ze{constructor(){super(y(ue.getDefaults(),arguments,["param","units","convert"]));this.name="Param",this.overridden=!1,this._minOutput=1e-7;let e=y(ue.getDefaults(),arguments,["param","units","convert"]);for(Q(fe(e.param)&&(Oo(e.param)||e.param instanceof ue),"param must be an AudioParam");!Oo(e.param);)e.param=e.param._param;this._swappable=fe(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new ct(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,fe(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Ze.getDefaults(),{convert:!0,units:"number"})}get value(){let e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return fe(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return fe(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return fe(this.maxValue)&&fe(this.minValue)&&gt(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?ls(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?us(e):e}setValueAtTime(e,t){let n=this.toSeconds(t),r=this._fromType(e);return Q(isFinite(r)&&isFinite(n),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",e,n),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}getValueAtTime(e){let t=Math.max(this.toSeconds(e),0),n=this._events.getAfter(t),r=this._events.get(t),s=this._initialValue;if(r===null)s=this._initialValue;else if(r.type==="setTargetAtTime"&&(n===null||n.type==="setValueAtTime")){let i=this._events.getBefore(r.time),a;i===null?a=this._initialValue:a=i.value,r.type==="setTargetAtTime"&&(s=this._exponentialApproach(r.time,a,r.value,r.constant,t))}else if(n===null)s=r.value;else if(n.type==="linearRampToValueAtTime"||n.type==="exponentialRampToValueAtTime"){let i=r.value;if(r.type==="setTargetAtTime"){let a=this._events.getBefore(r.time);a===null?i=this._initialValue:i=a.value}n.type==="linearRampToValueAtTime"?s=this._linearInterpolate(r.time,i,n.time,n.value,t):s=this._exponentialInterpolate(r.time,i,n.time,n.value,t)}else s=r.value;return this._toType(s)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){let n=this._fromType(e),r=this.toSeconds(t);return Q(isFinite(n)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(n),this._events.add({time:r,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(n,r),this}exponentialRampToValueAtTime(e,t){let n=this._fromType(e);n=Rt(n,0)?this._minOutput:n,this._assertRange(n);let r=this.toSeconds(t);return Q(isFinite(n)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(n,r),this}exponentialRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(e,n+this.toSeconds(t)),this}linearRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(e,n+this.toSeconds(t)),this}targetRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(e,n,t),this}exponentialApproachValueAtTime(e,t,n){t=this.toSeconds(t),n=this.toSeconds(n);let r=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(e,t,r),this.cancelAndHoldAtTime(t+n*.9),this.linearRampToValueAtTime(e,t+n),this}setTargetAtTime(e,t,n){let r=this._fromType(e);Q(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");let s=this.toSeconds(t);return this._assertRange(r),Q(isFinite(r)&&isFinite(s),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:n,time:s,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,s,n),this._param.setTargetAtTime(r,s,n),this}setValueCurveAtTime(e,t,n,r=1){n=this.toSeconds(n),t=this.toSeconds(t);let s=this._fromType(e[0])*r;this.setValueAtTime(this._toType(s),t);let i=n/(e.length-1);for(let a=1;a<e.length;a++){let c=this._fromType(e[a])*r;this.linearRampToValueAtTime(this._toType(c),t+a*i)}return this}cancelScheduledValues(e){let t=this.toSeconds(e);return Q(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){let t=this.toSeconds(e),n=this._fromType(this.getValueAtTime(t));Q(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+n);let r=this._events.get(t),s=this._events.getAfter(t);return r&&Rt(r.time,t)?s?(this._param.cancelScheduledValues(s.time),this._events.cancel(s.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):s&&(this._param.cancelScheduledValues(s.time),this._events.cancel(s.time),s.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(n),t):s.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(n),t)),this._events.add({time:t,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,t),this}rampTo(e,t=.1,n){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,n):this.linearRampTo(e,t,n),this}apply(e){let t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);let n=this._events.get(t);if(n&&n.type==="setTargetAtTime"){let r=this._events.getAfter(n.time),s=r?r.time:t+2,i=(s-t)/10;for(let a=t;a<s;a+=i)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?e.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?e.setTargetAtTime(r.value,r.time,r.constant):e[r.type](r.value,r.time)}),this}setParam(e){Q(this._swappable,"The Param must be assigned as 'swappable' in the constructor");let t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,n,r,s){return n+(t-n)*Math.exp(-(s-e)/r)}_linearInterpolate(e,t,n,r,s){return t+(r-t)*((s-e)/(n-e))}_exponentialInterpolate(e,t,n,r,s){return t*Math.pow(r/t,(s-e)/(n-e))}};var q=class extends Ze{constructor(){super(...arguments);this._internalChannels=[]}get numberOfInputs(){return fe(this.input)?Oo(this.input)||this.input instanceof ue?1:this.input.numberOfInputs:0}get numberOfOutputs(){return fe(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return fe(e)&&(e instanceof q||Uo(e))}_getInternalNodes(){let e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(n=>{n.channelCount=e.channelCount,n.channelCountMode=e.channelCountMode,n.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){let e=this._getInternalNodes();Q(e.length>0,"ToneAudioNode does not have any internal nodes");let t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){let t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){let t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){let t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,n=0){return kt(this,e,t,n),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return ar("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,n=0){return Gl(this,e,t,n),this}chain(...e){return zt(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),fe(this.input)&&(this.input instanceof q?this.input.dispose():Uo(this.input)&&this.input.disconnect()),fe(this.output)&&(this.output instanceof q?this.output.dispose():Uo(this.output)&&this.output.disconnect()),this._internalChannels=[],this}};function zt(...o){let e=o.shift();o.reduce((t,n)=>(t instanceof q?t.connect(n):Uo(t)&&kt(t,n),n),e)}function kt(o,e,t=0,n=0){for(Q(fe(o),"Cannot connect from undefined node"),Q(fe(e),"Cannot connect to undefined node"),(e instanceof q||Uo(e))&&Q(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Q(o.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof q||e instanceof ue;)fe(e.input)&&(e=e.input);for(;o instanceof q;)fe(o.output)&&(o=o.output);Oo(e)?o.connect(e,t):o.connect(e,t,n)}function Gl(o,e,t=0,n=0){if(fe(e))for(;e instanceof q;)e=e.input;for(;!Uo(o);)fe(o.output)&&(o=o.output);Oo(e)?o.disconnect(e,t):Uo(e)?o.disconnect(e,t,n):o.disconnect()}var te=class extends q{constructor(){super(y(te.getDefaults(),arguments,["gain","units"]));this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;let e=y(te.getDefaults(),arguments,["gain","units"]);this.gain=new ue({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),K(this,"gain")}static getDefaults(){return Object.assign(q.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}};var Go=class extends q{constructor(e){super(e);this.onended=he,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new te({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){let n=this.toSeconds(t);return this._startTime!==-1&&n>=this._startTime&&(this._stopTime===-1||n<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(q.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:he})}_startGain(e,t=1){Q(this._startTime===-1,"Source cannot be started more than once");let n=this.toSeconds(this._fadeIn);return this._startTime=e+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+n):this._gainNode.gain.exponentialApproachValueAtTime(t,e,n)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){Q(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();let t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.context.currentTime),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{let n=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+n),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==he&&(this.onended(this),this.onended=he,!this.context.isOffline)){let e=()=>this.dispose();typeof window.requestIdleCallback!="undefined"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Q(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=he,this}};var pr=class extends Go{constructor(){super(y(pr.getDefaults(),arguments,["offset"]));this.name="ToneConstantSource",this._source=this.context.createConstantSource();let e=y(pr.getDefaults(),arguments,["offset"]);kt(this._source,this._gainNode),this.offset=new ue({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Go.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){let t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}};var ne=class extends q{constructor(){super(y(ne.getDefaults(),arguments,["value","units"]));this.name="Signal",this.override=!0;let e=y(ne.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new pr({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(q.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,n=0){return fr(this,e,t,n),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,n){return this._param.exponentialRampTo(e,t,n),this}linearRampTo(e,t,n){return this._param.linearRampTo(e,t,n),this}targetRampTo(e,t,n){return this._param.targetRampTo(e,t,n),this}exponentialApproachValueAtTime(e,t,n){return this._param.exponentialApproachValueAtTime(e,t,n),this}setTargetAtTime(e,t,n){return this._param.setTargetAtTime(e,t,n),this}setValueCurveAtTime(e,t,n,r){return this._param.setValueCurveAtTime(e,t,n,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,n){return this._param.rampTo(e,t,n),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}};function fr(o,e,t,n){(e instanceof ue||Oo(e)||e instanceof ne&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof ne&&(e.overridden=!0)),kt(o,e,t,n)}var ps=class extends ue{constructor(){super(y(ps.getDefaults(),arguments,["value"]));this.name="TickParam",this._events=new ct(1/0),this._multiplier=1;let e=y(ps.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ue.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,n){t=this.toSeconds(t),this.setRampPoint(t);let r=this._fromType(e),s=this._events.get(t),i=Math.round(Math.max(1/n,1));for(let a=0;a<=i;a++){let c=n*a+t,l=this._exponentialApproach(s.time,s.value,r,n,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}setValueAtTime(e,t){let n=this.toSeconds(t);super.setValueAtTime(e,t);let r=this._events.get(n),s=this._events.previousEvent(r),i=this._getTicksUntilEvent(s,n);return r.ticks=Math.max(i,0),this}linearRampToValueAtTime(e,t){let n=this.toSeconds(t);super.linearRampToValueAtTime(e,t);let r=this._events.get(n),s=this._events.previousEvent(r),i=this._getTicksUntilEvent(s,n);return r.ticks=Math.max(i,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);let n=this._fromType(e),r=this._events.get(t),s=Math.round(Math.max((t-r.time)*10,1)),i=(t-r.time)/s;for(let a=0;a<=s;a++){let c=i*a+r.time,l=this._exponentialInterpolate(r.time,r.value,t,n,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(tt(e.ticks)){let i=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(i,e.time)}let n=this._fromType(this.getValueAtTime(e.time)),r=this._fromType(this.getValueAtTime(t)),s=this._events.get(t);return s&&s.time===t&&s.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(n+r)+e.ticks}getTicksAtTime(e){let t=this.toSeconds(e),n=this._events.get(t);return Math.max(this._getTicksUntilEvent(n,t),0)}getDurationOfTicks(e,t){let n=this.toSeconds(t),r=this.getTicksAtTime(t);return this.getTimeOfTick(r+e)-n}getTimeOfTick(e){let t=this._events.get(e,"ticks"),n=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&n&&n.type==="linearRampToValueAtTime"&&t.value!==n.value){let r=this._fromType(this.getValueAtTime(t.time)),i=(this._fromType(this.getValueAtTime(n.time))-r)/(n.time-t.time),a=Math.sqrt(Math.pow(r,2)-2*i*(t.ticks-e)),c=(-r+a)/i,l=(-r-a)/i;return(c>0?c:l)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){let n=this.toSeconds(t),r=this.toSeconds(e),s=this.getTicksAtTime(n);return this.getTicksAtTime(n+r)-s}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){let t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}};var fs=class extends ne{constructor(){super(y(fs.getDefaults(),arguments,["value"]));this.name="TickSignal";let e=y(fs.getDefaults(),arguments,["value"]);this.input=this._param=new ps({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(ne.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}};var ds=class extends Ze{constructor(){super(y(ds.getDefaults(),arguments,["frequency"]));this.name="TickSource",this._state=new rn,this._tickOffset=new ct,this._ticksAtTime=new ct,this._secondsAtTime=new ct;let e=y(ds.getDefaults(),arguments,["frequency"]);this.frequency=new fs({context:this.context,units:e.units,value:e.frequency}),K(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Ze.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){let n=this.toSeconds(e);return this._state.getValueAtTime(n)!=="started"&&(this._state.setStateAtTime("started",n),fe(t)&&this.setTicksAtTime(t,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}stop(e){let t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){let n=this._state.get(t);n&&n.time>0&&(this._tickOffset.cancel(n.time),this._state.cancel(n.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){let t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){let t=this.toSeconds(e),n=this._state.getLastState("stopped",t),r=this._ticksAtTime.get(t),s={state:"paused",time:t};this._state.add(s);let i=r||n,a=r?r.ticks:0,c=null;return this._state.forEachBetween(i.time,t+this.sampleTime,l=>{let u=i.time,p=this._tickOffset.get(l.time);p&&p.time>=i.time&&(a=p.ticks,u=p.time),i.state==="started"&&l.state!=="started"&&(a+=this.frequency.getTicksAtTime(l.time)-this.frequency.getTicksAtTime(u),l.time!=s.time&&(c={state:l.state,time:l.time,ticks:a})),i=l}),this._state.remove(s),c&&this._ticksAtTime.add(c),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){let t=this.now(),n=this.frequency.timeToTicks(e,t);this.setTicksAtTime(n,t)}getSecondsAtTime(e){e=this.toSeconds(e);let t=this._state.getLastState("stopped",e),n={state:"paused",time:e};this._state.add(n);let r=this._secondsAtTime.get(e),s=r||t,i=r?r.seconds:0,a=null;return this._state.forEachBetween(s.time,e+this.sampleTime,c=>{let l=s.time,u=this._tickOffset.get(c.time);u&&u.time>=s.time&&(i=u.seconds,l=u.time),s.state==="started"&&c.state!=="started"&&(i+=c.time-l,c.time!=n.time&&(a={state:c.state,time:c.time,seconds:i})),s=c}),this._state.remove(n),a&&this._secondsAtTime.add(a),i}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){let n=this._tickOffset.get(t),r=this._state.get(t),s=Math.max(n.time,r.time),i=this.frequency.getTicksAtTime(s)+e-n.ticks;return this.frequency.getTimeOfTick(i)}forEachTickBetween(e,t,n){let r=this._state.get(e);this._state.forEachBetween(e,t,i=>{r&&r.state==="started"&&i.state!=="started"&&this.forEachTickBetween(Math.max(r.time,e),i.time-this.sampleTime,n),r=i});let s=null;if(r&&r.state==="started"){let i=Math.max(r.time,e),a=this.frequency.getTicksAtTime(i),c=this.frequency.getTicksAtTime(r.time),l=a-c,u=Math.ceil(l)-l;u=Rt(u,1)?0:u;let p=this.frequency.getTimeOfTick(a+u);for(;p<t;){try{n(p,Math.round(this.getTicksAtTime(p)))}catch(f){s=f;break}p+=this.frequency.getDurationOfTicks(1,p)}}if(s)throw s;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}};var Fn=class extends Ze{constructor(){super(y(Fn.getDefaults(),arguments,["callback","frequency"]));this.name="Clock",this.callback=he,this._lastUpdate=0,this._state=new rn("stopped"),this._boundLoop=this._loop.bind(this);let e=y(Fn.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new ds({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,K(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Ze.getDefaults(),{callback:he,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){Ga(this.context);let n=this.toSeconds(e);return this.log("start",n),this._state.getValueAtTime(n)!=="started"&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,t),n<this._lastUpdate&&this.emit("start",n,t)),this}stop(e){let t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){let t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){let n=this.toSeconds(t),r=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(r+e,n)}_loop(){let e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,n=>{switch(n.state){case"started":let r=this._tickSource.getTicksAtTime(n.time);this.emit("start",n.time,r);break;case"stopped":n.time!==0&&this.emit("stop",n.time);break;case"paused":this.emit("pause",n.time);break}}),this._tickSource.forEachTickBetween(e,t,(n,r)=>{this.callback(n,r)}))}getStateAtTime(e){let t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}};on.mixin(Fn);var dr=class extends bt{constructor(){super();this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;let e=y(dr.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;let n=e.urls[t];this.add(t,n,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:he,onload:he,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return Q(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,n=he,r=he){return xt(t)?(this.baseUrl&&t.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new ye(this.baseUrl+t,n,r))):this._buffers.set(e.toString(),new ye(t,n,r)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}};var hs=class extends _t{constructor(){super(...arguments);this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return No(super._frequencyToUnits(e))}_ticksToUnits(e){return No(super._ticksToUnits(e))}_beatsToUnits(e){return No(super._beatsToUnits(e))}_secondsToUnits(e){return No(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return Oi(this.toMidi())}transpose(e){return new hs(this.context,this.toMidi()+e)}};var lo=class extends Eo{constructor(){super(...arguments);this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}};var w_=class extends Ze{constructor(){super(...arguments);this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new ct,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){let e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){let t=this._events.shift();t&&e-t.time<=this.expiration&&t.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}};Mn(o=>{o.draw=new w_({context:o})});Pn(o=>{o.draw.dispose()});var Hl=class extends bt{constructor(){super(...arguments);this.name="IntervalTimeline",this._root=null,this._length=0}add(e){Q(fe(e.time),"Events must have a time property"),Q(fe(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new S_(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){let t=[];this._root.search(e.time,t);for(let n of t)if(n.event===e){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{let t=e.getBalance(),n,r=null;if(t>0)if(e.left.right===null)n=e.left,n.right=e.right,r=n;else{for(n=e.left.right;n.right!==null;)n=n.right;n.parent&&(n.parent.right=n.left,r=n.parent,n.left=e.left,n.right=e.right)}else if(e.right.left===null)n=e.right,n.left=e.left,r=n;else{for(n=e.right.left;n.left!==null;)n=n.left;n.parent&&(n.parent.left=n.right,r=n.parent,n.left=e.left,n.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=n:e.parent.right=n:this._setRoot(n),r&&this._rebalance(r)}e.dispose()}_rotateLeft(e){let t=e.parent,n=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),t!==null?n?t.left=r:t.right=r:this._setRoot(r)}_rotateRight(e){let t=e.parent,n=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),t!==null?n?t.left=r:t.right=r:this._setRoot(r)}_rebalance(e){let t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){let t=[];if(this._root.search(e,t),t.length>0){let n=t[0];for(let r=1;r<t.length;r++)t[r].low>n.low&&(n=t[r]);return n.event}}return null}forEach(e){if(this._root!==null){let t=[];this._root.traverse(n=>t.push(n)),t.forEach(n=>{n.event&&e(n.event)})}return this}forEachAtTime(e,t){if(this._root!==null){let n=[];this._root.search(e,n),n.forEach(r=>{r.event&&t(r.event)})}return this}forEachFrom(e,t){if(this._root!==null){let n=[];this._root.searchAfter(e,n),n.forEach(r=>{r.event&&t(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}},S_=class{constructor(e,t,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}};var $t=class extends q{constructor(){super(y($t.getDefaults(),arguments,["volume"]));this.name="Volume";let e=y($t.getDefaults(),arguments,["volume"]);this.input=this.output=new te({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,K(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(q.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}};var Ei=class extends q{constructor(){super(y(Ei.getDefaults(),arguments));this.name="Destination",this.input=new $t({context:this.context}),this.output=new te({context:this.context}),this.volume=this.input.volume;let e=y(Ei.getDefaults(),arguments);zt(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(q.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),zt(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}};Mn(o=>{o.destination=new Ei({context:o})});Pn(o=>{o.destination.dispose()});var Yl=class extends bt{constructor(e){super();this.name="TimelineValue",this._timeline=new ct({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){let t=this._timeline.get(e);return t?t.value:this._initialValue}};var Ao=class{constructor(e,t){this.id=Ao._eventId++,this._remainderTime=0;let n=Object.assign(Ao.getDefaults(),t);this.transport=e,this.callback=n.callback,this._once=n.once,this.time=Math.floor(n.time),this._remainderTime=n.time-this.time}static getDefaults(){return{callback:he,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){let t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}};Ao._eventId=0;var Ai=class extends Ao{constructor(e,t){super(e,t);this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);let n=Object.assign(Ai.getDefaults(),t);this.duration=n.duration,this._interval=n.interval,this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Ao.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return cr(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new lo(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){cr(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new lo(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;let t=this.transport.getTicksAtTime(e);tn(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}};var ms=class extends Ze{constructor(){super(y(ms.getDefaults(),arguments));this.name="Transport",this._loop=new Yl(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new ct,this._repeatedEvents=new Hl,this._syncedSignals=[],this._swingAmount=0;let e=y(ms.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new Fn({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),K(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Ze.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!=0&&t%(this._swingTicks*2)!=0){let n=t%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(n*Math.PI)*this._swingAmount;e+=new lo(this.context,this._swingTicks*2/3).toSeconds()*r}ql(!0),this._timeline.forEachAtTime(t,n=>n.invoke(e)),ql(!1)}schedule(e,t){let n=new Ao(this,{callback:e,time:new Eo(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(e,t,n,r=1/0){let s=new Ai(this,{callback:e,duration:new Ct(this.context,r).toTicks(),interval:new Ct(this.context,t).toTicks(),time:new Eo(this.context,n).toTicks()});return this._addEvent(s,this._repeatedEvents)}scheduleOnce(e,t){let n=new Ao(this,{callback:e,once:!0,time:new Eo(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){let t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){let t=this.toTicks(e);return this._timeline.forEachFrom(t,n=>this.clear(n.id)),this._repeatedEvents.forEachFrom(t,n=>this.clear(n.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new lo(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){this.context.resume();let n;return fe(t)&&(n=this.toTicks(t)),this._clock.start(e,n),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){Qe(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Ct(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Ct(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new lo(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){let e=this.now(),t=this._clock.getTicksAtTime(e);return new lo(this.context,t).toBarsBeatsSixteenths()}set position(e){let t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){let t=this.now(),n=this._clock.frequency.timeToTicks(e,t);this.ticks=n}get progress(){if(this.loop){let e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){let t=this.now();if(this.state==="started"){let n=this._clock.getTicksAtTime(t),r=this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,t),s=t+r;this.emit("stop",s),this._clock.setTicksAtTime(e,s),this.emit("start",s,this._clock.getSecondsAtTime(s))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{let t=this.now(),n=this.getTicksAtTime(t),r=e-n%e;return this._clock.nextTickTime(r,t)}}syncSignal(e,t){if(!t){let r=this.now();if(e.getValueAtTime(r)!==0){let s=this.bpm.getValueAtTime(r),i=1/(60/s/this.PPQ);t=e.getValueAtTime(r)/i}else t=0}let n=new te(t);return this.bpm.connect(n),n.connect(e._param),this._syncedSignals.push({initial:e.value,ratio:n,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){let n=this._syncedSignals[t];n.signal===e&&(n.ratio.dispose(),n.signal.value=n.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),lr(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}};on.mixin(ms);Mn(o=>{o.transport=new ms({context:o})});Pn(o=>{o.transport.dispose()});var Oe=class extends q{constructor(e){super(e);this.input=void 0,this._state=new rn("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=he,this._syncedStop=he,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new $t({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,K(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(q.getDefaults(),{mute:!1,onstop:he,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,n){let r=tt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")Q(tn(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,t,n);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){let s=this._state.get(r);s&&(s.offset=this.toSeconds(to(t,0)),s.duration=n?this.toSeconds(n):void 0);let i=this.context.transport.schedule(a=>{this._start(a,t,n)},r);this._scheduled.push(i),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else Ga(this.context),this._start(r,t,n);return this}stop(e){let t=tt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||fe(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{let n=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(n)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,n){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(tn(t,0)){let n=this._state.get(t);if(n&&n.state==="started"&&n.time!==t){let r=t-this.toSeconds(n.time),s;n.duration&&(s=this.toSeconds(n.duration)-r),this._start(e,this.toSeconds(n.offset)+r,s)}}},this._syncedStop=e=>{let t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=he,this.unsync(),this._volume.dispose(),this._state.dispose(),this}};var uo=class extends Go{constructor(){super(y(uo.getDefaults(),arguments,["url","onload"]));this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;let e=y(uo.getDefaults(),arguments,["url","onload"]);kt(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new ue({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new ye(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Go.getDefaults(),{url:new ye,loop:!1,loopEnd:0,loopStart:0,onload:he,onerror:he,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,n,r=1){Q(this.buffer.loaded,"buffer is either not set or not loaded");let s=this.toSeconds(e);this._startGain(s,r),this.loop?t=to(t,this.loopStart):t=to(t,0);let i=Math.max(this.toSeconds(t),0);if(this.loop){let a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),l=a-c;Si(i,a)&&(i=(i-c)%l+c),Rt(i,this.buffer.duration)&&(i=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,cr(i,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(s,i)),fe(n)){let a=this.toSeconds(n);a=Math.max(a,0),this.stop(s+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}};var Ho=class extends Oe{constructor(){super(y(Ho.getDefaults(),arguments,["type"]));this.name="Noise",this._source=null;let e=y(Ho.getDefaults(),arguments,["type"]);this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Oe.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(Q(e in T_,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){let t=this.now();this._stop(t),this._start(t)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){let t=T_[this._type];this._source=new uo({url:t,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(t.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}},gs=44100*5,Xl=2,sn={brown:null,pink:null,white:null},T_={get brown(){if(!sn.brown){let o=[];for(let e=0;e<Xl;e++){let t=new Float32Array(gs);o[e]=t;let n=0;for(let r=0;r<gs;r++){let s=Math.random()*2-1;t[r]=(n+.02*s)/1.02,n=t[r],t[r]*=3.5}}sn.brown=new ye().fromArray(o)}return sn.brown},get pink(){if(!sn.pink){let o=[];for(let e=0;e<Xl;e++){let t=new Float32Array(gs);o[e]=t;let n,r,s,i,a,c,l;n=r=s=i=a=c=l=0;for(let u=0;u<gs;u++){let p=Math.random()*2-1;n=.99886*n+p*.0555179,r=.99332*r+p*.0750759,s=.969*s+p*.153852,i=.8665*i+p*.3104856,a=.55*a+p*.5329522,c=-.7616*c-p*.016898,t[u]=n+r+s+i+a+c+l+p*.5362,t[u]*=.11,l=p*.115926}}sn.pink=new ye().fromArray(o)}return sn.pink},get white(){if(!sn.white){let o=[];for(let e=0;e<Xl;e++){let t=new Float32Array(gs);o[e]=t;for(let n=0;n<gs;n++)t[n]=Math.random()*2-1}sn.white=new ye().fromArray(o)}return sn.white}};function Ut(o,e){return ve(this,void 0,void 0,function*(){let t=e/o.context.sampleRate,n=new nn(1,t,o.context.sampleRate);return new o.constructor(Object.assign(o.get(),{frequency:2/t,detune:0,context:n})).toDestination().start(0),(yield n.render()).getChannelData(0)})}var hr=class extends Go{constructor(){super(y(hr.getDefaults(),arguments,["frequency","type"]));this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];let e=y(hr.getDefaults(),arguments,["frequency","type"]);kt(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new ue({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new ue({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),K(this,["frequency","detune"])}static getDefaults(){return Object.assign(Go.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){let t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}};var De=class extends Oe{constructor(){super(y(De.getDefaults(),arguments,["frequency","type"]));this.name="Oscillator",this._oscillator=null;let e=y(De.getDefaults(),arguments,["frequency","type"]);this.frequency=new ne({context:this.context,units:"frequency",value:e.frequency}),K(this,"frequency"),this.detune=new ne({context:this.context,units:"cents",value:e.detune}),K(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Oe.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){let t=this.toSeconds(e),n=new hr({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){let t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){let t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return De._periodicWaveCache.find(t=>t.phase===this._phase&&d_(t.partials,this._partials));{let e=De._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;let t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{let n=this._getCachedPeriodicWave();if(fe(n)){let{partials:r,wave:s}=n;this._wave=s,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{let[r,s]=this._getRealImaginary(e,this._phase),i=this.context.createPeriodicWave(r,s);this._wave=i,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),De._periodicWaveCache.push({imag:s,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),De._periodicWaveCache.length>100&&De._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){gt(e,0);let t=this._type,n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(t=n[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{let r=new Float32Array(e);this._partials.forEach((s,i)=>r[i]=s),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(e,t){let r=4096/2,s=new Float32Array(r),i=new Float32Array(r),a=1;if(e==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,r=a,this._partials.length===0)return[s,i]}else{let c=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);c?(a=parseInt(c[2],10)+1,this._partialCount=parseInt(c[2],10),e=c[1],a=Math.max(a,2),r=a):this._partialCount=0,this._partials=[]}for(let c=1;c<r;++c){let l=2/(c*Math.PI),u;switch(e){case"sine":u=c<=a?1:0,this._partials[c-1]=u;break;case"square":u=c&1?2*l:0,this._partials[c-1]=u;break;case"sawtooth":u=l*(c&1?1:-1),this._partials[c-1]=u;break;case"triangle":c&1?u=2*(l*l)*(c-1>>1&1?-1:1):u=0,this._partials[c-1]=u;break;case"custom":u=this._partials[c-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}u!==0?(s[c]=-u*Math.sin(t*c),i[c]=u*Math.cos(t*c)):(s[c]=0,i[c]=0)}return[s,i]}_inverseFFT(e,t,n){let r=0,s=e.length;for(let i=0;i<s;i++)r+=e[i]*Math.cos(i*n)+t[i]*Math.sin(i*n);return r}getInitialValue(){let[e,t]=this._getRealImaginary(this._type,0),n=0,r=Math.PI*2,s=32;for(let i=0;i<s;i++)n=Math.max(this._inverseFFT(e,t,i/s*r),n);return Wl(-this._inverseFFT(e,t,this._phase)/n,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return ve(this,void 0,void 0,function*(){return Ut(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}};De._periodicWaveCache=[];var vt=class extends q{constructor(){super(Object.assign(y(vt.getDefaults(),arguments,["context"])))}connect(e,t=0,n=0){return fr(this,e,t,n),this}};var Vt=class extends vt{constructor(){super(Object.assign(y(Vt.getDefaults(),arguments,["mapping","length"])));this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;let e=y(Vt.getDefaults(),arguments,["mapping","length"]);Qe(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):Fg(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(ne.getDefaults(),{length:1024})}setMap(e,t=1024){let n=new Float32Array(t);for(let r=0,s=t;r<s;r++){let i=r/(s-1)*2-1;n[r]=e(i,r)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){let t=["none","2x","4x"].some(n=>n.includes(e));Q(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}};var mr=class extends vt{constructor(){super(...arguments);this.name="AudioToGain",this._norm=new Vt({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}};var qe=class extends ne{constructor(){super(Object.assign(y(qe.getDefaults(),arguments,["value"])));this.name="Multiply",this.override=!1;let e=y(qe.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new te({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ne.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}};var gr=class extends Oe{constructor(){super(y(gr.getDefaults(),arguments,["frequency","type","modulationType"]));this.name="AMOscillator",this._modulationScale=new mr({context:this.context}),this._modulationNode=new te({context:this.context});let e=y(gr.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new De({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new De({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new qe({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),K(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(De.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return ve(this,void 0,void 0,function*(){return Ut(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}};var an=class extends Oe{constructor(){super(y(an.getDefaults(),arguments,["frequency","type","modulationType"]));this.name="FMOscillator",this._modulationNode=new te({context:this.context,gain:0});let e=y(an.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new De({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new ne({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new De({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new qe({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new qe({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),K(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(De.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return ve(this,void 0,void 0,function*(){return Ut(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}};var cn=class extends Oe{constructor(){super(y(cn.getDefaults(),arguments,["frequency","width"]));this.name="PulseOscillator",this._widthGate=new te({context:this.context,gain:0}),this._thresh=new Vt({context:this.context,mapping:t=>t<=0?-1:1});let e=y(cn.getDefaults(),arguments,["frequency","width"]);this.width=new ne({context:this.context,units:"audioRange",value:e.width}),this._triangle=new De({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),K(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Oe.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return ve(this,void 0,void 0,function*(){return Ut(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}};var _r=class extends Oe{constructor(){super(y(_r.getDefaults(),arguments,["frequency","type","spread"]));this.name="FatOscillator",this._oscillators=[];let e=y(_r.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new ne({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ne({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,K(this,["frequency","detune"])}static getDefaults(){return Object.assign(De.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){let t=-e/2,n=e/(this._oscillators.length-1);this._forEach((r,s)=>r.detune.value=t+n*s)}}get count(){return this._oscillators.length}set count(e){if(gt(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){let n=new De({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):he});this.type==="custom"&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[t]=n}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,n)=>t.phase=this._phase+n/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return ve(this,void 0,void 0,function*(){return Ut(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}};var vr=class extends Oe{constructor(){super(y(vr.getDefaults(),arguments,["frequency","modulationFrequency"]));this.name="PWMOscillator",this.sourceType="pwm",this._scale=new qe({context:this.context,value:2});let e=y(vr.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new cn({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new De({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),K(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Oe.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return ve(this,void 0,void 0,function*(){return Ut(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}};var O_={am:gr,fat:_r,fm:an,oscillator:De,pulse:cn,pwm:vr},oo=class extends Oe{constructor(){super(y(oo.getDefaults(),arguments,["frequency","type"]));this.name="OmniOscillator";let e=y(oo.getDefaults(),arguments,["frequency","type"]);this.frequency=new ne({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ne({context:this.context,units:"cents",value:e.detune}),K(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(De.getDefaults(),an.getDefaults(),gr.getDefaults(),_r.getDefaults(),cn.getDefaults(),vr.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;let t=O_[e],n=this.now();if(this._oscillator){let r=this._oscillator;r.stop(n),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof O_[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Nt(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Nt(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&xt(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return ve(this,void 0,void 0,function*(){return Ut(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}};var Rn=class extends ne{constructor(){super(Object.assign(y(Rn.getDefaults(),arguments,["value"])));this.override=!1,this.name="Add",this._sum=new te({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,zt(this._constantSource,this._sum)}static getDefaults(){return Object.assign(ne.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}};var po=class extends vt{constructor(){super(Object.assign(y(po.getDefaults(),arguments,["min","max"])));this.name="Scale";let e=y(po.getDefaults(),arguments,["min","max"]);this._mult=this.input=new qe({context:this.context,value:e.max-e.min}),this._add=this.output=new Rn({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(vt.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}};var Ci=class extends vt{constructor(){super(Object.assign(y(Ci.getDefaults(),arguments)));this.name="Zero",this._gain=new te({context:this.context}),this.output=this._gain,this.input=void 0,kt(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),Gl(this.context.getConstant(0),this._gain),this}};var fo=class extends q{constructor(){super(y(fo.getDefaults(),arguments,["frequency","min","max"]));this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=ue.prototype._fromType,this._toType=ue.prototype._toType,this._is=ue.prototype._is,this._clampValue=ue.prototype._clampValue;let e=y(fo.getDefaults(),arguments,["frequency","min","max"]);this._oscillator=new De(e),this.frequency=this._oscillator.frequency,this._amplitudeGain=new te({context:this.context,gain:e.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new ne({context:this.context,units:"audioRange",value:0}),this._zeros=new Ci({context:this.context}),this._a2g=new mr({context:this.context}),this._scaler=this.output=new po({context:this.context,max:e.max,min:e.min}),this.units=e.units,this.min=e.min,this.max=e.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),K(this,["amplitude","frequency"]),this.phase=e.phase}static getDefaults(){return Object.assign(De.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this}stop(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(e){e=this._fromType(e),this._scaler.min=e}get max(){return this._toType(this._scaler.max)}set max(e){e=this._fromType(e),this._scaler.max=e}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(e){this._oscillator.partials=e,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e,this._setStoppedValue()}get units(){return this._units}set units(e){let t=this.min,n=this.max;this._units=e,this.min=t,this.max=n}get state(){return this._oscillator.state}connect(e,t,n){return(e instanceof ue||e instanceof ne)&&(this.convert=e.convert,this.units=e.units),fr(this,e,t,n),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}};function Za(o,e=1/0){let t=new WeakMap;return function(n,r){Reflect.defineProperty(n,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(s){gt(s,o,e),t.set(this,s)}})}}function Gt(o,e=1/0){let t=new WeakMap;return function(n,r){Reflect.defineProperty(n,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(s){gt(this.toSeconds(s),o,e),t.set(this,s)}})}}var yr=class extends Oe{constructor(){super(y(yr.getDefaults(),arguments,["url","onload"]));this.name="Player",this._activeSources=new Set;let e=y(yr.getDefaults(),arguments,["url","onload"]);this._buffer=new ye({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Oe.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:he,onerror:he,playbackRate:1,reverse:!1})}load(e){return ve(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=he){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,n){return super.start(e,t,n),this}_start(e,t,n){this._loop?t=to(t,this._loopStart):t=to(t,0);let r=this.toSeconds(t),s=n;n=to(n,Math.max(this._buffer.duration-r,0));let i=this.toSeconds(n);i=i/this._playbackRate,e=this.toSeconds(e);let a=new uo({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+i),this._state.setStateAtTime("stopped",e+i,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&tt(s)?a.start(e,r):a.start(e,r,i-this.toSeconds(this.fadeOut))}_stop(e){let t=this.toSeconds(e);this._activeSources.forEach(n=>n.stop(t))}restart(e,t,n){return super.restart(e,t,n),this}_restart(e,t,n){this._stop(e),this._start(e,t,n)}seek(e,t){let n=this.toSeconds(t);if(this._state.getValueAtTime(n)==="started"){let r=this.toSeconds(e);this._stop(n),this._start(n,r)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&gt(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&gt(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){let t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;let t=this.now(),n=this._state.getNextState("stopped",t);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}};At([Gt(0)],yr.prototype,"fadeIn",void 0);At([Gt(0)],yr.prototype,"fadeOut",void 0);var xr=class extends vt{constructor(){super(Object.assign(y(xr.getDefaults(),arguments,["value"])));this.name="Pow";let e=y(xr.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new Vt({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(vt.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}};var ze=class extends q{constructor(){super(y(ze.getDefaults(),arguments,["attack","decay","sustain","release"]));this.name="Envelope",this._sig=new ne({context:this.context,value:0}),this.output=this._sig,this.input=void 0;let e=y(ze.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(q.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(xt(e))return e;{let n;for(n in Ja)if(Ja[n][t]===e)return n;return e}}_setCurve(e,t,n){if(xt(n)&&Reflect.has(Ja,n)){let r=Ja[n];To(r)?e!=="_decayCurve"&&(this[e]=r[t]):this[e]=r}else if(Qe(n)&&e!=="_decayCurve")this[e]=n;else throw new Error("Envelope: invalid curve: "+n)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._decayCurve}set decayCurve(e){Q(["linear","exponential"].some(t=>t===e),`Invalid envelope curve: ${e}`),this._decayCurve=e}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let r=this.toSeconds(this.attack),s=this.toSeconds(this.decay),i=this.getValueAtTime(e);if(i>0){let a=1/r;r=(1-i)/a}if(r<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,r,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,r,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let c=1;c<a.length;c++)if(a[c-1]<=i&&i<=a[c]){a=this._attackCurve.slice(c),a[0]=i;break}this._sig.setValueCurveAtTime(a,e,r,t)}if(s&&this.sustain<1){let a=t*this.sustain,c=e+r;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,s+c):this._sig.exponentialApproachValueAtTime(a,c,s)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);let t=this.getValueAtTime(e);if(t>0){let n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,n,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,n,e):(Q(Qe(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,n,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,n=1){return t=this.toSeconds(t),this.triggerAttack(t,n),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,n=0){return fr(this,e,t,n),this}asArray(e=1024){return ve(this,void 0,void 0,function*(){let t=e/this.context.sampleRate,n=new nn(1,t,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),s=r+this.toSeconds(this.release),i=s*.1,a=s+i,c=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/a,decay:t*this.toSeconds(this.decay)/a,release:t*this.toSeconds(this.release)/a,context:n}));return c._sig.toDestination(),c.triggerAttackRelease(t*(r+i)/a,0),(yield n.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}};At([Gt(0)],ze.prototype,"attack",void 0);At([Gt(0)],ze.prototype,"decay",void 0);At([Za(0,1)],ze.prototype,"sustain",void 0);At([Gt(0)],ze.prototype,"release",void 0);var Ja=(()=>{let o=128,e,t,n=[];for(e=0;e<o;e++)n[e]=Math.sin(e/(o-1)*(Math.PI/2));let r=[],s=6.4;for(e=0;e<o-1;e++){t=e/(o-1);let f=Math.sin(t*(Math.PI*2)*s-Math.PI/2)+1;r[e]=f/10+t*.83}r[o-1]=1;let i=[],a=5;for(e=0;e<o;e++)i[e]=Math.ceil(e/(o-1)*a)/a;let c=[];for(e=0;e<o;e++)t=e/(o-1),c[e]=.5*(1-Math.cos(Math.PI*t));let l=[];for(e=0;e<o;e++){t=e/(o-1);let f=Math.pow(t,3)*4+.2,d=Math.cos(f*Math.PI*2*t);l[e]=Math.abs(d*(1-t))}function u(f){let d=new Array(f.length);for(let h=0;h<f.length;h++)d[h]=1-f[h];return d}function p(f){return f.slice(0).reverse()}return{bounce:{In:u(l),Out:l},cosine:{In:n,Out:p(n)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:u(r)},sine:{In:c,Out:u(c)},step:{In:i,Out:u(i)}}})();var ot=class extends q{constructor(){super(y(ot.getDefaults(),arguments));this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t);let e=y(ot.getDefaults(),arguments);this._volume=this.output=new $t({context:this.context,volume:e.volume}),this.volume=this._volume.volume,K(this,"volume")}static getDefaults(){return Object.assign(q.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){let n=this["_original_"+e]=this[e];this[e]=(...r)=>{let s=r[t],i=this.context.transport.schedule(a=>{r[t]=a,n.apply(this,r)},s);this._scheduledEvents.push(i)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,n,r){let s=this.toSeconds(n),i=this.toSeconds(t);return this.triggerAttack(e,s,r),this.triggerRelease(s+i),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}};var Be=class extends ot{constructor(){super(y(Be.getDefaults(),arguments));let e=y(Be.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(ot.getDefaults(),{detune:0,onsilence:he,portamento:0})}triggerAttack(e,t,n=1){this.log("triggerAttack",e,t,n);let r=this.toSeconds(t);return this._triggerEnvelopeAttack(r,n),this.setNote(e,r),this}triggerRelease(e){this.log("triggerRelease",e);let t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){let n=this.toSeconds(t),r=e instanceof _t?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(n)>.05){let s=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,s,n)}else this.frequency.setValueAtTime(r,n);return this}};At([Gt(0)],Be.prototype,"portamento",void 0);var ln=class extends ze{constructor(){super(y(ln.getDefaults(),arguments,["attack","decay","sustain","release"]));this.name="AmplitudeEnvelope",this._gainNode=new te({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}};var Ht=class extends Be{constructor(){super(y(Ht.getDefaults(),arguments));this.name="Synth";let e=y(Ht.getDefaults(),arguments);this.oscillator=new oo(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new ln(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),K(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Be.getDefaults(),{envelope:Object.assign(Ye(ze.getDefaults(),Object.keys(q.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Ye(oo.getDefaults(),[...Object.keys(Oe.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){let n=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+n+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}};var un=class extends Be{constructor(){super(y(un.getDefaults(),arguments));this.name="ModulationSynth";let e=y(un.getDefaults(),arguments);this._carrier=new Ht({context:this.context,oscillator:e.oscillator,envelope:e.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new Ht({context:this.context,oscillator:e.modulation,envelope:e.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new ne({context:this.context,units:"frequency"}),this.detune=new ne({context:this.context,value:e.detune,units:"cents"}),this.harmonicity=new qe({context:this.context,value:e.harmonicity,minValue:0}),this._modulationNode=new te({context:this.context,gain:0}),K(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(Be.getDefaults(),{harmonicity:3,oscillator:Object.assign(Ye(oo.getDefaults(),[...Object.keys(Oe.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(Ye(ze.getDefaults(),Object.keys(q.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(Ye(oo.getDefaults(),[...Object.keys(Oe.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(Ye(ze.getDefaults(),Object.keys(q.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(e,t){this._carrier._triggerEnvelopeAttack(e,t),this._modulator._triggerEnvelopeAttack(e,t)}_triggerEnvelopeRelease(e){return this._carrier._triggerEnvelopeRelease(e),this._modulator._triggerEnvelopeRelease(e),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}};var ki=class extends un{constructor(){super(y(ki.getDefaults(),arguments));this.name="AMSynth",this._modulationScale=new mr({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}};var br=class extends q{constructor(){super(y(br.getDefaults(),arguments,["frequency","type"]));this.name="BiquadFilter";let e=y(br.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new ue({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new ue({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new ue({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new ue({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(q.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){Q(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){let t=new Float32Array(e);for(let i=0;i<e;i++){let c=Math.pow(i/e,2)*(2e4-20)+20;t[i]=c}let n=new Float32Array(e),r=new Float32Array(e),s=this.context.createBiquadFilter();return s.type=this.type,s.Q.value=this.Q.value,s.frequency.value=this.frequency.value,s.gain.value=this.gain.value,s.getFrequencyResponse(t,n,r),n}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}};var ho=class extends q{constructor(){super(y(ho.getDefaults(),arguments,["frequency","type","rolloff"]));this.name="Filter",this.input=new te({context:this.context}),this.output=new te({context:this.context}),this._filters=[];let e=y(ho.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new ne({context:this.context,units:"positive",value:e.Q}),this.frequency=new ne({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ne({context:this.context,units:"cents",value:e.detune}),this.gain=new ne({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,K(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(q.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){Q(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(n=>n.type=e)}get rolloff(){return this._rolloff}set rolloff(e){let t=Nt(e)?e:parseInt(e,10),n=[-12,-24,-48,-96],r=n.indexOf(t);Q(r!==-1,`rolloff can only be ${n.join(", ")}`),r+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach(s=>s.disconnect()),this._filters=new Array(r);for(let s=0;s<r;s++){let i=new br({context:this.context});i.type=this._type,this.frequency.connect(i.frequency),this.detune.connect(i.detune),this.Q.connect(i.Q),this.gain.connect(i.gain),this._filters[s]=i}this._internalChannels=this._filters,zt(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){let t=new br({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),n=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((s,i)=>n[i]*=s)}),t.dispose(),n}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),lr(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}};var wr=class extends ze{constructor(){super(y(wr.getDefaults(),arguments,["attack","decay","sustain","release"]));this.name="FrequencyEnvelope";let e=y(wr.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new xr({context:this.context,value:e.exponent}),this._scale=this.output=new po({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(ze.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){let t=this.toFrequency(e);gt(t,0),this._baseFrequency=t,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}};var Co=class extends Be{constructor(){super(y(Co.getDefaults(),arguments));this.name="MonoSynth";let e=y(Co.getDefaults(),arguments);this.oscillator=new oo(Object.assign(e.oscillator,{context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new ho(Object.assign(e.filter,{context:this.context})),this.filterEnvelope=new wr(Object.assign(e.filterEnvelope,{context:this.context})),this.envelope=new ln(Object.assign(e.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),K(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(Be.getDefaults(),{envelope:Object.assign(Ye(ze.getDefaults(),Object.keys(q.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(Ye(ho.getDefaults(),Object.keys(q.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(Ye(wr.getDefaults(),Object.keys(q.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(Ye(oo.getDefaults(),Object.keys(Oe.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e,t=1){if(this.envelope.triggerAttack(e,t),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),this.envelope.sustain===0){let n=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+n+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}};var _s=class extends Be{constructor(){super(y(_s.getDefaults(),arguments));this.name="DuoSynth";let e=y(_s.getDefaults(),arguments);this.voice0=new Co(Object.assign(e.voice0,{context:this.context,onsilence:()=>this.onsilence(this)})),this.voice1=new Co(Object.assign(e.voice1,{context:this.context})),this.harmonicity=new qe({context:this.context,units:"positive",value:e.harmonicity}),this._vibrato=new fo({frequency:e.vibratoRate,context:this.context,min:-50,max:50}),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new te({context:this.context,units:"normalRange",gain:e.vibratoAmount}),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new ne({context:this.context,units:"frequency",value:440}),this.detune=new ne({context:this.context,units:"cents",value:e.detune}),this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.detune.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),K(this,["voice0","voice1","frequency","vibratoAmount","vibratoRate"])}getLevelAtTime(e){return e=this.toSeconds(e),this.voice0.envelope.getValueAtTime(e)+this.voice1.envelope.getValueAtTime(e)}static getDefaults(){return Et(Be.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:Et(Ye(Co.getDefaults(),Object.keys(Be.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:Et(Ye(Co.getDefaults(),Object.keys(Be.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}_triggerEnvelopeAttack(e,t){this.voice0._triggerEnvelopeAttack(e,t),this.voice1._triggerEnvelopeAttack(e,t)}_triggerEnvelopeRelease(e){return this.voice0._triggerEnvelopeRelease(e),this.voice1._triggerEnvelopeRelease(e),this}dispose(){return super.dispose(),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}};var vs=class extends un{constructor(){super(y(vs.getDefaults(),arguments));this.name="FMSynth";let e=y(vs.getDefaults(),arguments);this.modulationIndex=new qe({context:this.context,value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(un.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}};var N_=[1,1.483,1.932,2.546,2.63,3.897],ys=class extends Be{constructor(){super(y(ys.getDefaults(),arguments));this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[];let e=y(ys.getDefaults(),arguments);this.detune=new ne({context:this.context,units:"cents",value:e.detune}),this.frequency=new ne({context:this.context,units:"frequency"}),this._amplitude=new te({context:this.context,gain:0}).connect(this.output),this._highpass=new ho({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let t=0;t<N_.length;t++){let n=new an({context:this.context,harmonicity:e.harmonicity,modulationIndex:e.modulationIndex,modulationType:"square",onstop:t===0?()=>this.onsilence(this):he,type:"square"});n.connect(this._highpass),this._oscillators[t]=n;let r=new qe({context:this.context,value:N_[t]});this._freqMultipliers[t]=r,this.frequency.chain(r,n.frequency),this.detune.connect(n.detune)}this._filterFreqScaler=new po({context:this.context,max:7e3,min:this.toFrequency(e.resonance)}),this.envelope=new ze({attack:e.envelope.attack,attackCurve:"linear",context:this.context,decay:e.envelope.decay,release:e.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=e.octaves,this.octaves=e.octaves}static getDefaults(){return Et(Be.getDefaults(),{envelope:Object.assign(Ye(ze.getDefaults(),Object.keys(q.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(e,t=1){return this.envelope.triggerAttack(e,t),this._oscillators.forEach(n=>n.start(e)),this.envelope.sustain===0&&this._oscillators.forEach(n=>{n.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))}),this}_triggerEnvelopeRelease(e){return this.envelope.triggerRelease(e),this._oscillators.forEach(t=>t.stop(e+this.toSeconds(this.envelope.release))),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(e){this._oscillators.forEach(t=>t.modulationIndex.value=e)}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(e){this._oscillators.forEach(t=>t.harmonicity.value=e)}get resonance(){return this._filterFreqScaler.min}set resonance(e){this._filterFreqScaler.min=this.toFrequency(e),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,e)}dispose(){return super.dispose(),this._oscillators.forEach(e=>e.dispose()),this._freqMultipliers.forEach(e=>e.dispose()),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}};var Vn=class extends Ht{constructor(){super(y(Vn.getDefaults(),arguments));this.name="MembraneSynth",this.portamento=0;let e=y(Vn.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,K(this,["oscillator","envelope"])}static getDefaults(){return Et(Be.getDefaults(),Ht.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){let n=this.toSeconds(t),r=this.toFrequency(e instanceof _t?e.toFrequency():e),s=r*this.octaves;return this.oscillator.frequency.setValueAtTime(s,n),this.oscillator.frequency.exponentialRampToValueAtTime(r,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}};At([Za(0)],Vn.prototype,"octaves",void 0);At([Gt(0)],Vn.prototype,"pitchDecay",void 0);var pn=class extends ot{constructor(){super(y(pn.getDefaults(),arguments));this.name="NoiseSynth";let e=y(pn.getDefaults(),arguments);this.noise=new Ho(Object.assign({context:this.context},e.noise)),this.envelope=new ln(Object.assign({context:this.context},e.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(ot.getDefaults(),{envelope:Object.assign(Ye(ze.getDefaults(),Object.keys(q.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(Ye(Ho.getDefaults(),Object.keys(Oe.getDefaults())),{type:"white"})})}triggerAttack(e,t=1){return e=this.toSeconds(e),this.envelope.triggerAttack(e,t),this.noise.start(e),this.envelope.sustain===0&&this.noise.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(e){return e=this.toSeconds(e),this.envelope.triggerRelease(e),this.noise.stop(e+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(e,t,n=1){return t=this.toSeconds(t),e=this.toSeconds(e),this.triggerAttack(t,n),this.triggerRelease(t+e),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}};var Ql=new Set;function xs(o){Ql.add(o)}function ec(o,e){let t=`registerProcessor("${o}", ${e})`;Ql.add(t)}function E_(){return Array.from(Ql).join(`
`)}var tc=class extends q{constructor(e){super(e);this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=he;let t=URL.createObjectURL(new Blob([E_()],{type:"text/javascript"})),n=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(t,n).then(()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(n,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))})}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}};var N0=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;xs(N0);var E0=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;xs(E0);var A0=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;xs(A0);var Zl="feedback-comb-filter",C0=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;ec(Zl,C0);var Sr=class extends tc{constructor(){super(y(Sr.getDefaults(),arguments,["delayTime","resonance"]));this.name="FeedbackCombFilter";let e=y(Sr.getDefaults(),arguments,["delayTime","resonance"]);this.input=new te({context:this.context}),this.output=new te({context:this.context}),this.delayTime=new ue({context:this.context,value:e.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new ue({context:this.context,value:e.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),K(this,["resonance","delayTime"])}_audioWorkletName(){return Zl}static getDefaults(){return Object.assign(q.getDefaults(),{delayTime:.1,resonance:.5})}onReady(e){zt(this.input,e,this.output);let t=e.parameters.get("delayTime");this.delayTime.setParam(t);let n=e.parameters.get("feedback");this.resonance.setParam(n)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}};var Tr=class extends q{constructor(){super(y(Tr.getDefaults(),arguments,["frequency","type"]));this.name="OnePoleFilter";let e=y(Tr.getDefaults(),arguments,["frequency","type"]);this._frequency=e.frequency,this._type=e.type,this.input=new te({context:this.context}),this.output=new te({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(q.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){let e=this._filter,t=this.toFrequency(this._frequency),n=1/(2*Math.PI*t);if(this._type==="lowpass"){let r=1/(n*this.context.sampleRate),s=r-1;this._filter=this.context.createIIRFilter([r,0],[1,s])}else{let r=1/(n*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,r])}this.input.chain(this._filter,this.output),e&&this.context.setTimeout(()=>{this.disposed||(this.input.disconnect(e),e.disconnect())},this.blockTime)}get frequency(){return this._frequency}set frequency(e){this._frequency=e,this._createFilter()}get type(){return this._type}set type(e){this._type=e,this._createFilter()}getFrequencyResponse(e=128){let t=new Float32Array(e);for(let s=0;s<e;s++){let a=Math.pow(s/e,2)*(2e4-20)+20;t[s]=a}let n=new Float32Array(e),r=new Float32Array(e);return this._filter.getFrequencyResponse(t,n,r),n}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}};var Or=class extends q{constructor(){super(y(Or.getDefaults(),arguments,["delayTime","resonance","dampening"]));this.name="LowpassCombFilter";let e=y(Or.getDefaults(),arguments,["delayTime","resonance","dampening"]);this._combFilter=this.output=new Sr({context:this.context,delayTime:e.delayTime,resonance:e.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new Tr({context:this.context,frequency:e.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(q.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(e){this._lowpass.frequency=e}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}};var bs=class extends ot{constructor(){super(y(bs.getDefaults(),arguments));this.name="PluckSynth";let e=y(bs.getDefaults(),arguments);this._noise=new Ho({context:this.context,type:"pink"}),this.attackNoise=e.attackNoise,this._lfcf=new Or({context:this.context,dampening:e.dampening,resonance:e.resonance}),this.resonance=e.resonance,this.release=e.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return Et(ot.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(e){this._lfcf.dampening=e}triggerAttack(e,t){let n=this.toFrequency(e);t=this.toSeconds(t);let r=1/n;return this._lfcf.delayTime.setValueAtTime(r,t),this._noise.start(t),this._noise.stop(t+r*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(t),this._lfcf.resonance.setValueAtTime(this.resonance,t),this}triggerRelease(e){return this._lfcf.resonance.linearRampTo(0,this.release,e),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}};var qt=class extends ot{constructor(){super(y(qt.getDefaults(),arguments,["voice","options"]));this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=r=>this.releaseAll(r);let e=y(qt.getDefaults(),arguments,["voice","options"]);Q(!Nt(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");let t=e.voice.getDefaults();this.options=Object.assign(t,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();let n=this._voices.indexOf(this._dummyVoice);this._voices.splice(n,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(ot.getDefaults(),{maxPolyphony:32,options:{},voice:Ht})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);let t=this._activeVoices.findIndex(n=>n.voice===e);this._activeVoices.splice(t,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){let e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return Q(e instanceof Be,"Voice must extend Monophonic class"),e.connect(this.output),this._voices.push(e),e}else ar("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){let e=this._availableVoices.shift(),t=this._voices.indexOf(e);this._voices.splice(t,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,t,n){e.forEach(r=>{let s=new hs(this.context,r).toMidi(),i=this._getNextAvailableVoice();i&&(i.triggerAttack(r,t,n),this._activeVoices.push({midi:s,voice:i,released:!1}),this.log("triggerAttack",r,t))})}_triggerRelease(e,t){e.forEach(n=>{let r=new hs(this.context,n).toMidi(),s=this._activeVoices.find(({midi:i,released:a})=>i===r&&!a);s&&(s.voice.triggerRelease(t),s.released=!0,this.log("triggerRelease",n,t))})}_scheduleEvent(e,t,n,r){Q(!this.disposed,"Synth was already disposed"),n<=this.now()?e==="attack"?this._triggerAttack(t,n,r):this._triggerRelease(t,n):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(e,t,n,r)},n-this.now())}triggerAttack(e,t,n){Array.isArray(e)||(e=[e]);let r=this.toSeconds(t);return this._scheduleEvent("attack",e,r,n),this}triggerRelease(e,t){Array.isArray(e)||(e=[e]);let n=this.toSeconds(t);return this._scheduleEvent("release",e,n),this}triggerAttackRelease(e,t,n,r){let s=this.toSeconds(n);if(this.triggerAttack(e,s,r),Qe(t)){Q(Qe(e),"If the duration is an array, the notes must also be an array"),e=e;for(let i=0;i<e.length;i++){let a=t[Math.min(i,t.length-1)],c=this.toSeconds(a);Q(c>0,"The duration must be greater than 0"),this.triggerRelease(e[i],s+c)}}else{let i=this.toSeconds(t);Q(i>0,"The duration must be greater than 0"),this.triggerRelease(e,s+i)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(e){let t=Ye(e,["onsilence","context"]);return this.options=Et(this.options,t),this._voices.forEach(n=>n.set(t)),this._dummyVoice.set(t),this}get(){return this._dummyVoice.get()}releaseAll(e){let t=this.toSeconds(e);return this._activeVoices.forEach(({voice:n})=>{n.triggerRelease(t)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}};var ws=class extends ot{constructor(){super(y(ws.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"));this.name="Sampler",this._activeSources=new Map;let e=y(ws.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),t={};Object.keys(e.urls).forEach(n=>{let r=parseInt(n,10);if(Q(wi(n)||Nt(r)&&isFinite(r),`url key is neither a note or midi pitch: ${n}`),wi(n)){let s=new _t(this.context,n).toMidi();t[s]=e.urls[n]}else Nt(r)&&isFinite(r)&&(t[r]=e.urls[r])}),this._buffers=new dr({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(ot.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:he,onerror:he,release:.1,urls:{}})}_findClosest(e){let t=96,n=0;for(;n<t;){if(this._buffers.has(e+n))return-n;if(this._buffers.has(e-n))return n;n++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,n=1){return this.log("triggerAttack",e,t,n),Array.isArray(e)||(e=[e]),e.forEach(r=>{let s=Ul(new _t(this.context,r).toFrequency()),i=Math.round(s),a=s-i,c=this._findClosest(i),l=i-c,u=this._buffers.get(l),p=ur(c+a),f=new uo({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:p}).connect(this.output);f.start(t,0,u.duration/p,n),Qe(this._activeSources.get(i))||this._activeSources.set(i,[]),this._activeSources.get(i).push(f),f.onended=()=>{if(this._activeSources&&this._activeSources.has(i)){let d=this._activeSources.get(i),h=d.indexOf(f);h!==-1&&d.splice(h,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(n=>{let r=new _t(this.context,n).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){let s=this._activeSources.get(r);t=this.toSeconds(t),s.forEach(i=>{i.stop(t)}),this._activeSources.set(r,[])}}),this}releaseAll(e){let t=this.toSeconds(e);return this._activeSources.forEach(n=>{for(;n.length;)n.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,n,r=1){let s=this.toSeconds(n);return this.triggerAttack(e,s,r),Qe(t)?(Q(Qe(e),"notes must be an array when duration is array"),e.forEach((i,a)=>{let c=t[Math.min(a,t.length-1)];this.triggerRelease(i,s+this.toSeconds(c))})):this.triggerRelease(e,s+this.toSeconds(t)),this}add(e,t,n){if(Q(wi(e)||isFinite(e),`note must be a pitch or midi: ${e}`),wi(e)){let r=new _t(this.context,e).toMidi();this._buffers.add(r,t,n)}else this._buffers.add(e,t,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}};At([Gt(0)],ws.prototype,"attack",void 0);At([Gt(0)],ws.prototype,"release",void 0);var Nr=class extends q{constructor(){super(Object.assign(y(Nr.getDefaults(),arguments,["pan"])));this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;let e=y(Nr.getDefaults(),arguments,["pan"]);this.pan=new ue({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",K(this,"pan")}static getDefaults(){return Object.assign(q.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}};var k_="bit-crusher",M0=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;ec(k_,M0);var xfe=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100];var Afe=[1687/25e3,1601/25e3,2053/25e3,2251/25e3];var Je=class extends q{constructor(){super(y(Je.getDefaults(),arguments,["solo"]));this.name="Solo";let e=y(Je.getDefaults(),arguments,["solo"]);this.input=this.output=new te({context:this.context}),Je._allSolos.has(this.context)||Je._allSolos.set(this.context,new Set),Je._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(q.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),Je._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Je._soloed.has(this.context)||Je._soloed.set(this.context,new Set),Je._soloed.get(this.context).add(this)}_removeSolo(){Je._soloed.has(this.context)&&Je._soloed.get(this.context).delete(this)}_isSoloed(){return Je._soloed.has(this.context)&&Je._soloed.get(this.context).has(this)}_noSolos(){return!Je._soloed.has(this.context)||Je._soloed.has(this.context)&&Je._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Je._allSolos.get(this.context).delete(this),this._removeSolo(),this}};Je._allSolos=new Map;Je._soloed=new Map;var Ss=class extends q{constructor(){super(y(Ss.getDefaults(),arguments,["pan","volume"]));this.name="PanVol";let e=y(Ss.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Nr({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new $t({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,K(this,["pan","volume"])}static getDefaults(){return Object.assign(q.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}};var qn=class extends q{constructor(){super(y(qn.getDefaults(),arguments,["volume","pan"]));this.name="Channel";let e=y(qn.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Je({solo:e.solo,context:this.context}),this._panVol=this.output=new Ss({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),K(this,["pan","volume"])}static getDefaults(){return Object.assign(q.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return qn.buses.has(e)||qn.buses.set(e,new te({context:this.context})),qn.buses.get(e)}send(e,t=0){let n=this._getBus(e),r=new te({context:this.context,units:"decibels",gain:t});return this.connect(r),r.connect(n),r}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}};qn.buses=new Map;var D_=class extends q{constructor(){super(...arguments);this.name="Listener",this.positionX=new ue({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new ue({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new ue({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new ue({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new ue({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new ue({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new ue({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new ue({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new ue({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(q.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}};Mn(o=>{o.listener=new D_({context:o})});Pn(o=>{o.listener.dispose()});var x_e=lt().transport;var b_e=lt().destination,w_e=lt().destination;var S_e=lt().listener;var T_e=lt().draw;var O_e=lt();function P_(o){return["click","beep","AMSynth","DuoSynth","FMSynth","MembraneSynth","MetalSynth","MonoSynth","PluckSynth"].includes(o)}var I_=o=>{switch(o){case"click":return"NoiseSynth";case"beep":return"Synth";default:return o}};var tu={},L0=o=>{if(!tu[o]){let e;switch(o){case"AMSynth":e=new qt(ki);break;case"DuoSynth":e=new qt(_s);break;case"FMSynth":e=new qt(vs);break;case"MembraneSynth":e=new qt(Vn);break;case"MetalSynth":e=new qt(ys);break;case"MonoSynth":e=new qt(Co);break;case"NoiseSynth":e=new pn;break;case"PluckSynth":e=new bs;break;case"Synth":default:e=new qt(Ht);break}tu[o]=e.toDestination()}return tu[o]},B0=new pn({noise:{type:"white"}}).toDestination(),j0=new pn({noise:{type:"brown"}}).toDestination(),W0=new pn({noise:{type:"pink"}}).toDestination(),F_=()=>B0.triggerAttackRelease("8n"),R_=()=>j0.triggerAttackRelease("8n"),V_=()=>W0.triggerAttackRelease("8n"),sc=(o=["C4"],e="click")=>{let t=L0(I_(e));try{t instanceof qt?t.triggerAttackRelease(o,"16n"):t instanceof ot&&t.triggerAttackRelease(o[0],"16n")}catch(n){t instanceof qt?t.releaseAll():t instanceof ot&&t.triggerRelease()}};function q_(o){let e=be(-1),t=()=>e.value++,n=be(!1),r=()=>n.value=!0,s=ft(()=>{var C;return((C=o.value)==null?void 0:C.isValid())?e.value%o.value.upper:e.value%2}),i=ft(()=>!o.value||!o.value.isValid()||s.value===0),a=ft(()=>o.value&&o.value.isValid()&&o.value.upper>=6&&e.value%(o.value.upper/2)==0),c=ft(()=>!i.value&&!a.value),l=[],u=[],p=[],f=[],d=[],h=C=>{l.push(C)},m=C=>u.push(C),g=C=>p.push(C),x=C=>f.push(C),T=C=>d.push(C),D=C=>C.forEach(w=>w());return Ge(e,()=>{D(f),n.value&&(e.value=0,n.value=!1),d.length&&(D(d),d.length=0)}),Ge([i,e],([C])=>{n.value||C&&D(l)}),Ge([a,e],([C])=>{n.value||C&&D(u)}),Ge([c,e],([C])=>{n.value||C&&D(p)}),{doBeat:t,onBeat:x,onNextBeatOnly:T,onTick:h,onTickAlternate:m,onTock:g,resetTick:r,currentBeat:s}}function L_(o){let e=be(!1),t=be(null),n=()=>t.value&&t.value();return Ge(o,()=>{n();let r=o.value?o.value.closest(".markdown-source-view")||o.value.closest(".markdown-reading-view")||o.value.closest(".markdown-preview-view"):null,s=()=>r.closest(".mod-left-split, .mod-right-split")!==null,{stop:i}=wa(r,a=>e.value=a.some(c=>c.isIntersecting)||s());t.value=i},{immediate:!0}),vo(n),e}var z0=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;xe.nanosecond=xe.ns=1/1e6;xe.\u00B5s=xe.\u03BCs=xe.us=xe.microsecond=1/1e3;xe.millisecond=xe.ms=xe[""]=1;xe.second=xe.sec=xe.s=xe.ms*1e3;xe.minute=xe.min=xe.m=xe.s*60;xe.hour=xe.hr=xe.h=xe.m*60;xe.day=xe.d=xe.h*24;xe.week=xe.wk=xe.w=xe.d*7;xe.month=xe.b=xe.d*(365.25/12);xe.year=xe.yr=xe.y=xe.d*365.25;function xe(o="",e="ms"){var t=null;return o=(o+"").replace(/(\d)[,_](\d)/g,"$1$2"),o.replace(z0,function(n,r,s){s=B_(s),s&&(t=(t||0)+parseFloat(r,10)*s)}),t&&t/(B_(e)||1)}function B_(o){return xe[o]||xe[o.toLowerCase().replace(/s$/,"")]}var ou=xe;function j_(){let o=null,e=be(!1),t,n=be(0),r=be(0),s=be(!1),i=be(!1),a=ft(()=>n.value<=0),c=ft(()=>i.value&&(s.value||n.value&&n.value<r.value)),l=()=>o?(o-Date.now())/1e3:null,u=()=>{if(n.value=l(),n.value<=0&&(n.value=0),!a.value){let h=n.value%1*1e3;t=window.setTimeout(u,(c.value?200:1e3)+h)}},p=(h,m)=>{d(),i.value=!0;let g=ou(h);if(r.value=(ou(m)||10*1e3)/1e3,s.value=(m||"").toUpperCase()==="always".toUpperCase(),g===null){e.value=!0;return}o=Date.now()+g,u()},f=()=>{i.value=!1,window.clearTimeout(t)},d=()=>{f(),n.value=o};return Ge(a,()=>{a.value&&f()}),vo(f),{startAutoStopTimer:p,resetAutoStopTimer:d,timeLeft:n,expired:a,expiringSoon:c,autoStopDurationInvalid:e}}var Di=We({props:{bpm:{type:null,required:!0},muted:{type:null,required:!0},meter:{type:null,required:!0},size:{type:null,required:!0},style:{type:null,required:!0},autoStart:{type:null,required:!0},stopAfter:{type:null,required:!0},countdown:{type:null,required:!0},instrument:{type:null,required:!0},tickNotes:{type:null,required:!0},tockNotes:{type:null,required:!0}},setup(o,{expose:e}){var L;e();let t=o,n=be(null),r=be(t.muted),s=be((L=t.autoStart)!=null?L:!0),{meter:i}=Ji(t),{doBeat:a,onBeat:c,onTick:l,onTickAlternate:u,onTock:p,resetTick:f,currentBeat:d}=q_(i),h=L_(n),{haltAnimationStyle:m}=Vo({synchronizeElement:n,onBeat:c}),{startAutoStopTimer:g,resetAutoStopTimer:x,timeLeft:T,expired:D,expiringSoon:C}=j_();l(()=>!r.value&&(t.instrument==="click"?F_():sc(t.tickNotes,t.instrument))),u(()=>!r.value&&(t.instrument==="click"?V_():sc(t.tockNotes,t.instrument))),p(()=>!r.value&&(t.instrument==="click"?R_():sc(t.tockNotes,t.instrument)));let w=be(null),N=()=>{t.bpm.isValid()&&(w.value=window.setInterval(a,t.bpm.getBeatDurationSeconds(i)*1e3),t.stopAfter&&g(t.stopAfter,t.countdown))},b=()=>clearInterval(w.value);Ge([s,h],()=>{s.value&&h.value?N():(b(),x())},{immediate:!0}),Ge(D,()=>{D.value&&(s.value=!1)}),vo(b);let O={props:t,metronome:n,muted:r,started:s,meter:i,doBeat:a,onBeat:c,onTick:l,onTickAlternate:u,onTock:p,resetTick:f,currentBeat:d,parentWrapperIsVisible:h,haltAnimationStyle:m,startAutoStopTimer:g,resetAutoStopTimer:x,timeLeft:T,expired:D,expiringSoon:C,interval:w,startInterval:N,stopInterval:b,OverlayToggle:of,Controls:ff,Status:mf,MuteToggle:xf,DisableAutoStopTimerButton:Cf,Visualization:Ff};return Object.defineProperty(O,"__isScriptSetup",{enumerable:!1,value:!0}),O}});var $0=["data-size","data-started"];function W_(o,e,t,n,r,s){return Ae(),Ke("div",{ref:"metronome",class:"metronome",style:wt(A({"--metronome-duration":`${n.props.bpm.getBeatDurationSeconds(n.meter)}s`},n.haltAnimationStyle)),"data-size":n.props.size,"data-started":n.started},[Ie(n.OverlayToggle,{started:n.started,onClick:e[0]||(e[0]=i=>n.started=!n.started)},null,8,["started"]),Ie(n.Visualization,{visualization:n.props.style,started:n.started,"on-beat":n.onBeat,meter:n.props.meter,"current-beat":n.currentBeat,size:n.props.size,"on-tick":n.onTick,"on-tock":n.onTock},null,8,["visualization","started","on-beat","meter","current-beat","size","on-tick","on-tock"]),Ie(n.Controls,{started:n.started,"on-beat":n.onBeat,"on-tick":n.onTick,"on-tock":n.onTock},{default:Bs(()=>[Ie(n.MuteToggle,{modelValue:n.muted,"onUpdate:modelValue":e[1]||(e[1]=i=>n.muted=i),size:n.props.size,onUnmuted:n.resetTick},null,8,["modelValue","size","onUnmuted"]),Ie(n.Status,{started:n.started,onBeat:n.onBeat,bpm:t.bpm,meter:n.meter,size:n.props.size},null,8,["started","onBeat","bpm","meter","size"]),Ie(n.DisableAutoStopTimerButton,{expiringSoon:n.expiringSoon,timeLeft:n.timeLeft,onClick:n.resetAutoStopTimer},null,8,["expiringSoon","timeLeft","onClick"])]),_:1},8,["started","on-beat","on-tick","on-tock"])],12,$0)}Di.render=W_;Di.__file="src/components/Metronome.vue";Di.__scopeId="data-v-3fe9d756";var z_=Di;var vv=jn(G_());var yv=jn(_v()),lu=class{constructor(e){try{this.bpm=(0,yv.evalExpression)(e)}catch(t){console.error("Could not calculate BPM",t),this.bpm=NaN}}getBeatDurationSeconds(e){var t;return this.isValid()?new vv.BPM(this.bpm||0).durationFor(((t=e==null?void 0:e.value)==null?void 0:t.noteDuration())||"quarter"):999}isValid(){return!isNaN(this.bpm)&&this.bpm>0&&this.bpm<1e4}isSuperFast(){return this.bpm>=500}toString(){return this.isValid()?ro("%1 BPM",String(this.bpm)):`\u26A0\uFE0F ${ro("Invalid BPM")}`}};var Pi=class{constructor(e,t){this.upper=e,this.lower=t}noteDuration(){switch(this.lower){case 64:return"sixtyfourth";case 32:return"thirtysecondth";case 16:return"sixteenth";case 8:return"eigth";case 4:return"quarter";case 2:return"half";case 1:return"whole";default:return null}}isValid(){return!isNaN(this.upper)&&!isNaN(this.lower)&&this.upper>0&&this.lower>0}toString(){return this.isValid()&&this.noteDuration()?`${this.upper}/${this.lower}`:ro("Invalid or unsupported meter")}static fromString(e){let t=(e||"").split("/"),n=parseInt(t==null?void 0:t[0]),r=parseInt(t==null?void 0:t[1]);return new Pi(n,r)}};function xv(o){return["small","medium","large","xlarge"].includes(o)}function bv(o){return["pulse","pendulum","line","dots"].includes(o)}var uu=class extends fc.Plugin{constructor(){super(...arguments);this.metronomeAppInstances=[]}onload(){return ie(this,null,function*(){this.registerMarkdownCodeBlockProcessor("metronome",(e,t,n)=>{let r=this.getCodeBlockParameters(e),s=document.createElement("div"),i=new fc.MarkdownRenderChild(s),a=ef(z_,A({},r));this.metronomeAppInstances.push(a),a.mount(s),n.addChild(i),t.append(s),i.onunload=()=>a.unmount()})})}onunload(){this.metronomeAppInstances.forEach(e=>e.unmount())}getCodeBlockParameters(e){let t={};e.split(`
`).map(r=>r.split(":")).forEach(([r,s])=>t[r.toLowerCase()]=(s||"").trim());let n=r=>typeof r=="string"&&r.split(",").length>0?r.split(","):!1;return{bpm:new lu(t.bpm),muted:t.muted?t.muted==="yes":!0,meter:t.meter?Pi.fromString(t.meter):null,size:xv(t.size)?t.size:"small",style:bv(t.style)?t.style:"pulse",autoStart:t.autostart?t.autostart==="yes":null,stopAfter:t.stopafter?t.stopafter:null,countdown:t.countdown?t.countdown:"10s",instrument:P_(t.instrument)?t.instrument:"click",tickNotes:n(t.ticknotes)||["C6"],tockNotes:n(t.tocknotes)||["C5"]}}};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */
